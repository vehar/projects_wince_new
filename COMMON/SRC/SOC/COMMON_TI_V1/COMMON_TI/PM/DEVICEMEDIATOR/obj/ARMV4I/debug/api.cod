; Listing generated by Microsoft (R) Optimizing Compiler Version 14.01.60511.01 

	TTL	C:\WINCE600\PLATFORM\COMMON\SRC\SOC\COMMON_TI_V1\COMMON_TI\PM\DEVICEMEDIATOR\api.cpp
	CODE32

  00000			 AREA	 |.drectve|, DRECTVE
	DCB	"-defaultlib:LIBCMT "
	DCB	"-defaultlib:OLDNAMES "

	EXPORT	|PMCLASS_PMEXT_GUID| [ DATA ]
	EXPORT	|PMCLASS_BUSNAMESPACE_GUID| [ DATA ]
	EXPORT	|PMCLASS_DISPLAY_GUID| [ DATA ]
	EXPORT	|NULL_GUID| [ DATA ]

  00000			 AREA	 |.rdata|, DATA, READONLY
|PMCLASS_PMEXT_GUID| DCD 0xae2066f
	DCW	0x89a2
	DCW	0x4d70
	DCB	0x8f
	DCB	0xc2
	DCB	0x29
	DCB	0xae
	DCB	0xfa
	DCB	0x68
	DCB	0x41
	DCB	0x3c
|PMCLASS_BUSNAMESPACE_GUID| DCD 0xab2066f
	DCW	0x89a2
	DCW	0x4d70
	DCB	0x8f
	DCB	0xc2
	DCB	0x29
	DCB	0xae
	DCB	0x1a
	DCB	0xab
	DCB	0x34
	DCB	0x0
|PMCLASS_DISPLAY_GUID| DCD 0xeb91c7c9
	DCW	0x8bf6
	DCW	0x4a2d
	DCB	0x9a
	DCB	0xb8
	DCB	0x69
	DCB	0x72
	DCB	0x4e
	DCB	0xed
	DCB	0x97
	DCB	0xd1
|NULL_GUID| DCD	0x0
	DCW	0x0
	DCW	0x0
	DCB	0x0
	DCB	0x0
	DCB	0x0
	DCB	0x0
	DCB	0x0
	DCB	0x0
	DCB	0x0
	DCB	0x0
|s_rgAdvertisedInfo| DCD 0x65
	DCD	|PMCLASS_PMEXT_GUID|
	DCD	0x66
	DCD	|PMCLASS_DISPLAY_GUID|
	DCD	0x64
	DCD	|PMCLASS_BUSNAMESPACE_GUID|
	DCD	0xffffffff
	DCD	|NULL_GUID|
	%	8
	EXPORT	|?RegisterBusPowerCallbacks@@YAHPBG@Z|	; RegisterBusPowerCallbacks
	IMPORT	|CloseHandle|
	IMPORT	|DeviceIoControl|
	IMPORT	|?PostDeviceStateChange@@YAHIII@Z|	; PostDeviceStateChange
	IMPORT	|?PreDeviceStateChange@@YAHIII@Z|	; PreDeviceStateChange
	IMPORT	|CreateFileW|

  00000			 AREA	 |.pdata|, PDATA
|$T34687| DCD	|$LN6@RegisterBu|
	DCD	0x40003804
; Function compile flags: /Odtp
; File c:\wince600\platform\common\src\soc\common_ti_v1\common_ti\pm\devicemediator\api.cpp

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |?RegisterBusPowerCallbacks@@YAHPBG@Z| PROC ; RegisterBusPowerCallbacks

; 105  : {

  00000		 |$LN6@RegisterBu|
  00000	e1a0c00d	 mov         r12, sp
  00004	e92d0001	 stmdb       sp!, {r0}
  00008	e92d5000	 stmdb       sp!, {r12, lr}
  0000c	e24dd04c	 sub         sp, sp, #0x4C
  00010		 |$M34684|

; 106  :     HANDLE hBus;
; 107  :     BOOL rc = FALSE;

  00010	e3a03000	 mov         r3, #0
  00014	e58d3010	 str         r3, [sp, #0x10]

; 108  :     CE_BUS_DEVICESTATE_CALLBACKS deviceStateCallbacks;
; 109  :  
; 110  :     // Open bus for later calls
; 111  :     hBus = CreateFile(szBusNamespace, GENERIC_READ|GENERIC_WRITE,
; 112  :             FILE_SHARE_READ|FILE_SHARE_WRITE, NULL, OPEN_EXISTING, 0, NULL
; 113  :             );

  00018	e3a03000	 mov         r3, #0
  0001c	e58d3008	 str         r3, [sp, #8]
  00020	e3a03000	 mov         r3, #0
  00024	e58d3004	 str         r3, [sp, #4]
  00028	e3a03003	 mov         r3, #3
  0002c	e58d3000	 str         r3, [sp]
  00030	e3a03000	 mov         r3, #0
  00034	e3a02003	 mov         r2, #3
  00038	e3a01103	 mov         r1, #3, 2
  0003c	e59d0054	 ldr         r0, [sp, #0x54]
  00040	eb000000	 bl          CreateFileW
  00044	e58d0044	 str         r0, [sp, #0x44]
  00048	e59d3044	 ldr         r3, [sp, #0x44]
  0004c	e58d3014	 str         r3, [sp, #0x14]

; 114  : 
; 115  :     if (hBus != INVALID_HANDLE_VALUE)

  00050	e59d3014	 ldr         r3, [sp, #0x14]
  00054	e3730001	 cmn         r3, #1
  00058	0a000017	 beq         |$LN1@RegisterBu|

; 116  :         {
; 117  :         // initialize callback structure
; 118  :         deviceStateCallbacks.size = sizeof(CE_BUS_DEVICESTATE_CALLBACKS);

  0005c	e3a0300c	 mov         r3, #0xC
  00060	e58d3018	 str         r3, [sp, #0x18]

; 119  :         deviceStateCallbacks.PreDeviceStateChange = PreDeviceStateChange;

  00064	e59f3070	 ldr         r3, [pc, #0x70]
  00068	e58d301c	 str         r3, [sp, #0x1C]

; 120  :         deviceStateCallbacks.PostDeviceStateChange = PostDeviceStateChange;

  0006c	e59f3064	 ldr         r3, [pc, #0x64]
  00070	e58d3020	 str         r3, [sp, #0x20]

; 121  : 
; 122  :             // Call bus driver
; 123  :         rc = DeviceIoControl(hBus, 
; 124  :                              IOCTL_BUS_DEVICESTATE_CALLBACKS, 
; 125  :                              &deviceStateCallbacks,
; 126  :                              sizeof(CE_BUS_DEVICESTATE_CALLBACKS), 
; 127  :                              NULL, 
; 128  :                              0, 
; 129  :                              NULL, 
; 130  :                              NULL
; 131  :                              ); 

  00074	e3a03000	 mov         r3, #0
  00078	e58d300c	 str         r3, [sp, #0xC]
  0007c	e3a03000	 mov         r3, #0
  00080	e58d3008	 str         r3, [sp, #8]
  00084	e3a03000	 mov         r3, #0
  00088	e58d3004	 str         r3, [sp, #4]
  0008c	e3a03000	 mov         r3, #0
  00090	e58d3000	 str         r3, [sp]
  00094	e3a0300c	 mov         r3, #0xC
  00098	e28d2018	 add         r2, sp, #0x18
  0009c	e59f1030	 ldr         r1, [pc, #0x30]
  000a0	e59d0014	 ldr         r0, [sp, #0x14]
  000a4	eb000000	 bl          DeviceIoControl
  000a8	e58d0048	 str         r0, [sp, #0x48]
  000ac	e59d3048	 ldr         r3, [sp, #0x48]
  000b0	e58d3010	 str         r3, [sp, #0x10]

; 132  : 
; 133  :         CloseHandle(hBus);

  000b4	e59d0014	 ldr         r0, [sp, #0x14]
  000b8	eb000000	 bl          CloseHandle
  000bc		 |$LN1@RegisterBu|

; 134  :         }
; 135  :     
; 136  :     return rc;

  000bc	e59d3010	 ldr         r3, [sp, #0x10]
  000c0	e58d3040	 str         r3, [sp, #0x40]

; 137  : }

  000c4	e59d0040	 ldr         r0, [sp, #0x40]
  000c8	e28dd04c	 add         sp, sp, #0x4C
  000cc	e89d6000	 ldmia       sp, {sp, lr}
  000d0	e12fff1e	 bx          lr
  000d4		 |$LN7@RegisterBu|
  000d4		 |$LN8@RegisterBu|
  000d4	00220c1c	 DCD         0x220c1c
  000d8		 |$LN9@RegisterBu|
  000d8	00000000	 DCD         |?PostDeviceStateChange@@YAHIII@Z|
  000dc		 |$LN10@RegisterBu|
  000dc	00000000	 DCD         |?PreDeviceStateChange@@YAHIII@Z|
  000e0		 |$M34685|

			 ENDP  ; |?RegisterBusPowerCallbacks@@YAHPBG@Z|, RegisterBusPowerCallbacks

	EXPORT	|??0DisplayDevice@@QAA@XZ|		; DisplayDevice::DisplayDevice
	EXPORT	|??0StreamDevice@@QAA@XZ|		; StreamDevice::StreamDevice
	EXPORT	|__$ArrayPad$| [ DATA ]
	EXPORT	|?ProcessMsgQueueSignal@@YAHHPAXK@Z|	; ProcessMsgQueueSignal
	IMPORT	|?RemoveDevice@DeviceMediator@@QAAPAVDeviceBase@@PBG@Z| ; DeviceMediator::RemoveDevice
	IMPORT	|?InsertDevice@DeviceMediator@@QAAHPBGPAVDeviceBase@@@Z| ; DeviceMediator::InsertDevice
	IMPORT	|??2@YAPAXI@Z|				; operator new
	IMPORT	|?FindDevice@DeviceMediator@@QAAPAVDeviceBase@@PBG@Z| ; DeviceMediator::FindDevice
	IMPORT	|ReadMsgQueue|
	IMPORT	|memset|
	IMPORT	|__security_cookie|
	IMPORT	|__GSHandlerCheck|
	IMPORT	|__security_check_cookie|

  00000			 AREA	 |.bss|, NOINIT
|s_Device| %	0x14

  00008			 AREA	 |.pdata|, PDATA
|$T34718| DCD	|$LN29@ProcessMsg|
	DCD	0xc000d604

  00000			 AREA	 |.xdata|, DATA
|$T34714| DCD	0xffffffa0
; Function compile flags: /Odtp

  000e0			 AREA	 |.text|, CODE, ARM

  000e0	00000000	 DCD         |__GSHandlerCheck|
  000e4	00000000	 DCD         |$T34714|

  000e8		 |?ProcessMsgQueueSignal@@YAHHPAXK@Z| PROC ; ProcessMsgQueueSignal

; 152  : {

  000e8		 |$LN29@ProcessMsg|
  000e8	e1a0c00d	 mov         r12, sp
  000ec	e92d0007	 stmdb       sp!, {r0 - r2}
  000f0	e92d5000	 stmdb       sp!, {r12, lr}
  000f4	e24ddff9	 sub         sp, sp, #0xF9, 30
  000f8		 |$M34715|
  000f8	e59f333c	 ldr         r3, [pc, #0x33C]
  000fc	e5933000	 ldr         r3, [r3]
  00100	e58d3398	 str         r3, [sp, #0x398]

; 153  :     BOOL rc = FALSE;    

  00104	e3a03000	 mov         r3, #0
  00108	e58d300c	 str         r3, [sp, #0xC]

; 154  :     DWORD dwFlags = 0;

  0010c	e3a03000	 mov         r3, #0
  00110	e58d301c	 str         r3, [sp, #0x1C]

; 155  :     DeviceBase *pDevice;
; 156  :     DWORD iBytesInQueue = 0;

  00114	e3a03000	 mov         r3, #0
  00118	e58d3010	 str         r3, [sp, #0x10]

; 157  :     UCHAR deviceBuf[PNP_QUEUE_SIZE];
; 158  :     PDEVDETAIL pDevDetail = (PDEVDETAIL)deviceBuf;

  0011c	e28d3020	 add         r3, sp, #0x20
  00120	e58d3018	 str         r3, [sp, #0x18]

; 159  : 
; 160  : 
; 161  :     UNREFERENCED_PARAMETER(idx);
; 162  : 
; 163  :     // read a message from the message queue -- it should be a device advertisement
; 164  :     memset(deviceBuf, 0, PNP_QUEUE_SIZE);

  00124	e3a02e36	 mov         r2, #0x36, 28
  00128	e3a01000	 mov         r1, #0
  0012c	e28d0020	 add         r0, sp, #0x20
  00130	eb000000	 bl          memset

; 165  :     BOOL bRes = ::ReadMsgQueue(hMsgQ, deviceBuf, PNP_QUEUE_SIZE, 
; 166  :                     &iBytesInQueue, 0, &dwFlags);

  00134	e28d301c	 add         r3, sp, #0x1C
  00138	e58d3004	 str         r3, [sp, #4]
  0013c	e3a03000	 mov         r3, #0
  00140	e58d3000	 str         r3, [sp]
  00144	e28d3010	 add         r3, sp, #0x10
  00148	e3a02e36	 mov         r2, #0x36, 28
  0014c	e28d1020	 add         r1, sp, #0x20
  00150	e59d03f0	 ldr         r0, [sp, #0x3F0]
  00154	eb000000	 bl          ReadMsgQueue
  00158	e58d03a8	 str         r0, [sp, #0x3A8]
  0015c	e59d33a8	 ldr         r3, [sp, #0x3A8]
  00160	e58d3014	 str         r3, [sp, #0x14]

; 167  :     
; 168  :     if (bRes == TRUE && iBytesInQueue >= sizeof(DEVDETAIL)) 

  00164	e59d3014	 ldr         r3, [sp, #0x14]
  00168	e3530001	 cmp         r3, #1
  0016c	1a0000a7	 bne         |$LN16@ProcessMsg|
  00170	e59d3010	 ldr         r3, [sp, #0x10]
  00174	e3530020	 cmp         r3, #0x20
  00178	3a0000a4	 bcc         |$LN16@ProcessMsg|

; 169  :         {
; 170  :         // process the message
; 171  :         //
; 172  :         
; 173  :         // check for overlarge names
; 174  :         if(pDevDetail->cbName > ((PNP_MAX_NAMELEN - 1) * sizeof(pDevDetail->szName[0]))) 

  0017c	e59d3018	 ldr         r3, [sp, #0x18]
  00180	e2833018	 add         r3, r3, #0x18
  00184	e5933000	 ldr         r3, [r3]
  00188	e35300fe	 cmp         r3, #0xFE
  0018c	9a000001	 bls         |$LN15@ProcessMsg|
  00190	ea0000a0	 b           |$LN14@ProcessMsg|

; 175  :             {
; 176  :             goto cleanUp;

  00194	ea00009f	 b           |$cleanUp$34485|
  00198		 |$LN15@ProcessMsg|

; 177  :             }
; 178  :             
; 179  :         // add or remove the device -- note that a particular interface 
; 180  :         // may be advertised more than once, so these routines must 
; 181  :         // handle that possibility.
; 182  :         //
; 183  :         if(pDevDetail->fAttached) 

  00198	e59d3018	 ldr         r3, [sp, #0x18]
  0019c	e2833014	 add         r3, r3, #0x14
  001a0	e5933000	 ldr         r3, [r3]
  001a4	e3530000	 cmp         r3, #0
  001a8	0a000072	 beq         |$LN13@ProcessMsg|

; 184  :             {
; 185  :             pDevice = s_Device.pDeviceMediator->FindDevice(pDevDetail->szName);

  001ac	e59d3018	 ldr         r3, [sp, #0x18]
  001b0	e283101c	 add         r1, r3, #0x1C
  001b4	e59f327c	 ldr         r3, [pc, #0x27C]
  001b8	e5930010	 ldr         r0, [r3, #0x10]
  001bc	eb000000	 bl          |?FindDevice@DeviceMediator@@QAAPAVDeviceBase@@PBG@Z|
  001c0	e58d03ac	 str         r0, [sp, #0x3AC]
  001c4	e59d33ac	 ldr         r3, [sp, #0x3AC]
  001c8	e58d3008	 str         r3, [sp, #8]

; 186  :             if (pDevice == NULL)

  001cc	e59d3008	 ldr         r3, [sp, #8]
  001d0	e3530000	 cmp         r3, #0
  001d4	1a000066	 bne         |$LN12@ProcessMsg|

; 187  :                 {
; 188  :                 // Create DVFSDevice wrapper for device driver
; 189  :                 //
; 190  :                 switch (iid)

  001d8	e59d33f4	 ldr         r3, [sp, #0x3F4]
  001dc	e58d33b0	 str         r3, [sp, #0x3B0]
  001e0	e59d33b0	 ldr         r3, [sp, #0x3B0]
  001e4	e3530064	 cmp         r3, #0x64
  001e8	0a00002c	 beq         |$LN7@ProcessMsg|
  001ec	e59d33b0	 ldr         r3, [sp, #0x3B0]
  001f0	e3530065	 cmp         r3, #0x65
  001f4	0a000003	 beq         |$LN9@ProcessMsg|
  001f8	e59d33b0	 ldr         r3, [sp, #0x3B0]
  001fc	e3530066	 cmp         r3, #0x66
  00200	0a000013	 beq         |$LN8@ProcessMsg|
  00204	ea00002a	 b           |$LN5@ProcessMsg|
  00208		 |$LN9@ProcessMsg|

; 191  :                     {
; 192  :                     case StreamDevice::iid:
; 193  :                         pDevice = new StreamDevice();

  00208	e3a00e11	 mov         r0, #0x11, 28
  0020c	eb000000	 bl          |??2@YAPAXI@Z|
  00210	e58d03b4	 str         r0, [sp, #0x3B4]
  00214	e59d33b4	 ldr         r3, [sp, #0x3B4]
  00218	e58d3380	 str         r3, [sp, #0x380]
  0021c	e59d3380	 ldr         r3, [sp, #0x380]
  00220	e3530000	 cmp         r3, #0
  00224	0a000005	 beq         |$LN19@ProcessMsg|
  00228	e59d0380	 ldr         r0, [sp, #0x380]
  0022c	eb000000	 bl          |??0StreamDevice@@QAA@XZ|
  00230	e58d03b8	 str         r0, [sp, #0x3B8]
  00234	e59d33b8	 ldr         r3, [sp, #0x3B8]
  00238	e58d33bc	 str         r3, [sp, #0x3BC]
  0023c	ea000001	 b           |$LN20@ProcessMsg|
  00240		 |$LN19@ProcessMsg|
  00240	e3a03000	 mov         r3, #0
  00244	e58d33bc	 str         r3, [sp, #0x3BC]
  00248		 |$LN20@ProcessMsg|
  00248	e59d33bc	 ldr         r3, [sp, #0x3BC]
  0024c	e58d3008	 str         r3, [sp, #8]

; 194  :                         break;

  00250	ea000019	 b           |$LN10@ProcessMsg|
  00254		 |$LN8@ProcessMsg|

; 195  : 
; 196  :                     case DisplayDevice::iid:
; 197  :                         pDevice = new DisplayDevice();

  00254	e3a00e11	 mov         r0, #0x11, 28
  00258	eb000000	 bl          |??2@YAPAXI@Z|
  0025c	e58d03c0	 str         r0, [sp, #0x3C0]
  00260	e59d33c0	 ldr         r3, [sp, #0x3C0]
  00264	e58d3384	 str         r3, [sp, #0x384]
  00268	e59d3384	 ldr         r3, [sp, #0x384]
  0026c	e3530000	 cmp         r3, #0
  00270	0a000005	 beq         |$LN21@ProcessMsg|
  00274	e59d0384	 ldr         r0, [sp, #0x384]
  00278	eb000000	 bl          |??0DisplayDevice@@QAA@XZ|
  0027c	e58d03c4	 str         r0, [sp, #0x3C4]
  00280	e59d33c4	 ldr         r3, [sp, #0x3C4]
  00284	e58d33c8	 str         r3, [sp, #0x3C8]
  00288	ea000001	 b           |$LN22@ProcessMsg|
  0028c		 |$LN21@ProcessMsg|
  0028c	e3a03000	 mov         r3, #0
  00290	e58d33c8	 str         r3, [sp, #0x3C8]
  00294		 |$LN22@ProcessMsg|
  00294	e59d33c8	 ldr         r3, [sp, #0x3C8]
  00298	e58d3008	 str         r3, [sp, #8]

; 198  :                         break;

  0029c	ea000006	 b           |$LN10@ProcessMsg|
  002a0		 |$LN7@ProcessMsg|

; 199  : 
; 200  :                     case BUSNAMESPACE_CLASS:
; 201  :                         // special case to open a handle to bus namespace
; 202  :                         RegisterBusPowerCallbacks(pDevDetail->szName);

  002a0	e59d3018	 ldr         r3, [sp, #0x18]
  002a4	e283001c	 add         r0, r3, #0x1C
  002a8	eb000000	 bl          |?RegisterBusPowerCallbacks@@YAHPBG@Z|
  002ac	ea000059	 b           |$LN6@ProcessMsg|

; 203  :                         goto cleanUp;

  002b0	ea000058	 b           |$cleanUp$34485|
  002b4		 |$LN5@ProcessMsg|

; 204  : 
; 205  :                     default:
; 206  :                         goto cleanUp;

  002b4	ea000057	 b           |$LN4@ProcessMsg|
  002b8	ea000056	 b           |$cleanUp$34485|
  002bc		 |$LN10@ProcessMsg|

; 207  :                     }
; 208  : 
; 209  :                 pDevice->Initialize(pDevDetail->szName);

  002bc	e59d3018	 ldr         r3, [sp, #0x18]
  002c0	e283101c	 add         r1, r3, #0x1C
  002c4	e59d3008	 ldr         r3, [sp, #8]
  002c8	e5933000	 ldr         r3, [r3]
  002cc	e2833008	 add         r3, r3, #8
  002d0	e59d0008	 ldr         r0, [sp, #8]
  002d4	e5933000	 ldr         r3, [r3]
  002d8	e1a0e00f	 mov         lr, pc
  002dc	e12fff13	 bx          r3

; 210  :                 if (s_Device.pDeviceMediator->InsertDevice((LPCTSTR)pDevDetail->szName, pDevice) == FALSE)

  002e0	e59d2008	 ldr         r2, [sp, #8]
  002e4	e59d3018	 ldr         r3, [sp, #0x18]
  002e8	e283101c	 add         r1, r3, #0x1C
  002ec	e59f3144	 ldr         r3, [pc, #0x144]
  002f0	e5930010	 ldr         r0, [r3, #0x10]
  002f4	eb000000	 bl          |?InsertDevice@DeviceMediator@@QAAHPBGPAVDeviceBase@@@Z|
  002f8	e58d03cc	 str         r0, [sp, #0x3CC]
  002fc	e59d33cc	 ldr         r3, [sp, #0x3CC]
  00300	e3530000	 cmp         r3, #0
  00304	1a00001a	 bne         |$LN3@ProcessMsg|

; 211  :                     {
; 212  :                     pDevice->Uninitialize();

  00308	e59d3008	 ldr         r3, [sp, #8]
  0030c	e5933000	 ldr         r3, [r3]
  00310	e2833004	 add         r3, r3, #4
  00314	e59d0008	 ldr         r0, [sp, #8]
  00318	e5933000	 ldr         r3, [r3]
  0031c	e1a0e00f	 mov         lr, pc
  00320	e12fff13	 bx          r3

; 213  :                     delete pDevice;

  00324	e59d3008	 ldr         r3, [sp, #8]
  00328	e58d338c	 str         r3, [sp, #0x38C]
  0032c	e59d338c	 ldr         r3, [sp, #0x38C]
  00330	e58d3388	 str         r3, [sp, #0x388]
  00334	e59d3388	 ldr         r3, [sp, #0x388]
  00338	e3530000	 cmp         r3, #0
  0033c	0a00000a	 beq         |$LN23@ProcessMsg|
  00340	e3a01001	 mov         r1, #1
  00344	e59d3388	 ldr         r3, [sp, #0x388]
  00348	e5933000	 ldr         r3, [r3]
  0034c	e59d0388	 ldr         r0, [sp, #0x388]
  00350	e5933000	 ldr         r3, [r3]
  00354	e1a0e00f	 mov         lr, pc
  00358	e12fff13	 bx          r3
  0035c	e58d03d0	 str         r0, [sp, #0x3D0]
  00360	e59d33d0	 ldr         r3, [sp, #0x3D0]
  00364	e58d33d4	 str         r3, [sp, #0x3D4]
  00368	ea000001	 b           |$LN24@ProcessMsg|
  0036c		 |$LN23@ProcessMsg|
  0036c	e3a03000	 mov         r3, #0
  00370	e58d33d4	 str         r3, [sp, #0x3D4]
  00374		 |$LN24@ProcessMsg|
  00374		 |$LN3@ProcessMsg|
  00374		 |$LN12@ProcessMsg|

; 214  :                     }
; 215  :                 }
; 216  :             }
; 217  :         else 

  00374	ea000025	 b           |$LN2@ProcessMsg|
  00378		 |$LN13@ProcessMsg|

; 218  :             {
; 219  :             // detach
; 220  :             //
; 221  :             pDevice = s_Device.pDeviceMediator->RemoveDevice((LPCTSTR)pDevDetail->szName);

  00378	e59d3018	 ldr         r3, [sp, #0x18]
  0037c	e283101c	 add         r1, r3, #0x1C
  00380	e59f30b0	 ldr         r3, [pc, #0xB0]
  00384	e5930010	 ldr         r0, [r3, #0x10]
  00388	eb000000	 bl          |?RemoveDevice@DeviceMediator@@QAAPAVDeviceBase@@PBG@Z|
  0038c	e58d03d8	 str         r0, [sp, #0x3D8]
  00390	e59d33d8	 ldr         r3, [sp, #0x3D8]
  00394	e58d3008	 str         r3, [sp, #8]

; 222  :             if (pDevice != NULL)

  00398	e59d3008	 ldr         r3, [sp, #8]
  0039c	e3530000	 cmp         r3, #0
  003a0	0a00001a	 beq         |$LN1@ProcessMsg|

; 223  :                 {
; 224  :                 pDevice->Uninitialize();

  003a4	e59d3008	 ldr         r3, [sp, #8]
  003a8	e5933000	 ldr         r3, [r3]
  003ac	e2833004	 add         r3, r3, #4
  003b0	e59d0008	 ldr         r0, [sp, #8]
  003b4	e5933000	 ldr         r3, [r3]
  003b8	e1a0e00f	 mov         lr, pc
  003bc	e12fff13	 bx          r3

; 225  :                 delete pDevice;

  003c0	e59d3008	 ldr         r3, [sp, #8]
  003c4	e58d3394	 str         r3, [sp, #0x394]
  003c8	e59d3394	 ldr         r3, [sp, #0x394]
  003cc	e58d3390	 str         r3, [sp, #0x390]
  003d0	e59d3390	 ldr         r3, [sp, #0x390]
  003d4	e3530000	 cmp         r3, #0
  003d8	0a00000a	 beq         |$LN25@ProcessMsg|
  003dc	e3a01001	 mov         r1, #1
  003e0	e59d3390	 ldr         r3, [sp, #0x390]
  003e4	e5933000	 ldr         r3, [r3]
  003e8	e59d0390	 ldr         r0, [sp, #0x390]
  003ec	e5933000	 ldr         r3, [r3]
  003f0	e1a0e00f	 mov         lr, pc
  003f4	e12fff13	 bx          r3
  003f8	e58d03dc	 str         r0, [sp, #0x3DC]
  003fc	e59d33dc	 ldr         r3, [sp, #0x3DC]
  00400	e58d33e0	 str         r3, [sp, #0x3E0]
  00404	ea000001	 b           |$LN26@ProcessMsg|
  00408		 |$LN25@ProcessMsg|
  00408	e3a03000	 mov         r3, #0
  0040c	e58d33e0	 str         r3, [sp, #0x3E0]
  00410		 |$LN26@ProcessMsg|
  00410		 |$LN1@ProcessMsg|
  00410		 |$LN2@ProcessMsg|
  00410		 |$LN16@ProcessMsg|

; 226  :                 }
; 227  :             }
; 228  :         }
; 229  : 
; 230  :     rc = TRUE;

  00410	e3a03001	 mov         r3, #1
  00414	e58d300c	 str         r3, [sp, #0xC]
  00418		 |$LN4@ProcessMsg|
  00418		 |$LN6@ProcessMsg|
  00418		 |$LN14@ProcessMsg|
  00418		 |$cleanUp$34485|

; 231  :     
; 232  : cleanUp:    
; 233  :     return rc;

  00418	e59d0398	 ldr         r0, [sp, #0x398]
  0041c	eb000000	 bl          __security_check_cookie
  00420	e59d300c	 ldr         r3, [sp, #0xC]
  00424	e58d33a4	 str         r3, [sp, #0x3A4]

; 234  : }

  00428	e59d03a4	 ldr         r0, [sp, #0x3A4]
  0042c	e28ddff9	 add         sp, sp, #0xF9, 30
  00430	e89d6000	 ldmia       sp, {sp, lr}
  00434	e12fff1e	 bx          lr
  00438		 |$LN30@ProcessMsg|
  00438		 |$LN31@ProcessMsg|
  00438	00000000	 DCD         |s_Device|
  0043c		 |$LN32@ProcessMsg|
  0043c	00000000	 DCD         |__security_cookie|
  00440		 |$M34716|

			 ENDP  ; |?ProcessMsgQueueSignal@@YAHHPAXK@Z|, ProcessMsgQueueSignal

	EXPORT	|??_7StreamDevice@@6B@| [ DATA ]	; StreamDevice::`vftable'
	EXPORT	|??0DeviceBase@@QAA@XZ|			; DeviceBase::DeviceBase
	EXPORT	|?Uninitialize@StreamDevice@@UAAHXZ|	; StreamDevice::Uninitialize
	EXPORT	|?Initialize@StreamDevice@@UAAHPBG@Z|	; StreamDevice::Initialize
	EXPORT	|?SendIoControl@StreamDevice@@UAAHKPAXK0KPAK@Z| ; StreamDevice::SendIoControl
	IMPORT	|??_EStreamDevice@@UAAPAXI@Z|, WEAK |??_GStreamDevice@@UAAPAXI@Z| ; StreamDevice::`vector deleting destructor', StreamDevice::`scalar deleting destructor'
; File c:\wince600\platform\common\src\soc\common_ti_v1\common_ti\pm\devicemediator\streamdevice.h

  00000			 AREA	 |.pdata|, PDATA
|$T34727| DCD	|$LN5@StreamDevi|
	DCD	0x40001104

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_7StreamDevice@@6B@| DCD |??_EStreamDevice@@UAAPAXI@Z| ; StreamDevice::`vftable'
	DCD	|?Uninitialize@StreamDevice@@UAAHXZ|
	DCD	|?Initialize@StreamDevice@@UAAHPBG@Z|
	DCD	|?SendIoControl@StreamDevice@@UAAHKPAXK0KPAK@Z|
; Function compile flags: /Odtp

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |??0StreamDevice@@QAA@XZ| PROC		; StreamDevice::StreamDevice

; 46   :         {

  00000		 |$LN5@StreamDevi|
  00000	e1a0c00d	 mov         r12, sp
  00004	e92d0001	 stmdb       sp!, {r0}
  00008	e92d5000	 stmdb       sp!, {r12, lr}
  0000c	e24dd008	 sub         sp, sp, #8
  00010		 |$M34724|
  00010	e59d0010	 ldr         r0, [sp, #0x10]
  00014	eb000000	 bl          |??0DeviceBase@@QAA@XZ|
  00018	e58d0004	 str         r0, [sp, #4]
  0001c	e59f201c	 ldr         r2, [pc, #0x1C]
  00020	e59d3010	 ldr         r3, [sp, #0x10]
  00024	e5832000	 str         r2, [r3]

; 47   :         }

  00028	e59d3010	 ldr         r3, [sp, #0x10]
  0002c	e58d3000	 str         r3, [sp]
  00030	e59d0000	 ldr         r0, [sp]
  00034	e28dd008	 add         sp, sp, #8
  00038	e89d6000	 ldmia       sp, {sp, lr}
  0003c	e12fff1e	 bx          lr
  00040		 |$LN6@StreamDevi|
  00040		 |$LN7@StreamDevi|
  00040	00000000	 DCD         |??_7StreamDevice@@6B@|
  00044		 |$M34725|

			 ENDP  ; |??0StreamDevice@@QAA@XZ|, StreamDevice::StreamDevice

	EXPORT	|??_7DeviceBase@@6B@| [ DATA ]		; DeviceBase::`vftable'
	EXPORT	|?Uninitialize@DeviceBase@@UAAHXZ|	; DeviceBase::Uninitialize
	EXPORT	|?Initialize@DeviceBase@@UAAHPBG@Z|	; DeviceBase::Initialize
	IMPORT	|??_EDeviceBase@@UAAPAXI@Z|, WEAK |??_GDeviceBase@@UAAPAXI@Z| ; DeviceBase::`vector deleting destructor', DeviceBase::`scalar deleting destructor'
	IMPORT	|_purecall|
; File c:\wince600\platform\common\src\soc\common_ti_v1\common_ti\pm\devicemediator\devicebase.h

  00000			 AREA	 |.pdata|, PDATA
|$T34737| DCD	|$LN5@DeviceBase|
	DCD	0x40001604

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_7DeviceBase@@6B@| DCD |??_EDeviceBase@@UAAPAXI@Z|	; DeviceBase::`vftable'
	DCD	|?Uninitialize@DeviceBase@@UAAHXZ|
	DCD	|?Initialize@DeviceBase@@UAAHPBG@Z|
	DCD	|_purecall|
; Function compile flags: /Odtp

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |??0DeviceBase@@QAA@XZ| PROC		; DeviceBase::DeviceBase

; 52   :         {

  00000		 |$LN5@DeviceBase|
  00000	e1a0c00d	 mov         r12, sp
  00004	e92d0001	 stmdb       sp!, {r0}
  00008	e92d5000	 stmdb       sp!, {r12, lr}
  0000c	e24dd004	 sub         sp, sp, #4
  00010		 |$M34734|
  00010	e59f203c	 ldr         r2, [pc, #0x3C]
  00014	e59d300c	 ldr         r3, [sp, #0xC]
  00018	e5832000	 str         r2, [r3]
  0001c	e59d300c	 ldr         r3, [sp, #0xC]
  00020	e283200c	 add         r2, r3, #0xC
  00024	e3a03000	 mov         r3, #0
  00028	e5823000	 str         r3, [r2]

; 53   :         m_szDeviceName[0] = NULL;

  0002c	e59d300c	 ldr         r3, [sp, #0xC]
  00030	e2832010	 add         r2, r3, #0x10
  00034	e3a03000	 mov         r3, #0
  00038	e1c230b0	 strh        r3, [r2]

; 54   :         }

  0003c	e59d300c	 ldr         r3, [sp, #0xC]
  00040	e58d3000	 str         r3, [sp]
  00044	e59d0000	 ldr         r0, [sp]
  00048	e28dd004	 add         sp, sp, #4
  0004c	e89d6000	 ldmia       sp, {sp, lr}
  00050	e12fff1e	 bx          lr
  00054		 |$LN6@DeviceBase|
  00054		 |$LN7@DeviceBase|
  00054	00000000	 DCD         |??_7DeviceBase@@6B@|
  00058		 |$M34735|

			 ENDP  ; |??0DeviceBase@@QAA@XZ|, DeviceBase::DeviceBase


  00000			 AREA	 |.pdata|, PDATA
|$T34747| DCD	|$LN5@Uninitiali|
	DCD	0x40000a04
; Function compile flags: /Odtp

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |?Uninitialize@DeviceBase@@UAAHXZ| PROC ; DeviceBase::Uninitialize

; 90   :         {

  00000		 |$LN5@Uninitiali|
  00000	e1a0c00d	 mov         r12, sp
  00004	e92d0001	 stmdb       sp!, {r0}
  00008	e92d5000	 stmdb       sp!, {r12, lr}
  0000c	e24dd004	 sub         sp, sp, #4
  00010		 |$M34744|

; 91   :         return TRUE;

  00010	e3a03001	 mov         r3, #1
  00014	e58d3000	 str         r3, [sp]

; 92   :         }

  00018	e59d0000	 ldr         r0, [sp]
  0001c	e28dd004	 add         sp, sp, #4
  00020	e89d6000	 ldmia       sp, {sp, lr}
  00024	e12fff1e	 bx          lr
  00028		 |$M34745|

			 ENDP  ; |?Uninitialize@DeviceBase@@UAAHXZ|, DeviceBase::Uninitialize

	IMPORT	|wcscpy|
	IMPORT	|wcslen|

  00000			 AREA	 |.pdata|, PDATA
|$T34755| DCD	|$LN6@Initialize|
	DCD	0x40001704
; Function compile flags: /Odtp

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |?Initialize@DeviceBase@@UAAHPBG@Z| PROC ; DeviceBase::Initialize

; 95   :         {

  00000		 |$LN6@Initialize|
  00000	e1a0c00d	 mov         r12, sp
  00004	e92d0003	 stmdb       sp!, {r0, r1}
  00008	e92d5000	 stmdb       sp!, {r12, lr}
  0000c	e24dd008	 sub         sp, sp, #8
  00010		 |$M34752|

; 96   :         if (_tcslen(szDeviceName) >= sizeof(m_szDeviceName) / sizeof(m_szDeviceName[0])) return FALSE;

  00010	e59d0014	 ldr         r0, [sp, #0x14]
  00014	eb000000	 bl          wcslen
  00018	e58d0004	 str         r0, [sp, #4]
  0001c	e59d3004	 ldr         r3, [sp, #4]
  00020	e3530080	 cmp         r3, #0x80
  00024	3a000002	 bcc         |$LN1@Initialize|
  00028	e3a03000	 mov         r3, #0
  0002c	e58d3000	 str         r3, [sp]
  00030	ea000005	 b           |$LN2@Initialize|
  00034		 |$LN1@Initialize|

; 97   :         _tcscpy(m_szDeviceName, szDeviceName);

  00034	e59d1014	 ldr         r1, [sp, #0x14]
  00038	e59d3010	 ldr         r3, [sp, #0x10]
  0003c	e2830010	 add         r0, r3, #0x10
  00040	eb000000	 bl          wcscpy

; 98   :         return TRUE;

  00044	e3a03001	 mov         r3, #1
  00048	e58d3000	 str         r3, [sp]
  0004c		 |$LN2@Initialize|

; 99   :         }

  0004c	e59d0000	 ldr         r0, [sp]
  00050	e28dd008	 add         sp, sp, #8
  00054	e89d6000	 ldmia       sp, {sp, lr}
  00058	e12fff1e	 bx          lr
  0005c		 |$M34753|

			 ENDP  ; |?Initialize@DeviceBase@@UAAHPBG@Z|, DeviceBase::Initialize

	EXPORT	|??1DeviceBase@@UAA@XZ|			; DeviceBase::~DeviceBase
	IMPORT	|??3@YAXPAX@Z|				; operator delete

  00000			 AREA	 |.pdata|, PDATA
|$T34763| DCD	|$LN6@scalar|
	DCD	0x40001104
; Function compile flags: /Odtp

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |??_GDeviceBase@@UAAPAXI@Z| PROC	; DeviceBase::`scalar deleting destructor'
  00000		 |$LN6@scalar|
  00000	e1a0c00d	 mov         r12, sp
  00004	e92d0003	 stmdb       sp!, {r0, r1}
  00008	e92d5000	 stmdb       sp!, {r12, lr}
  0000c	e24dd004	 sub         sp, sp, #4
  00010		 |$M34760|
  00010	e59d000c	 ldr         r0, [sp, #0xC]
  00014	eb000000	 bl          |??1DeviceBase@@UAA@XZ|
  00018	e59d3010	 ldr         r3, [sp, #0x10]
  0001c	e3130001	 tst         r3, #1
  00020	0a000001	 beq         |$LN1@scalar|
  00024	e59d000c	 ldr         r0, [sp, #0xC]
  00028	eb000000	 bl          |??3@YAXPAX@Z|
  0002c		 |$LN1@scalar|
  0002c	e59d300c	 ldr         r3, [sp, #0xC]
  00030	e58d3000	 str         r3, [sp]
  00034	e59d0000	 ldr         r0, [sp]
  00038	e28dd004	 add         sp, sp, #4
  0003c	e89d6000	 ldmia       sp, {sp, lr}
  00040	e12fff1e	 bx          lr
  00044		 |$M34761|

			 ENDP  ; |??_GDeviceBase@@UAAPAXI@Z|, DeviceBase::`scalar deleting destructor'


  00000			 AREA	 |.pdata|, PDATA
|$T34770| DCD	|$LN5@DeviceBase@2|
	DCD	0x40000903
; Function compile flags: /Odtp

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |??1DeviceBase@@UAA@XZ| PROC		; DeviceBase::~DeviceBase

; 57   :         {

  00000		 |$LN5@DeviceBase@2|
  00000	e1a0c00d	 mov         r12, sp
  00004	e92d0001	 stmdb       sp!, {r0}
  00008	e92d5000	 stmdb       sp!, {r12, lr}
  0000c		 |$M34767|
  0000c	e59f200c	 ldr         r2, [pc, #0xC]
  00010	e59d3008	 ldr         r3, [sp, #8]
  00014	e5832000	 str         r2, [r3]

; 58   :         };

  00018	e89d6000	 ldmia       sp, {sp, lr}
  0001c	e12fff1e	 bx          lr
  00020		 |$LN6@DeviceBase@2|
  00020		 |$LN7@DeviceBase@2|
  00020	00000000	 DCD         |??_7DeviceBase@@6B@|
  00024		 |$M34768|

			 ENDP  ; |??1DeviceBase@@UAA@XZ|, DeviceBase::~DeviceBase

; File c:\wince600\platform\common\src\soc\common_ti_v1\common_ti\pm\devicemediator\streamdevice.h

  00000			 AREA	 |.pdata|, PDATA
|$T34780| DCD	|$LN6@Uninitiali@2|
	DCD	0x40001904
; Function compile flags: /Odtp

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |?Uninitialize@StreamDevice@@UAAHXZ| PROC ; StreamDevice::Uninitialize

; 56   :         {

  00000		 |$LN6@Uninitiali@2|
  00000	e1a0c00d	 mov         r12, sp
  00004	e92d0001	 stmdb       sp!, {r0}
  00008	e92d5000	 stmdb       sp!, {r12, lr}
  0000c	e24dd004	 sub         sp, sp, #4
  00010		 |$M34777|

; 57   :         DeviceBase::Uninitialize();

  00010	e59d000c	 ldr         r0, [sp, #0xC]
  00014	eb000000	 bl          |?Uninitialize@DeviceBase@@UAAHXZ|

; 58   :         if (m_hDevice != NULL) 

  00018	e59d300c	 ldr         r3, [sp, #0xC]
  0001c	e283300c	 add         r3, r3, #0xC
  00020	e5933000	 ldr         r3, [r3]
  00024	e3530000	 cmp         r3, #0
  00028	0a000007	 beq         |$LN1@Uninitiali@2|

; 59   :             {
; 60   :             CloseHandle(m_hDevice);

  0002c	e59d300c	 ldr         r3, [sp, #0xC]
  00030	e283300c	 add         r3, r3, #0xC
  00034	e5930000	 ldr         r0, [r3]
  00038	eb000000	 bl          CloseHandle

; 61   :             m_hDevice = NULL;

  0003c	e59d300c	 ldr         r3, [sp, #0xC]
  00040	e283200c	 add         r2, r3, #0xC
  00044	e3a03000	 mov         r3, #0
  00048	e5823000	 str         r3, [r2]
  0004c		 |$LN1@Uninitiali@2|

; 62   :             }
; 63   :         return TRUE;

  0004c	e3a03001	 mov         r3, #1
  00050	e58d3000	 str         r3, [sp]

; 64   :         }

  00054	e59d0000	 ldr         r0, [sp]
  00058	e28dd004	 add         sp, sp, #4
  0005c	e89d6000	 ldmia       sp, {sp, lr}
  00060	e12fff1e	 bx          lr
  00064		 |$M34778|

			 ENDP  ; |?Uninitialize@StreamDevice@@UAAHXZ|, StreamDevice::Uninitialize


  00000			 AREA	 |.pdata|, PDATA
|$T34793| DCD	|$LN8@Initialize@2|
	DCD	0x40003204
; Function compile flags: /Odtp

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |?Initialize@StreamDevice@@UAAHPBG@Z| PROC ; StreamDevice::Initialize

; 68   :         {

  00000		 |$LN8@Initialize@2|
  00000	e1a0c00d	 mov         r12, sp
  00004	e92d0003	 stmdb       sp!, {r0, r1}
  00008	e92d5000	 stmdb       sp!, {r12, lr}
  0000c	e24dd024	 sub         sp, sp, #0x24
  00010		 |$M34790|

; 69   :         DeviceBase::Initialize(szDeviceName);

  00010	e59d1030	 ldr         r1, [sp, #0x30]
  00014	e59d002c	 ldr         r0, [sp, #0x2C]
  00018	eb000000	 bl          |?Initialize@DeviceBase@@UAAHPBG@Z|

; 70   :         m_hDevice = ::CreateFile(szDeviceName, GENERIC_EXECUTE, 
; 71   :                         DEVACCESS_PMEXT_MODE, NULL, 
; 72   :                         OPEN_EXISTING, 0, NULL
; 73   :                         );

  0001c	e3a03000	 mov         r3, #0
  00020	e58d3008	 str         r3, [sp, #8]
  00024	e3a03000	 mov         r3, #0
  00028	e58d3004	 str         r3, [sp, #4]
  0002c	e3a03003	 mov         r3, #3
  00030	e58d3000	 str         r3, [sp]
  00034	e3a03000	 mov         r3, #0
  00038	e3a02102	 mov         r2, #2, 2
  0003c	e3a01202	 mov         r1, #2, 4
  00040	e59d0030	 ldr         r0, [sp, #0x30]
  00044	eb000000	 bl          CreateFileW
  00048	e58d001c	 str         r0, [sp, #0x1C]
  0004c	e59d302c	 ldr         r3, [sp, #0x2C]
  00050	e283200c	 add         r2, r3, #0xC
  00054	e59d301c	 ldr         r3, [sp, #0x1C]
  00058	e5823000	 str         r3, [r2]

; 74   : 
; 75   :         if (m_hDevice == INVALID_HANDLE_VALUE)

  0005c	e59d302c	 ldr         r3, [sp, #0x2C]
  00060	e283300c	 add         r3, r3, #0xC
  00064	e5933000	 ldr         r3, [r3]
  00068	e3730001	 cmn         r3, #1
  0006c	1a000005	 bne         |$LN1@Initialize@2|

; 76   :             {
; 77   :             DeviceBase::Uninitialize();

  00070	e59d002c	 ldr         r0, [sp, #0x2C]
  00074	eb000000	 bl          |?Uninitialize@DeviceBase@@UAAHXZ|

; 78   :             m_hDevice = NULL;

  00078	e59d302c	 ldr         r3, [sp, #0x2C]
  0007c	e283200c	 add         r2, r3, #0xC
  00080	e3a03000	 mov         r3, #0
  00084	e5823000	 str         r3, [r2]
  00088		 |$LN1@Initialize@2|

; 79   :             }
; 80   :         
; 81   :         return m_hDevice != NULL;

  00088	e59d302c	 ldr         r3, [sp, #0x2C]
  0008c	e283300c	 add         r3, r3, #0xC
  00090	e5933000	 ldr         r3, [r3]
  00094	e3530000	 cmp         r3, #0
  00098	0a000002	 beq         |$LN4@Initialize@2|
  0009c	e3a03001	 mov         r3, #1
  000a0	e58d3020	 str         r3, [sp, #0x20]
  000a4	ea000001	 b           |$LN5@Initialize@2|
  000a8		 |$LN4@Initialize@2|
  000a8	e3a03000	 mov         r3, #0
  000ac	e58d3020	 str         r3, [sp, #0x20]
  000b0		 |$LN5@Initialize@2|
  000b0	e59d3020	 ldr         r3, [sp, #0x20]
  000b4	e58d3018	 str         r3, [sp, #0x18]

; 82   :         }

  000b8	e59d0018	 ldr         r0, [sp, #0x18]
  000bc	e28dd024	 add         sp, sp, #0x24
  000c0	e89d6000	 ldmia       sp, {sp, lr}
  000c4	e12fff1e	 bx          lr
  000c8		 |$M34791|

			 ENDP  ; |?Initialize@StreamDevice@@UAAHPBG@Z|, StreamDevice::Initialize

	IMPORT	|__C_specific_handler|

  00000			 AREA	 |.pdata|, PDATA
|$T34816| DCD	|$LN15@SendIoCont|
	DCD	0xc0002305

  00000			 AREA	 |.pdata|, PDATA
|$T34818| DCD	|$LN5@SendIoCont|
	DCD	0x40000502

  00000			 AREA	 |.xdata|, DATA
|$T34814| DCD	0x1
	DCD	|$LN9@SendIoCont|
	DCD	|$LN10@SendIoCont|
	DCD	|$LN5@SendIoCont|
	DCD	|$LN6@SendIoCont|
; Function compile flags: /Odtp

  00000			 AREA	 |.text|, CODE, ARM

  00000	00000000	 DCD         |__C_specific_handler|
  00004	00000000	 DCD         |$T34814|

  00008		 |?SendIoControl@StreamDevice@@UAAHKPAXK0KPAK@Z| PROC ; StreamDevice::SendIoControl

; 89   :         {

  00008		 |$LN15@SendIoCont|
  00008	e1a0c00d	 mov         r12, sp
  0000c	e92d000f	 stmdb       sp!, {r0 - r3}
  00010	e92d5800	 stmdb       sp!, {r11, r12, lr}
  00014	e28db00c	 add         r11, sp, #0xC
  00018	e24dd02c	 sub         sp, sp, #0x2C
  0001c		 |$LN13@SendIoCont|

; 90   :         BOOL rc = FALSE;

  0001c	e3a03000	 mov         r3, #0
  00020	e50b3028	 str         r3, [r11, #-0x28]
  00024		 |$LN9@SendIoCont|

; 91   :         __try 
; 92   :             {            
; 93   :             rc = DeviceIoControl(m_hDevice, dwIoControlCode, lpInBuf, 
; 94   :                     nInBufSize, lpOutBuf, nOutBufSize, lpBytesReturned, NULL
; 95   :                     );

  00024	e3a03000	 mov         r3, #0
  00028	e58d300c	 str         r3, [sp, #0xC]
  0002c	e59b3018	 ldr         r3, [r11, #0x18]
  00030	e58d3008	 str         r3, [sp, #8]
  00034	e59b3014	 ldr         r3, [r11, #0x14]
  00038	e58d3004	 str         r3, [sp, #4]
  0003c	e59b3010	 ldr         r3, [r11, #0x10]
  00040	e58d3000	 str         r3, [sp]
  00044	e59b300c	 ldr         r3, [r11, #0xC]
  00048	e59b2008	 ldr         r2, [r11, #8]
  0004c	e59b1004	 ldr         r1, [r11, #4]
  00050	e59b0000	 ldr         r0, [r11]
  00054	e280000c	 add         r0, r0, #0xC
  00058	e5900000	 ldr         r0, [r0]
  0005c	eb000000	 bl          DeviceIoControl
  00060	e50b0010	 str         r0, [r11, #-0x10]
  00064	e51b3010	 ldr         r3, [r11, #-0x10]
  00068	e50b3028	 str         r3, [r11, #-0x28]
  0006c		 |$LN10@SendIoCont|

; 96   :             }

  0006c	ea000002	 b           |$LN11@SendIoCont|
  00070		 |$LN6@SendIoCont|

; 98   :             {            
; 99   :             rc = FALSE;

  00070	e3a03000	 mov         r3, #0
  00074	e50b3028	 str         r3, [r11, #-0x28]
  00078	eaffffff	 b           |$LN11@SendIoCont|
  0007c		 |$LN11@SendIoCont|

; 100  :             }
; 101  :         return rc;

  0007c	e51b3028	 ldr         r3, [r11, #-0x28]
  00080	e50b3014	 str         r3, [r11, #-0x14]
  00084		 |$LN4@SendIoCont|

; 102  :         }

  00084	e51b0014	 ldr         r0, [r11, #-0x14]
  00088	e24bd00c	 sub         sp, r11, #0xC
  0008c	e89d6800	 ldmia       sp, {r11, sp, lr}
  00090	e12fff1e	 bx          lr

			 ENDP  ; |?SendIoControl@StreamDevice@@UAAHKPAXK0KPAK@Z|, StreamDevice::SendIoControl

  00094		 |$LN5@SendIoCont|
  00094		 |$LN14@SendIoCont|

; 97   :         __except(EXCEPTION_EXECUTE_HANDLER) 

  00094	e52de004	 str         lr, [sp, #-4]!
  00098	e24dd010	 sub         sp, sp, #0x10
  0009c		 |$LN8@SendIoCont|
  0009c		 |$LN17@SendIoCont|
  0009c	e3a00001	 mov         r0, #1
  000a0		 |$LN7@SendIoCont|
  000a0	e28dd010	 add         sp, sp, #0x10
  000a4	e49df004	 ldr         pc, [sp], #4
  000a8		 |$LN18@SendIoCont|
  000a8		 |$LN16@SendIoCont|
	EXPORT	|??1StreamDevice@@UAA@XZ|		; StreamDevice::~StreamDevice

  00000			 AREA	 |.pdata|, PDATA
|$T34830| DCD	|$LN6@scalar@2|
	DCD	0x40001104
; Function compile flags: /Odtp

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |??_GStreamDevice@@UAAPAXI@Z| PROC	; StreamDevice::`scalar deleting destructor'
  00000		 |$LN6@scalar@2|
  00000	e1a0c00d	 mov         r12, sp
  00004	e92d0003	 stmdb       sp!, {r0, r1}
  00008	e92d5000	 stmdb       sp!, {r12, lr}
  0000c	e24dd004	 sub         sp, sp, #4
  00010		 |$M34827|
  00010	e59d000c	 ldr         r0, [sp, #0xC]
  00014	eb000000	 bl          |??1StreamDevice@@UAA@XZ|
  00018	e59d3010	 ldr         r3, [sp, #0x10]
  0001c	e3130001	 tst         r3, #1
  00020	0a000001	 beq         |$LN1@scalar@2|
  00024	e59d000c	 ldr         r0, [sp, #0xC]
  00028	eb000000	 bl          |??3@YAXPAX@Z|
  0002c		 |$LN1@scalar@2|
  0002c	e59d300c	 ldr         r3, [sp, #0xC]
  00030	e58d3000	 str         r3, [sp]
  00034	e59d0000	 ldr         r0, [sp]
  00038	e28dd004	 add         sp, sp, #4
  0003c	e89d6000	 ldmia       sp, {sp, lr}
  00040	e12fff1e	 bx          lr
  00044		 |$M34828|

			 ENDP  ; |??_GStreamDevice@@UAAPAXI@Z|, StreamDevice::`scalar deleting destructor'


  00000			 AREA	 |.pdata|, PDATA
|$T34837| DCD	|$LN5@StreamDevi@2|
	DCD	0x40000703
; Function compile flags: /Odtp

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |??1StreamDevice@@UAA@XZ| PROC		; StreamDevice::~StreamDevice
  00000		 |$LN5@StreamDevi@2|
  00000	e1a0c00d	 mov         r12, sp
  00004	e92d0001	 stmdb       sp!, {r0}
  00008	e92d5000	 stmdb       sp!, {r12, lr}
  0000c		 |$M34834|
  0000c	e59d0008	 ldr         r0, [sp, #8]
  00010	eb000000	 bl          |??1DeviceBase@@UAA@XZ|
  00014	e89d6000	 ldmia       sp, {sp, lr}
  00018	e12fff1e	 bx          lr
  0001c		 |$M34835|

			 ENDP  ; |??1StreamDevice@@UAA@XZ|, StreamDevice::~StreamDevice

	EXPORT	|??_7DisplayDevice@@6B@| [ DATA ]	; DisplayDevice::`vftable'
	IMPORT	|??_EDisplayDevice@@UAAPAXI@Z|, WEAK |??_GDisplayDevice@@UAAPAXI@Z| ; DisplayDevice::`vector deleting destructor', DisplayDevice::`scalar deleting destructor'
	IMPORT	|?Uninitialize@DisplayDevice@@UAAHXZ|	; DisplayDevice::Uninitialize
	IMPORT	|?Initialize@DisplayDevice@@UAAHPBG@Z|	; DisplayDevice::Initialize
	IMPORT	|?SendIoControl@DisplayDevice@@UAAHKPAXK0KPAK@Z| ; DisplayDevice::SendIoControl
; File c:\wince600\platform\common\src\soc\common_ti_v1\common_ti\pm\devicemediator\displaydevice.h

  00000			 AREA	 |.pdata|, PDATA
|$T34845| DCD	|$LN5@DisplayDev|
	DCD	0x40001104

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_7DisplayDevice@@6B@| DCD |??_EDisplayDevice@@UAAPAXI@Z| ; DisplayDevice::`vftable'
	DCD	|?Uninitialize@DisplayDevice@@UAAHXZ|
	DCD	|?Initialize@DisplayDevice@@UAAHPBG@Z|
	DCD	|?SendIoControl@DisplayDevice@@UAAHKPAXK0KPAK@Z|
; Function compile flags: /Odtp

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |??0DisplayDevice@@QAA@XZ| PROC	; DisplayDevice::DisplayDevice

; 43   :         {

  00000		 |$LN5@DisplayDev|
  00000	e1a0c00d	 mov         r12, sp
  00004	e92d0001	 stmdb       sp!, {r0}
  00008	e92d5000	 stmdb       sp!, {r12, lr}
  0000c	e24dd008	 sub         sp, sp, #8
  00010		 |$M34842|
  00010	e59d0010	 ldr         r0, [sp, #0x10]
  00014	eb000000	 bl          |??0DeviceBase@@QAA@XZ|
  00018	e58d0004	 str         r0, [sp, #4]
  0001c	e59f201c	 ldr         r2, [pc, #0x1C]
  00020	e59d3010	 ldr         r3, [sp, #0x10]
  00024	e5832000	 str         r2, [r3]

; 44   :         }

  00028	e59d3010	 ldr         r3, [sp, #0x10]
  0002c	e58d3000	 str         r3, [sp]
  00030	e59d0000	 ldr         r0, [sp]
  00034	e28dd008	 add         sp, sp, #8
  00038	e89d6000	 ldmia       sp, {sp, lr}
  0003c	e12fff1e	 bx          lr
  00040		 |$LN6@DisplayDev|
  00040		 |$LN7@DisplayDev|
  00040	00000000	 DCD         |??_7DisplayDevice@@6B@|
  00044		 |$M34843|

			 ENDP  ; |??0DisplayDevice@@QAA@XZ|, DisplayDevice::DisplayDevice

	EXPORT	|??1DisplayDevice@@UAA@XZ|		; DisplayDevice::~DisplayDevice

  00000			 AREA	 |.pdata|, PDATA
|$T34855| DCD	|$LN6@scalar@3|
	DCD	0x40001104
; Function compile flags: /Odtp

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |??_GDisplayDevice@@UAAPAXI@Z| PROC	; DisplayDevice::`scalar deleting destructor'
  00000		 |$LN6@scalar@3|
  00000	e1a0c00d	 mov         r12, sp
  00004	e92d0003	 stmdb       sp!, {r0, r1}
  00008	e92d5000	 stmdb       sp!, {r12, lr}
  0000c	e24dd004	 sub         sp, sp, #4
  00010		 |$M34852|
  00010	e59d000c	 ldr         r0, [sp, #0xC]
  00014	eb000000	 bl          |??1DisplayDevice@@UAA@XZ|
  00018	e59d3010	 ldr         r3, [sp, #0x10]
  0001c	e3130001	 tst         r3, #1
  00020	0a000001	 beq         |$LN1@scalar@3|
  00024	e59d000c	 ldr         r0, [sp, #0xC]
  00028	eb000000	 bl          |??3@YAXPAX@Z|
  0002c		 |$LN1@scalar@3|
  0002c	e59d300c	 ldr         r3, [sp, #0xC]
  00030	e58d3000	 str         r3, [sp]
  00034	e59d0000	 ldr         r0, [sp]
  00038	e28dd004	 add         sp, sp, #4
  0003c	e89d6000	 ldmia       sp, {sp, lr}
  00040	e12fff1e	 bx          lr
  00044		 |$M34853|

			 ENDP  ; |??_GDisplayDevice@@UAAPAXI@Z|, DisplayDevice::`scalar deleting destructor'


  00000			 AREA	 |.pdata|, PDATA
|$T34862| DCD	|$LN5@DisplayDev@2|
	DCD	0x40000703
; Function compile flags: /Odtp

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |??1DisplayDevice@@UAA@XZ| PROC	; DisplayDevice::~DisplayDevice
  00000		 |$LN5@DisplayDev@2|
  00000	e1a0c00d	 mov         r12, sp
  00004	e92d0001	 stmdb       sp!, {r0}
  00008	e92d5000	 stmdb       sp!, {r12, lr}
  0000c		 |$M34859|
  0000c	e59d0008	 ldr         r0, [sp, #8]
  00010	eb000000	 bl          |??1DeviceBase@@UAA@XZ|
  00014	e89d6000	 ldmia       sp, {sp, lr}
  00018	e12fff1e	 bx          lr
  0001c		 |$M34860|

			 ENDP  ; |??1DisplayDevice@@UAA@XZ|, DisplayDevice::~DisplayDevice

	EXPORT	|GetCurrentThread|
	EXPORT	|?Device_ListenerThread@@YAKPAX@Z|	; Device_ListenerThread
	IMPORT	|CloseMsgQueue|
	IMPORT	|StopDeviceNotifications|
	IMPORT	|WaitForMultipleObjects|
	IMPORT	|RequestDeviceNotifications|
	IMPORT	|CreateMsgQueue|
	IMPORT	|CeSetThreadPriority|

  00010			 AREA	 |.pdata|, PDATA
|$T34871| DCD	|$LN24@Device_Lis|
	DCD	0x4000c104
; Function compile flags: /Odtp
; File c:\wince600\platform\common\src\soc\common_ti_v1\common_ti\pm\devicemediator\api.cpp

  00440			 AREA	 |.text|, CODE, ARM

  00440		 |?Device_ListenerThread@@YAKPAX@Z| PROC ; Device_ListenerThread

; 246  : {

  00440		 |$LN24@Device_Lis|
  00440	e1a0c00d	 mov         r12, sp
  00444	e92d0001	 stmdb       sp!, {r0}
  00448	e92d5000	 stmdb       sp!, {r12, lr}
  0044c	e24dd060	 sub         sp, sp, #0x60
  00450		 |$M34868|

; 247  :     int             idx;
; 248  :     DWORD           code;
; 249  :     MSGQUEUEOPTIONS msgOptions;
; 250  :     int             queueCount = 0;

  00450	e3a03000	 mov         r3, #0
  00454	e58d3048	 str         r3, [sp, #0x48]

; 251  :     HANDLE          rgAdvertiseClass[MAX_NOTIFY_INTERFACES];
; 252  :     HANDLE          rgMsgQueues[MAX_NOTIFY_INTERFACES + 1];
; 253  : 
; 254  :     UNREFERENCED_PARAMETER(pData);
; 255  : 
; 256  :     // Set thread priority
; 257  :     //
; 258  :     CeSetThreadPriority(GetCurrentThread(), s_Device.priority256);

  00458	eb000000	 bl          GetCurrentThread
  0045c	e58d0050	 str         r0, [sp, #0x50]
  00460	e59f32d8	 ldr         r3, [pc, #0x2D8]
  00464	e5931000	 ldr         r1, [r3]
  00468	e59d0050	 ldr         r0, [sp, #0x50]
  0046c	eb000000	 bl          CeSetThreadPriority

; 259  : 
; 260  :     // loop through and create the msgQueue's and register for 
; 261  :     // advertised interfaces
; 262  :     //
; 263  :     memset(&msgOptions, 0, sizeof(msgOptions));

  00470	e3a02014	 mov         r2, #0x14
  00474	e3a01000	 mov         r1, #0
  00478	e28d0000	 add         r0, sp, #0
  0047c	eb000000	 bl          memset

; 264  :     msgOptions.dwSize = sizeof(MSGQUEUEOPTIONS);

  00480	e3a03014	 mov         r3, #0x14
  00484	e58d3000	 str         r3, [sp]

; 265  :     msgOptions.dwFlags = 0;

  00488	e3a03000	 mov         r3, #0
  0048c	e58d3004	 str         r3, [sp, #4]

; 266  :     msgOptions.cbMaxMessage = PNP_QUEUE_SIZE;

  00490	e3a03e36	 mov         r3, #0x36, 28
  00494	e58d300c	 str         r3, [sp, #0xC]

; 267  :     msgOptions.bReadAccess = TRUE;

  00498	e3a03001	 mov         r3, #1
  0049c	e58d3010	 str         r3, [sp, #0x10]

; 268  :     memset(rgMsgQueues, 0, sizeof(HANDLE) * (MAX_NOTIFY_INTERFACES + 1));

  004a0	e3a02018	 mov         r2, #0x18
  004a4	e3a01000	 mov         r1, #0
  004a8	e28d0014	 add         r0, sp, #0x14
  004ac	eb000000	 bl          memset

; 269  :     memset(rgAdvertiseClass, 0, sizeof(HANDLE) * (MAX_NOTIFY_INTERFACES));    

  004b0	e3a02014	 mov         r2, #0x14
  004b4	e3a01000	 mov         r1, #0
  004b8	e28d0030	 add         r0, sp, #0x30
  004bc	eb000000	 bl          memset

; 270  :     
; 271  :     for (queueCount = 0; queueCount < MAX_NOTIFY_INTERFACES; ++queueCount)

  004c0	e3a03000	 mov         r3, #0
  004c4	e58d3048	 str         r3, [sp, #0x48]
  004c8	ea000002	 b           |$LN18@Device_Lis|
  004cc		 |$LN17@Device_Lis|
  004cc	e59d3048	 ldr         r3, [sp, #0x48]
  004d0	e2833001	 add         r3, r3, #1
  004d4	e58d3048	 str         r3, [sp, #0x48]
  004d8		 |$LN18@Device_Lis|
  004d8	e59d3048	 ldr         r3, [sp, #0x48]
  004dc	e3530005	 cmp         r3, #5
  004e0	aa00003f	 bge         |$LN16@Device_Lis|

; 272  :         {
; 273  :         if (s_rgAdvertisedInfo[queueCount].iid == -1) break;

  004e4	e59d1048	 ldr         r1, [sp, #0x48]
  004e8	e3a03008	 mov         r3, #8
  004ec	e0020391	 mul         r2, r1, r3
  004f0	e59f3244	 ldr         r3, [pc, #0x244]
  004f4	e0833002	 add         r3, r3, r2
  004f8	e5933000	 ldr         r3, [r3]
  004fc	e3730001	 cmn         r3, #1
  00500	1a000000	 bne         |$LN15@Device_Lis|
  00504	ea000036	 b           |$LN16@Device_Lis|
  00508		 |$LN15@Device_Lis|

; 274  : 
; 275  :         // Get handle to msg queues
; 276  :         //
; 277  :         rgMsgQueues[queueCount] = ::CreateMsgQueue(NULL, &msgOptions);

  00508	e28d1000	 add         r1, sp, #0
  0050c	e3a00000	 mov         r0, #0
  00510	eb000000	 bl          CreateMsgQueue
  00514	e58d0054	 str         r0, [sp, #0x54]
  00518	e59d1048	 ldr         r1, [sp, #0x48]
  0051c	e3a03004	 mov         r3, #4
  00520	e0020391	 mul         r2, r1, r3
  00524	e28d3014	 add         r3, sp, #0x14
  00528	e0832002	 add         r2, r3, r2
  0052c	e59d3054	 ldr         r3, [sp, #0x54]
  00530	e5823000	 str         r3, [r2]

; 278  :         if (rgMsgQueues[queueCount] == NULL)

  00534	e59d1048	 ldr         r1, [sp, #0x48]
  00538	e3a03004	 mov         r3, #4
  0053c	e0020391	 mul         r2, r1, r3
  00540	e28d3014	 add         r3, sp, #0x14
  00544	e0833002	 add         r3, r3, r2
  00548	e5933000	 ldr         r3, [r3]
  0054c	e3530000	 cmp         r3, #0
  00550	1a000001	 bne         |$LN14@Device_Lis|
  00554	ea000051	 b           |$LN13@Device_Lis|

; 279  :             {
; 280  :             goto cleanUp;

  00558	ea000050	 b           |$cleanUp$34533|
  0055c		 |$LN14@Device_Lis|

; 281  :             }
; 282  : 
; 283  :         // Get handle to advertised interfaces
; 284  :         rgAdvertiseClass[queueCount] = ::RequestDeviceNotifications(
; 285  :             s_rgAdvertisedInfo[queueCount].pguid, rgMsgQueues[queueCount],
; 286  :             TRUE
; 287  :             );

  0055c	e3a02001	 mov         r2, #1
  00560	e59d0048	 ldr         r0, [sp, #0x48]
  00564	e3a03004	 mov         r3, #4
  00568	e0010390	 mul         r1, r0, r3
  0056c	e28d3014	 add         r3, sp, #0x14
  00570	e0833001	 add         r3, r3, r1
  00574	e5931000	 ldr         r1, [r3]
  00578	e59de048	 ldr         lr, [sp, #0x48]
  0057c	e3a03008	 mov         r3, #8
  00580	e000039e	 mul         r0, lr, r3
  00584	e59f31b0	 ldr         r3, [pc, #0x1B0]
  00588	e0833000	 add         r3, r3, r0
  0058c	e2833004	 add         r3, r3, #4
  00590	e5930000	 ldr         r0, [r3]
  00594	eb000000	 bl          RequestDeviceNotifications
  00598	e58d0058	 str         r0, [sp, #0x58]
  0059c	e59d1048	 ldr         r1, [sp, #0x48]
  005a0	e3a03004	 mov         r3, #4
  005a4	e0020391	 mul         r2, r1, r3
  005a8	e28d3030	 add         r3, sp, #0x30
  005ac	e0832002	 add         r2, r3, r2
  005b0	e59d3058	 ldr         r3, [sp, #0x58]
  005b4	e5823000	 str         r3, [r2]

; 288  : 
; 289  :         if (rgAdvertiseClass[queueCount] == NULL)

  005b8	e59d1048	 ldr         r1, [sp, #0x48]
  005bc	e3a03004	 mov         r3, #4
  005c0	e0020391	 mul         r2, r1, r3
  005c4	e28d3030	 add         r3, sp, #0x30
  005c8	e0833002	 add         r3, r3, r2
  005cc	e5933000	 ldr         r3, [r3]
  005d0	e3530000	 cmp         r3, #0
  005d4	1a000001	 bne         |$LN12@Device_Lis|
  005d8	ea000030	 b           |$LN11@Device_Lis|

; 290  :             {
; 291  :             goto cleanUp;

  005dc	ea00002f	 b           |$cleanUp$34533|
  005e0		 |$LN12@Device_Lis|

; 292  :             }
; 293  :         }

  005e0	eaffffb9	 b           |$LN17@Device_Lis|
  005e4		 |$LN16@Device_Lis|

; 294  : 
; 295  :     // insert private event at end of array
; 296  :     //
; 297  :     rgMsgQueues[queueCount] = s_Device.hMsgSync;

  005e4	e59d1048	 ldr         r1, [sp, #0x48]
  005e8	e3a03004	 mov         r3, #4
  005ec	e0020391	 mul         r2, r1, r3
  005f0	e28d3014	 add         r3, sp, #0x14
  005f4	e0832002	 add         r2, r3, r2
  005f8	e59f3140	 ldr         r3, [pc, #0x140]
  005fc	e5933008	 ldr         r3, [r3, #8]
  00600	e5823000	 str         r3, [r2]
  00604		 |$LN21@Device_Lis|
  00604		 |$LN10@Device_Lis|

; 298  : 
; 299  :     // done with initialiation
; 300  :     //
; 301  :     for(;;)
; 302  :         {
; 303  :         code = ::WaitForMultipleObjects(queueCount + 1, rgMsgQueues, FALSE, INFINITE);

  00604	e3e03000	 mvn         r3, #0
  00608	e3a02000	 mov         r2, #0
  0060c	e28d1014	 add         r1, sp, #0x14
  00610	e59d0048	 ldr         r0, [sp, #0x48]
  00614	e2800001	 add         r0, r0, #1
  00618	eb000000	 bl          WaitForMultipleObjects
  0061c	e58d005c	 str         r0, [sp, #0x5C]
  00620	e59d305c	 ldr         r3, [sp, #0x5C]
  00624	e58d302c	 str         r3, [sp, #0x2C]

; 304  :         idx = code - WAIT_OBJECT_0;

  00628	e59d302c	 ldr         r3, [sp, #0x2C]
  0062c	e58d3044	 str         r3, [sp, #0x44]

; 305  :         if (idx < queueCount)

  00630	e59d2044	 ldr         r2, [sp, #0x44]
  00634	e59d3048	 ldr         r3, [sp, #0x48]
  00638	e1520003	 cmp         r2, r3
  0063c	aa00000f	 bge         |$LN8@Device_Lis|

; 306  :             {
; 307  :             ProcessMsgQueueSignal(idx, rgMsgQueues[idx], s_rgAdvertisedInfo[idx].iid);

  00640	e59d1044	 ldr         r1, [sp, #0x44]
  00644	e3a03008	 mov         r3, #8
  00648	e0020391	 mul         r2, r1, r3
  0064c	e59f30e8	 ldr         r3, [pc, #0xE8]
  00650	e0833002	 add         r3, r3, r2
  00654	e5932000	 ldr         r2, [r3]
  00658	e59d0044	 ldr         r0, [sp, #0x44]
  0065c	e3a03004	 mov         r3, #4
  00660	e0010390	 mul         r1, r0, r3
  00664	e28d3014	 add         r3, sp, #0x14
  00668	e0833001	 add         r3, r3, r1
  0066c	e5931000	 ldr         r1, [r3]
  00670	e59d0044	 ldr         r0, [sp, #0x44]
  00674	eb000000	 bl          |?ProcessMsgQueueSignal@@YAHHPAXK@Z|
  00678	eaffffe1	 b           |$LN10@Device_Lis|

; 308  :             continue;

  0067c	ea000006	 b           |$LN7@Device_Lis|
  00680		 |$LN8@Device_Lis|

; 309  :             }
; 310  :         else if (idx == queueCount)

  00680	e59d2044	 ldr         r2, [sp, #0x44]
  00684	e59d3048	 ldr         r3, [sp, #0x48]
  00688	e1520003	 cmp         r2, r3
  0068c	1a000001	 bne         |$LN6@Device_Lis|

; 311  :             {
; 312  :             break;

  00690	ea000002	 b           |$LN9@Device_Lis|

; 313  :             }
; 314  :         else 

  00694	ea000000	 b           |$LN5@Device_Lis|
  00698		 |$LN6@Device_Lis|

; 315  :             {
; 316  :             continue;

  00698	eaffffd9	 b           |$LN21@Device_Lis|
  0069c		 |$LN5@Device_Lis|
  0069c		 |$LN7@Device_Lis|

; 317  :             }

  0069c	eaffffd8	 b           |$LN10@Device_Lis|
  006a0		 |$LN9@Device_Lis|
  006a0		 |$LN11@Device_Lis|
  006a0		 |$LN13@Device_Lis|
  006a0		 |$cleanUp$34533|

; 318  :         }
; 319  : 
; 320  : cleanUp:
; 321  : 
; 322  :     // free all allocated handles
; 323  :     //
; 324  :     for (idx = 0; idx < MAX_NOTIFY_INTERFACES; ++idx)

  006a0	e3a03000	 mov         r3, #0
  006a4	e58d3044	 str         r3, [sp, #0x44]
  006a8	ea000002	 b           |$LN4@Device_Lis|
  006ac		 |$LN3@Device_Lis|
  006ac	e59d3044	 ldr         r3, [sp, #0x44]
  006b0	e2833001	 add         r3, r3, #1
  006b4	e58d3044	 str         r3, [sp, #0x44]
  006b8		 |$LN4@Device_Lis|
  006b8	e59d3044	 ldr         r3, [sp, #0x44]
  006bc	e3530005	 cmp         r3, #5
  006c0	aa000017	 bge         |$LN2@Device_Lis|

; 325  :         {
; 326  :         if (rgAdvertiseClass[idx] == NULL)   break;

  006c4	e59d1044	 ldr         r1, [sp, #0x44]
  006c8	e3a03004	 mov         r3, #4
  006cc	e0020391	 mul         r2, r1, r3
  006d0	e28d3030	 add         r3, sp, #0x30
  006d4	e0833002	 add         r3, r3, r2
  006d8	e5933000	 ldr         r3, [r3]
  006dc	e3530000	 cmp         r3, #0
  006e0	1a000000	 bne         |$LN1@Device_Lis|
  006e4	ea00000e	 b           |$LN2@Device_Lis|
  006e8		 |$LN1@Device_Lis|

; 327  :         ::StopDeviceNotifications(rgAdvertiseClass[idx]);

  006e8	e59d1044	 ldr         r1, [sp, #0x44]
  006ec	e3a03004	 mov         r3, #4
  006f0	e0020391	 mul         r2, r1, r3
  006f4	e28d3030	 add         r3, sp, #0x30
  006f8	e0833002	 add         r3, r3, r2
  006fc	e5930000	 ldr         r0, [r3]
  00700	eb000000	 bl          StopDeviceNotifications

; 328  :         ::CloseMsgQueue(rgMsgQueues[idx]);

  00704	e59d1044	 ldr         r1, [sp, #0x44]
  00708	e3a03004	 mov         r3, #4
  0070c	e0020391	 mul         r2, r1, r3
  00710	e28d3014	 add         r3, sp, #0x14
  00714	e0833002	 add         r3, r3, r2
  00718	e5930000	 ldr         r0, [r3]
  0071c	eb000000	 bl          CloseMsgQueue

; 329  :         }  

  00720	eaffffe1	 b           |$LN3@Device_Lis|
  00724		 |$LN2@Device_Lis|

; 330  :     return 0;

  00724	e3a03000	 mov         r3, #0
  00728	e58d304c	 str         r3, [sp, #0x4C]

; 331  : }

  0072c	e59d004c	 ldr         r0, [sp, #0x4C]
  00730	e28dd060	 add         sp, sp, #0x60
  00734	e89d6000	 ldmia       sp, {sp, lr}
  00738	e12fff1e	 bx          lr
  0073c		 |$LN25@Device_Lis|
  0073c		 |$LN26@Device_Lis|
  0073c	00000000	 DCD         |s_rgAdvertisedInfo|
  00740		 |$LN27@Device_Lis|
  00740	00000000	 DCD         |s_Device|
  00744		 |$M34869|

			 ENDP  ; |?Device_ListenerThread@@YAKPAX@Z|, Device_ListenerThread

; File c:\wince600\public\common\sdk\inc\kfuncs.h

  00000			 AREA	 |.pdata|, PDATA
|$T34880| DCD	|$LN5@GetCurrent|
	DCD	0x40000601
; Function compile flags: /Odtp

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |GetCurrentThread| PROC

; 351  : _inline HANDLE GetCurrentThread(void) {

  00000		 |$LN5@GetCurrent|
  00000	e24dd004	 sub         sp, sp, #4
  00004		 |$M34877|

; 352  : 	return ((HANDLE)(SH_CURTHREAD+SYS_HANDLE_BASE));

  00004	e3a03041	 mov         r3, #0x41
  00008	e58d3000	 str         r3, [sp]

; 353  : }

  0000c	e59d0000	 ldr         r0, [sp]
  00010	e28dd004	 add         sp, sp, #4
  00014	e12fff1e	 bx          lr
  00018		 |$M34878|

			 ENDP  ; |GetCurrentThread|

	EXPORT	|SetEvent|
	EXPORT	|?UninitializeDeviceMediator@@YAXK@Z|	; UninitializeDeviceMediator
	IMPORT	|?DeleteDeviceMediator@DeviceMediator@@SAXPAV1@@Z| ; DeviceMediator::DeleteDeviceMediator
	IMPORT	|WaitForSingleObject|

  00018			 AREA	 |.pdata|, PDATA
|$T34887| DCD	|$LN8@Uninitiali@3|
	DCD	0x40002e03
; Function compile flags: /Odtp
; File c:\wince600\platform\common\src\soc\common_ti_v1\common_ti\pm\devicemediator\api.cpp

  00744			 AREA	 |.text|, CODE, ARM

  00744		 |?UninitializeDeviceMediator@@YAXK@Z| PROC ; UninitializeDeviceMediator

; 343  : {

  00744		 |$LN8@Uninitiali@3|
  00744	e1a0c00d	 mov         r12, sp
  00748	e92d0001	 stmdb       sp!, {r0}
  0074c	e92d5000	 stmdb       sp!, {r12, lr}
  00750		 |$M34884|

; 344  :     UNREFERENCED_PARAMETER(dwExtContext);
; 345  : 
; 346  :     // wait for listener thread to shut-down
; 347  :     //
; 348  :     if (s_Device.hListenerThread != NULL)

  00750	e59f30a0	 ldr         r3, [pc, #0xA0]
  00754	e5933004	 ldr         r3, [r3, #4]
  00758	e3530000	 cmp         r3, #0
  0075c	0a00000f	 beq         |$LN3@Uninitiali@3|

; 349  :         {
; 350  :         // signal listner thread to shutdown
; 351  :         s_Device.bShutdown = TRUE;

  00760	e59f2090	 ldr         r2, [pc, #0x90]
  00764	e3a03001	 mov         r3, #1
  00768	e582300c	 str         r3, [r2, #0xC]

; 352  :         ::SetEvent(s_Device.hMsgSync);

  0076c	e59f3084	 ldr         r3, [pc, #0x84]
  00770	e5930008	 ldr         r0, [r3, #8]
  00774	eb000000	 bl          SetEvent

; 353  : 
; 354  :         // wait for thread to shutdown
; 355  :         ::WaitForSingleObject(s_Device.hListenerThread, INFINITE);        

  00778	e3e01000	 mvn         r1, #0
  0077c	e59f3074	 ldr         r3, [pc, #0x74]
  00780	e5930004	 ldr         r0, [r3, #4]
  00784	eb000000	 bl          WaitForSingleObject

; 356  :         ::CloseHandle(s_Device.hListenerThread);

  00788	e59f3068	 ldr         r3, [pc, #0x68]
  0078c	e5930004	 ldr         r0, [r3, #4]
  00790	eb000000	 bl          CloseHandle

; 357  :         s_Device.hListenerThread = NULL;

  00794	e59f205c	 ldr         r2, [pc, #0x5C]
  00798	e3a03000	 mov         r3, #0
  0079c	e5823004	 str         r3, [r2, #4]
  007a0		 |$LN3@Uninitiali@3|

; 358  :         }
; 359  : 
; 360  :     if (s_Device.pDeviceMediator != NULL)

  007a0	e59f3050	 ldr         r3, [pc, #0x50]
  007a4	e5933010	 ldr         r3, [r3, #0x10]
  007a8	e3530000	 cmp         r3, #0
  007ac	0a000005	 beq         |$LN2@Uninitiali@3|

; 361  :         {
; 362  :         DeviceMediator::DeleteDeviceMediator(s_Device.pDeviceMediator);

  007b0	e59f3040	 ldr         r3, [pc, #0x40]
  007b4	e5930010	 ldr         r0, [r3, #0x10]
  007b8	eb000000	 bl          |?DeleteDeviceMediator@DeviceMediator@@SAXPAV1@@Z|

; 363  :         s_Device.pDeviceMediator = NULL;

  007bc	e59f2034	 ldr         r2, [pc, #0x34]
  007c0	e3a03000	 mov         r3, #0
  007c4	e5823010	 str         r3, [r2, #0x10]
  007c8		 |$LN2@Uninitiali@3|

; 364  :         }
; 365  : 
; 366  :     if (s_Device.hMsgSync != NULL)

  007c8	e59f3028	 ldr         r3, [pc, #0x28]
  007cc	e5933008	 ldr         r3, [r3, #8]
  007d0	e3530000	 cmp         r3, #0
  007d4	0a000005	 beq         |$LN1@Uninitiali@3|

; 367  :         {
; 368  :         ::CloseHandle(s_Device.hMsgSync);

  007d8	e59f3018	 ldr         r3, [pc, #0x18]
  007dc	e5930008	 ldr         r0, [r3, #8]
  007e0	eb000000	 bl          CloseHandle

; 369  :         s_Device.hMsgSync = NULL;

  007e4	e59f200c	 ldr         r2, [pc, #0xC]
  007e8	e3a03000	 mov         r3, #0
  007ec	e5823008	 str         r3, [r2, #8]
  007f0		 |$LN1@Uninitiali@3|

; 370  :         }
; 371  : }

  007f0	e89d6000	 ldmia       sp, {sp, lr}
  007f4	e12fff1e	 bx          lr
  007f8		 |$LN9@Uninitiali@3|
  007f8		 |$LN10@Uninitiali@3|
  007f8	00000000	 DCD         |s_Device|
  007fc		 |$M34885|

			 ENDP  ; |?UninitializeDeviceMediator@@YAXK@Z|, UninitializeDeviceMediator

	IMPORT	|EventModify|
; File c:\wince600\public\common\sdk\inc\kfuncs.h

  00000			 AREA	 |.pdata|, PDATA
|$T34895| DCD	|$LN5@SetEvent|
	DCD	0x40000e04
; Function compile flags: /Odtp

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |SetEvent| PROC

; 235  : _inline BOOL SetEvent(HANDLE h) {

  00000		 |$LN5@SetEvent|
  00000	e1a0c00d	 mov         r12, sp
  00004	e92d0001	 stmdb       sp!, {r0}
  00008	e92d5000	 stmdb       sp!, {r12, lr}
  0000c	e24dd008	 sub         sp, sp, #8
  00010		 |$M34892|

; 236  : 	return EventModify(h,EVENT_SET);

  00010	e3a01003	 mov         r1, #3
  00014	e59d0010	 ldr         r0, [sp, #0x10]
  00018	eb000000	 bl          EventModify
  0001c	e58d0004	 str         r0, [sp, #4]
  00020	e59d3004	 ldr         r3, [sp, #4]
  00024	e58d3000	 str         r3, [sp]

; 237  : }

  00028	e59d0000	 ldr         r0, [sp]
  0002c	e28dd008	 add         sp, sp, #8
  00030	e89d6000	 ldmia       sp, {sp, lr}
  00034	e12fff1e	 bx          lr
  00038		 |$M34893|

			 ENDP  ; |SetEvent|

	EXPORT	|??1CRegistryEdit@@QAA@XZ|		; CRegistryEdit::~CRegistryEdit
	EXPORT	|?RegQueryValueExW@CRegistryEdit@@QAAHPBGPAKPAE1@Z| ; CRegistryEdit::RegQueryValueExW
	EXPORT	|??_C@_1BI@OJGHJKJA@?$AAp?$AAr?$AAi?$AAo?$AAr?$AAi?$AAt?$AAy?$AA2?$AA5?$AA6?$AA?$AA@| [ DATA ] ; `string'
	EXPORT	|??0CRegistryEdit@@QAA@PAUHKEY__@@PBG@Z| ; CRegistryEdit::CRegistryEdit
	EXPORT	|?InitializeDeviceMediator@@YAKPAUHKEY__@@PBG@Z| ; InitializeDeviceMediator
	IMPORT	|CreateThread|
	IMPORT	|?CreateDeviceMediator@DeviceMediator@@SAPAV1@XZ| ; DeviceMediator::CreateDeviceMediator
	IMPORT	|CreateEventW|

  00020			 AREA	 |.pdata|, PDATA
|$T34907| DCD	|$LN13@Initialize@3|
	DCD	0x40005f04
; File c:\wince600\platform\common\src\soc\common_ti_v1\common_ti\pm\devicemediator\api.cpp

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1BI@OJGHJKJA@?$AAp?$AAr?$AAi?$AAo?$AAr?$AAi?$AAt?$AAy?$AA2?$AA5?$AA6?$AA?$AA@| DCB "p"
	DCB	0x0, "r", 0x0, "i", 0x0, "o", 0x0, "r", 0x0, "i", 0x0, "t"
	DCB	0x0, "y", 0x0, "2", 0x0, "5", 0x0, "6", 0x0, 0x0, 0x0 ; `string'
; Function compile flags: /Odtp

  007fc			 AREA	 |.text|, CODE, ARM

  007fc		 |?InitializeDeviceMediator@@YAKPAUHKEY__@@PBG@Z| PROC ; InitializeDeviceMediator

; 384  : {    

  007fc		 |$LN13@Initialize@3|
  007fc	e1a0c00d	 mov         r12, sp
  00800	e92d0003	 stmdb       sp!, {r0, r1}
  00804	e92d5000	 stmdb       sp!, {r12, lr}
  00808	e24dd040	 sub         sp, sp, #0x40
  0080c		 |$M34904|

; 385  :     DWORD rc = FALSE;

  0080c	e3a03000	 mov         r3, #0
  00810	e58d300c	 str         r3, [sp, #0xC]

; 386  :     CRegistryEdit Registry(hKey, lpRegistryPath);

  00814	e59d204c	 ldr         r2, [sp, #0x4C]
  00818	e59d1048	 ldr         r1, [sp, #0x48]
  0081c	e28d0014	 add         r0, sp, #0x14
  00820	eb000000	 bl          |??0CRegistryEdit@@QAA@PAUHKEY__@@PBG@Z|
  00824	e58d002c	 str         r0, [sp, #0x2C]

; 387  :     memset(&s_Device, 0, sizeof(Device_t));

  00828	e3a02014	 mov         r2, #0x14
  0082c	e3a01000	 mov         r1, #0
  00830	e59f0134	 ldr         r0, [pc, #0x134]
  00834	eb000000	 bl          memset

; 388  : 
; 389  :     // Read device parameters
; 390  :     DWORD dwType = REG_DWORD;

  00838	e3a03004	 mov         r3, #4
  0083c	e58d3008	 str         r3, [sp, #8]

; 391  :     DWORD dwSize = sizeof(s_Device.priority256);

  00840	e3a03004	 mov         r3, #4
  00844	e58d3010	 str         r3, [sp, #0x10]

; 392  :     if (FALSE == Registry.RegQueryValueEx(PNP_THREAD_PRIORITY,
; 393  :             &dwType, (BYTE*)&s_Device.priority256, &dwSize))

  00848	e28d3010	 add         r3, sp, #0x10
  0084c	e58d3000	 str         r3, [sp]
  00850	e59f3114	 ldr         r3, [pc, #0x114]
  00854	e28d2008	 add         r2, sp, #8
  00858	e59f1114	 ldr         r1, [pc, #0x114]
  0085c	e28d0014	 add         r0, sp, #0x14
  00860	eb000000	 bl          |?RegQueryValueExW@CRegistryEdit@@QAAHPBGPAKPAE1@Z|
  00864	e58d0030	 str         r0, [sp, #0x30]
  00868	e59d3030	 ldr         r3, [sp, #0x30]
  0086c	e3530000	 cmp         r3, #0
  00870	1a000002	 bne         |$LN8@Initialize@3|

; 394  :         {
; 395  :         s_Device.priority256 = PNP_DEFAULT_THREAD_PRIORITY;

  00874	e59f20f0	 ldr         r2, [pc, #0xF0]
  00878	e3a03060	 mov         r3, #0x60
  0087c	e5823000	 str         r3, [r2]
  00880		 |$LN8@Initialize@3|

; 396  :         }            
; 397  : 
; 398  :     // Setup event handle to signal listener thread
; 399  :     s_Device.hMsgSync = ::CreateEvent(NULL, FALSE, FALSE, NULL);

  00880	e3a03000	 mov         r3, #0
  00884	e3a02000	 mov         r2, #0
  00888	e3a01000	 mov         r1, #0
  0088c	e3a00000	 mov         r0, #0
  00890	eb000000	 bl          CreateEventW
  00894	e58d0034	 str         r0, [sp, #0x34]
  00898	e59d2034	 ldr         r2, [sp, #0x34]
  0089c	e59f30c8	 ldr         r3, [pc, #0xC8]
  008a0	e5832008	 str         r2, [r3, #8]

; 400  :     if (s_Device.hMsgSync == NULL)

  008a4	e59f30c0	 ldr         r3, [pc, #0xC0]
  008a8	e5933008	 ldr         r3, [r3, #8]
  008ac	e3530000	 cmp         r3, #0
  008b0	1a000000	 bne         |$LN7@Initialize@3|

; 401  :         {
; 402  :         goto cleanUp;

  008b4	ea00001d	 b           |$cleanUp$34567|
  008b8		 |$LN7@Initialize@3|

; 403  :         }
; 404  : 
; 405  :     // Instantiate Device mediator object
; 406  :     s_Device.pDeviceMediator = DeviceMediator::CreateDeviceMediator();

  008b8	eb000000	 bl          |?CreateDeviceMediator@DeviceMediator@@SAPAV1@XZ|
  008bc	e58d0038	 str         r0, [sp, #0x38]
  008c0	e59d2038	 ldr         r2, [sp, #0x38]
  008c4	e59f30a0	 ldr         r3, [pc, #0xA0]
  008c8	e5832010	 str         r2, [r3, #0x10]

; 407  :     if (s_Device.pDeviceMediator == NULL)

  008cc	e59f3098	 ldr         r3, [pc, #0x98]
  008d0	e5933010	 ldr         r3, [r3, #0x10]
  008d4	e3530000	 cmp         r3, #0
  008d8	1a000000	 bne         |$LN5@Initialize@3|

; 408  :         {
; 409  :         goto cleanUp;

  008dc	ea000013	 b           |$cleanUp$34567|
  008e0		 |$LN5@Initialize@3|

; 410  :         }
; 411  : 
; 412  :     // Listener thread
; 413  :     s_Device.hListenerThread = ::CreateThread(NULL, 0, 
; 414  :         Device_ListenerThread, NULL, 0, NULL
; 415  :         );

  008e0	e3a03000	 mov         r3, #0
  008e4	e58d3004	 str         r3, [sp, #4]
  008e8	e3a03000	 mov         r3, #0
  008ec	e58d3000	 str         r3, [sp]
  008f0	e3a03000	 mov         r3, #0
  008f4	e59f2074	 ldr         r2, [pc, #0x74]
  008f8	e3a01000	 mov         r1, #0
  008fc	e3a00000	 mov         r0, #0
  00900	eb000000	 bl          CreateThread
  00904	e58d003c	 str         r0, [sp, #0x3C]
  00908	e59d203c	 ldr         r2, [sp, #0x3C]
  0090c	e59f3058	 ldr         r3, [pc, #0x58]
  00910	e5832004	 str         r2, [r3, #4]

; 416  :     
; 417  :     if (s_Device.hListenerThread == NULL) 

  00914	e59f3050	 ldr         r3, [pc, #0x50]
  00918	e5933004	 ldr         r3, [r3, #4]
  0091c	e3530000	 cmp         r3, #0
  00920	1a000000	 bne         |$LN3@Initialize@3|

; 418  :         {
; 419  :         goto cleanUp;

  00924	ea000001	 b           |$cleanUp$34567|
  00928		 |$LN3@Initialize@3|

; 420  :         }
; 421  : 
; 422  :     // indicate success by returning a reference to global
; 423  :     //
; 424  :     rc = TRUE;

  00928	e3a03001	 mov         r3, #1
  0092c	e58d300c	 str         r3, [sp, #0xC]
  00930		 |$cleanUp$34567|

; 425  : 
; 426  : cleanUp:
; 427  :     if (rc == FALSE) UninitializeDeviceMediator((DWORD)&s_Device);

  00930	e59d300c	 ldr         r3, [sp, #0xC]
  00934	e3530000	 cmp         r3, #0
  00938	1a000001	 bne         |$LN1@Initialize@3|
  0093c	e59f0028	 ldr         r0, [pc, #0x28]
  00940	eb000000	 bl          |?UninitializeDeviceMediator@@YAXK@Z|
  00944		 |$LN1@Initialize@3|

; 428  :     
; 429  :     return rc;

  00944	e59d300c	 ldr         r3, [sp, #0xC]
  00948	e58d3018	 str         r3, [sp, #0x18]
  0094c	e28d0014	 add         r0, sp, #0x14
  00950	eb000000	 bl          |??1CRegistryEdit@@QAA@XZ|
  00954	e59d3018	 ldr         r3, [sp, #0x18]
  00958	e58d3028	 str         r3, [sp, #0x28]

; 430  : }

  0095c	e59d0028	 ldr         r0, [sp, #0x28]
  00960	e28dd040	 add         sp, sp, #0x40
  00964	e89d6000	 ldmia       sp, {sp, lr}
  00968	e12fff1e	 bx          lr
  0096c		 |$LN14@Initialize@3|
  0096c		 |$LN15@Initialize@3|
  0096c	00000000	 DCD         |s_Device|
  00970		 |$LN16@Initialize@3|
  00970	00000000	 DCD         |?Device_ListenerThread@@YAKPAX@Z|
  00974		 |$LN17@Initialize@3|
  00974	00000000	 DCD         |??_C@_1BI@OJGHJKJA@?$AAp?$AAr?$AAi?$AAo?$AAr?$AAi?$AAt?$AAy?$AA2?$AA5?$AA6?$AA?$AA@|
  00978		 |$M34905|

			 ENDP  ; |?InitializeDeviceMediator@@YAKPAUHKEY__@@PBG@Z|, InitializeDeviceMediator

	IMPORT	|RegOpenKeyExW|
; File c:\wince600\public\common\oak\inc\cregedit.h

  00000			 AREA	 |.pdata|, PDATA
|$T34918| DCD	|$LN7@CRegistryE|
	DCD	0x40001e04
; Function compile flags: /Odtp

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |??0CRegistryEdit@@QAA@PAUHKEY__@@PBG@Z| PROC ; CRegistryEdit::CRegistryEdit

; 45   :     CRegistryEdit( HKEY hKey, LPCTSTR pszRegPath )

  00000		 |$LN7@CRegistryE|
  00000	e1a0c00d	 mov         r12, sp
  00004	e92d0007	 stmdb       sp!, {r0 - r2}
  00008	e92d5000	 stmdb       sp!, {r12, lr}
  0000c	e24dd010	 sub         sp, sp, #0x10
  00010		 |$M34915|

; 46   :     {
; 47   :         m_hDevKey = NULL;

  00010	e59d2018	 ldr         r2, [sp, #0x18]
  00014	e3a03000	 mov         r3, #0
  00018	e5823000	 str         r3, [r2]

; 48   :         if( pszRegPath )

  0001c	e59d3020	 ldr         r3, [sp, #0x20]
  00020	e3530000	 cmp         r3, #0
  00024	0a00000d	 beq         |$LN2@CRegistryE|

; 49   :         {
; 50   :             if( RegOpenKeyEx( hKey, pszRegPath, 0, 0, &m_hDevKey ) != ERROR_SUCCESS )

  00028	e59d3018	 ldr         r3, [sp, #0x18]
  0002c	e58d3000	 str         r3, [sp]
  00030	e3a03000	 mov         r3, #0
  00034	e3a02000	 mov         r2, #0
  00038	e59d1020	 ldr         r1, [sp, #0x20]
  0003c	e59d001c	 ldr         r0, [sp, #0x1C]
  00040	eb000000	 bl          RegOpenKeyExW
  00044	e58d000c	 str         r0, [sp, #0xC]
  00048	e59d300c	 ldr         r3, [sp, #0xC]
  0004c	e3530000	 cmp         r3, #0
  00050	0a000002	 beq         |$LN1@CRegistryE|

; 51   :             {
; 52   :                 m_hDevKey = NULL;

  00054	e59d2018	 ldr         r2, [sp, #0x18]
  00058	e3a03000	 mov         r3, #0
  0005c	e5823000	 str         r3, [r2]
  00060		 |$LN1@CRegistryE|
  00060		 |$LN2@CRegistryE|

; 53   :             }
; 54   :         }
; 55   :     }

  00060	e59d3018	 ldr         r3, [sp, #0x18]
  00064	e58d3008	 str         r3, [sp, #8]
  00068	e59d0008	 ldr         r0, [sp, #8]
  0006c	e28dd010	 add         sp, sp, #0x10
  00070	e89d6000	 ldmia       sp, {sp, lr}
  00074	e12fff1e	 bx          lr
  00078		 |$M34916|

			 ENDP  ; |??0CRegistryEdit@@QAA@PAUHKEY__@@PBG@Z|, CRegistryEdit::CRegistryEdit

	IMPORT	|RegCloseKey|

  00000			 AREA	 |.pdata|, PDATA
|$T34925| DCD	|$LN6@CRegistryE@2|
	DCD	0x40000c03
; Function compile flags: /Odtp

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |??1CRegistryEdit@@QAA@XZ| PROC	; CRegistryEdit::~CRegistryEdit

; 80   :     {

  00000		 |$LN6@CRegistryE@2|
  00000	e1a0c00d	 mov         r12, sp
  00004	e92d0001	 stmdb       sp!, {r0}
  00008	e92d5000	 stmdb       sp!, {r12, lr}
  0000c		 |$M34922|

; 81   :         if( m_hDevKey )

  0000c	e59d3008	 ldr         r3, [sp, #8]
  00010	e5933000	 ldr         r3, [r3]
  00014	e3530000	 cmp         r3, #0
  00018	0a000002	 beq         |$LN1@CRegistryE@2|

; 82   :         {
; 83   :             RegCloseKey( m_hDevKey );

  0001c	e59d3008	 ldr         r3, [sp, #8]
  00020	e5930000	 ldr         r0, [r3]
  00024	eb000000	 bl          RegCloseKey
  00028		 |$LN1@CRegistryE@2|

; 84   :         }
; 85   :     }

  00028	e89d6000	 ldmia       sp, {sp, lr}
  0002c	e12fff1e	 bx          lr
  00030		 |$M34923|

			 ENDP  ; |??1CRegistryEdit@@QAA@XZ|, CRegistryEdit::~CRegistryEdit

	IMPORT	|RegQueryValueExW|

  00000			 AREA	 |.pdata|, PDATA
|$T34937| DCD	|$LN7@RegQueryVa|
	DCD	0x40001f04
; Function compile flags: /Odtp

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |?RegQueryValueExW@CRegistryEdit@@QAAHPBGPAKPAE1@Z| PROC ; CRegistryEdit::RegQueryValueExW

; 145  :     {

  00000		 |$LN7@RegQueryVa|
  00000	e1a0c00d	 mov         r12, sp
  00004	e92d000f	 stmdb       sp!, {r0 - r3}
  00008	e92d5000	 stmdb       sp!, {r12, lr}
  0000c	e24dd020	 sub         sp, sp, #0x20
  00010		 |$M34934|

; 146  :         LONG status = ::RegQueryValueEx( m_hDevKey,
; 147  :                                            lpcName,
; 148  :                                            NULL,
; 149  :                                            pdwType,
; 150  :                                            lpData,
; 151  :                                            pdwDataLen );

  00010	e59d3038	 ldr         r3, [sp, #0x38]
  00014	e58d3004	 str         r3, [sp, #4]
  00018	e59d3034	 ldr         r3, [sp, #0x34]
  0001c	e58d3000	 str         r3, [sp]
  00020	e59d3030	 ldr         r3, [sp, #0x30]
  00024	e3a02000	 mov         r2, #0
  00028	e59d102c	 ldr         r1, [sp, #0x2C]
  0002c	e59d0028	 ldr         r0, [sp, #0x28]
  00030	e5900000	 ldr         r0, [r0]
  00034	eb000000	 bl          RegQueryValueExW
  00038	e58d0018	 str         r0, [sp, #0x18]
  0003c	e59d3018	 ldr         r3, [sp, #0x18]
  00040	e58d3008	 str         r3, [sp, #8]

; 152  :         return ( status == ERROR_SUCCESS );

  00044	e59d3008	 ldr         r3, [sp, #8]
  00048	e3530000	 cmp         r3, #0
  0004c	1a000002	 bne         |$LN3@RegQueryVa|
  00050	e3a03001	 mov         r3, #1
  00054	e58d301c	 str         r3, [sp, #0x1C]
  00058	ea000001	 b           |$LN4@RegQueryVa|
  0005c		 |$LN3@RegQueryVa|
  0005c	e3a03000	 mov         r3, #0
  00060	e58d301c	 str         r3, [sp, #0x1C]
  00064		 |$LN4@RegQueryVa|
  00064	e59d301c	 ldr         r3, [sp, #0x1C]
  00068	e58d3014	 str         r3, [sp, #0x14]

; 153  :     };

  0006c	e59d0014	 ldr         r0, [sp, #0x14]
  00070	e28dd020	 add         sp, sp, #0x20
  00074	e89d6000	 ldmia       sp, {sp, lr}
  00078	e12fff1e	 bx          lr
  0007c		 |$M34935|

			 ENDP  ; |?RegQueryValueExW@CRegistryEdit@@QAAHPBGPAKPAE1@Z|, CRegistryEdit::RegQueryValueExW

	EXPORT	|PmxSendDeviceNotification|
	IMPORT	|?SendMessageW@DeviceMediator@@QAAHIIKPAXK0KPAK@Z| ; DeviceMediator::SendMessageW

  00028			 AREA	 |.pdata|, PDATA
|$T34950| DCD	|$LN6@PmxSendDev|
	DCD	0x40002404
; Function compile flags: /Odtp
; File c:\wince600\platform\common\src\soc\common_ti_v1\common_ti\pm\devicemediator\api.cpp

  00978			 AREA	 |.text|, CODE, ARM

  00978		 |PmxSendDeviceNotification| PROC

; 451  : {

  00978		 |$LN6@PmxSendDev|
  00978	e1a0c00d	 mov         r12, sp
  0097c	e92d000f	 stmdb       sp!, {r0 - r3}
  00980	e92d5000	 stmdb       sp!, {r12, lr}
  00984	e24dd034	 sub         sp, sp, #0x34
  00988		 |$M34947|

; 452  :     DWORD rc = FALSE;

  00988	e3a03000	 mov         r3, #0
  0098c	e58d3014	 str         r3, [sp, #0x14]

; 453  : 
; 454  :     if (s_Device.pDeviceMediator != NULL)

  00990	e59f306c	 ldr         r3, [pc, #0x6C]
  00994	e5933010	 ldr         r3, [r3, #0x10]
  00998	e3530000	 cmp         r3, #0
  0099c	0a000012	 beq         |$LN1@PmxSendDev|

; 455  :         {
; 456  :         rc = s_Device.pDeviceMediator->SendMessage(listId, dwParam, 
; 457  :                 dwIoControlCode, lpInBuf, nInBufSize, lpOutBuf, nOutBufSize, 
; 458  :                 pdwBytesRet
; 459  :                 );

  009a0	e59d3058	 ldr         r3, [sp, #0x58]
  009a4	e58d3010	 str         r3, [sp, #0x10]
  009a8	e59d3054	 ldr         r3, [sp, #0x54]
  009ac	e58d300c	 str         r3, [sp, #0xC]
  009b0	e59d3050	 ldr         r3, [sp, #0x50]
  009b4	e58d3008	 str         r3, [sp, #8]
  009b8	e59d304c	 ldr         r3, [sp, #0x4C]
  009bc	e58d3004	 str         r3, [sp, #4]
  009c0	e59d3048	 ldr         r3, [sp, #0x48]
  009c4	e58d3000	 str         r3, [sp]
  009c8	e59d3044	 ldr         r3, [sp, #0x44]
  009cc	e59d2040	 ldr         r2, [sp, #0x40]
  009d0	e59d103c	 ldr         r1, [sp, #0x3C]
  009d4	e59f0028	 ldr         r0, [pc, #0x28]
  009d8	e5900010	 ldr         r0, [r0, #0x10]
  009dc	eb000000	 bl          |?SendMessageW@DeviceMediator@@QAAHIIKPAXK0KPAK@Z|
  009e0	e58d0030	 str         r0, [sp, #0x30]
  009e4	e59d3030	 ldr         r3, [sp, #0x30]
  009e8	e58d3014	 str         r3, [sp, #0x14]
  009ec		 |$LN1@PmxSendDev|

; 460  :         }
; 461  :     return rc;

  009ec	e59d3014	 ldr         r3, [sp, #0x14]
  009f0	e58d302c	 str         r3, [sp, #0x2C]

; 462  : }       

  009f4	e59d002c	 ldr         r0, [sp, #0x2C]
  009f8	e28dd034	 add         sp, sp, #0x34
  009fc	e89d6000	 ldmia       sp, {sp, lr}
  00a00	e12fff1e	 bx          lr
  00a04		 |$LN7@PmxSendDev|
  00a04		 |$LN8@PmxSendDev|
  00a04	00000000	 DCD         |s_Device|
  00a08		 |$M34948|

			 ENDP  ; |PmxSendDeviceNotification|

	END
