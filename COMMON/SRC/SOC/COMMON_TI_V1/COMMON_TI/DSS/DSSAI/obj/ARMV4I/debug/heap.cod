; Listing generated by Microsoft (R) Optimizing Compiler Version 14.01.60511.01 

	TTL	C:\WINCE600\PLATFORM\COMMON\SRC\SOC\COMMON_TI_V1\COMMON_TI\DSS\DSSAI\heap.cpp
	CODE32

  00000			 AREA	 |.drectve|, DRECTVE
	DCB	"-defaultlib:LIBCMT "
	DCB	"-defaultlib:OLDNAMES "

	EXPORT	|??_C@_1II@IBLAMDCN@?$AAH?$AAe?$AAa?$AAp?$AA?3?$AA?3?$AAH?$AAe?$AAa?$AAp?$AA?5?$AAs?$AAi?$AAz?$AAe?$AA?5?$AA?$CF?$AAd?$AA?5?$AAa?$AAd?$AAd?$AAr?$AAe?$AAs?$AAs?$AA?5?$AA0?$AAx?$AA?$CF?$AA0?$AA8@| [ DATA ] ; `string'
	EXPORT	|??0Heap@@QAA@KKPAV0@0@Z|		; Heap::Heap
	IMPORT	|NKDbgPrintfW|

  00000			 AREA	 |.pdata|, PDATA
|$T35640| DCD	|$LN9@Heap|
	DCD	0x40003d04
; File c:\wince600\platform\common\src\soc\common_ti_v1\common_ti\dss\dssai\heap.cpp

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1II@IBLAMDCN@?$AAH?$AAe?$AAa?$AAp?$AA?3?$AA?3?$AAH?$AAe?$AAa?$AAp?$AA?5?$AAs?$AAi?$AAz?$AAe?$AA?5?$AA?$CF?$AAd?$AA?5?$AAa?$AAd?$AAd?$AAr?$AAe?$AAs?$AAs?$AA?5?$AA0?$AAx?$AA?$CF?$AA0?$AA8@| DCB "H"
	DCB	0x0, "e", 0x0, "a", 0x0, "p", 0x0, ":", 0x0, ":", 0x0, "H"
	DCB	0x0, "e", 0x0, "a", 0x0, "p", 0x0, " ", 0x0, "s", 0x0, "i"
	DCB	0x0, "z", 0x0, "e", 0x0, " ", 0x0, "%", 0x0, "d", 0x0, " "
	DCB	0x0, "a", 0x0, "d", 0x0, "d", 0x0, "r", 0x0, "e", 0x0, "s"
	DCB	0x0, "s", 0x0, " ", 0x0, "0", 0x0, "x", 0x0, "%", 0x0, "0"
	DCB	0x0, "8", 0x0, "x", 0x0, " ", 0x0, "p", 0x0, "P", 0x0, "r"
	DCB	0x0, "e", 0x0, "v", 0x0, " ", 0x0, "%", 0x0, "0", 0x0, "8"
	DCB	0x0, "x", 0x0, " ", 0x0, "p", 0x0, "N", 0x0, "e", 0x0, "x"
	DCB	0x0, "t", 0x0, " ", 0x0, "%", 0x0, "0", 0x0, "8", 0x0, "x"
	DCB	0x0, " ", 0x0, "t", 0x0, "h", 0x0, "i", 0x0, "s", 0x0, " "
	DCB	0x0, "%", 0x0, "0", 0x0, "8", 0x0, "x", 0x0, 0xd, 0x0, 0xa
	DCB	0x0, 0x0, 0x0				; `string'
; Function compile flags: /Odtp

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |??0Heap@@QAA@KKPAV0@0@Z| PROC		; Heap::Heap

; 47   : {

  00000		 |$LN9@Heap|
  00000	e1a0c00d	 mov         r12, sp
  00004	e92d000f	 stmdb       sp!, {r0 - r3}
  00008	e92d5000	 stmdb       sp!, {r12, lr}
  0000c	e24dd018	 sub         sp, sp, #0x18
  00010		 |$M35637|

; 48   :     DEBUGMSG(ZONE_HEAP,(TEXT("Heap::Heap size %d address 0x%08x pPrev %08x pNext %08x this %08x\r\n"),
; 49   :         size, base, pPrev, pNext, this ));

  00010	ea00000b	 b           |$LN5@Heap|
  00014	e59d3020	 ldr         r3, [sp, #0x20]
  00018	e58d3004	 str         r3, [sp, #4]
  0001c	e59d302c	 ldr         r3, [sp, #0x2C]
  00020	e58d3000	 str         r3, [sp]
  00024	e59d3030	 ldr         r3, [sp, #0x30]
  00028	e59d2028	 ldr         r2, [sp, #0x28]
  0002c	e59d1024	 ldr         r1, [sp, #0x24]
  00030	e59f00b8	 ldr         r0, [pc, #0xB8]
  00034	eb000000	 bl          NKDbgPrintfW
  00038	e3a03001	 mov         r3, #1
  0003c	e58d3014	 str         r3, [sp, #0x14]
  00040	ea000001	 b           |$LN6@Heap|
  00044		 |$LN5@Heap|
  00044	e3a03000	 mov         r3, #0
  00048	e58d3014	 str         r3, [sp, #0x14]
  0004c		 |$LN6@Heap|

; 50   : 
; 51   :     if( (m_pNext = pNext) != NULL )

  0004c	e59d202c	 ldr         r2, [sp, #0x2C]
  00050	e59d3020	 ldr         r3, [sp, #0x20]
  00054	e5832000	 str         r2, [r3]
  00058	e59d302c	 ldr         r3, [sp, #0x2C]
  0005c	e3530000	 cmp         r3, #0
  00060	0a000004	 beq         |$LN2@Heap|

; 52   :         m_pNext->m_pPrev = this;

  00064	e59d3020	 ldr         r3, [sp, #0x20]
  00068	e5933000	 ldr         r3, [r3]
  0006c	e2832004	 add         r2, r3, #4
  00070	e59d3020	 ldr         r3, [sp, #0x20]
  00074	e5823000	 str         r3, [r2]
  00078		 |$LN2@Heap|

; 53   : 
; 54   :     if( (m_pPrev = pPrev) != NULL )

  00078	e59d3020	 ldr         r3, [sp, #0x20]
  0007c	e2832004	 add         r2, r3, #4
  00080	e59d3030	 ldr         r3, [sp, #0x30]
  00084	e5823000	 str         r3, [r2]
  00088	e59d3030	 ldr         r3, [sp, #0x30]
  0008c	e3530000	 cmp         r3, #0
  00090	0a000004	 beq         |$LN1@Heap|

; 55   :         m_pPrev->m_pNext = this;

  00094	e59d3020	 ldr         r3, [sp, #0x20]
  00098	e2833004	 add         r3, r3, #4
  0009c	e5932000	 ldr         r2, [r3]
  000a0	e59d3020	 ldr         r3, [sp, #0x20]
  000a4	e5823000	 str         r3, [r2]
  000a8		 |$LN1@Heap|

; 56   : 
; 57   :     m_pStart = base;

  000a8	e59d3020	 ldr         r3, [sp, #0x20]
  000ac	e2832008	 add         r2, r3, #8
  000b0	e59d3028	 ldr         r3, [sp, #0x28]
  000b4	e5823000	 str         r3, [r2]

; 58   :     m_nSize = size;

  000b8	e59d3020	 ldr         r3, [sp, #0x20]
  000bc	e283200c	 add         r2, r3, #0xC
  000c0	e59d3024	 ldr         r3, [sp, #0x24]
  000c4	e5823000	 str         r3, [r2]

; 59   :     m_fUsed = 0;

  000c8	e59d3020	 ldr         r3, [sp, #0x20]
  000cc	e2832010	 add         r2, r3, #0x10
  000d0	e3a03000	 mov         r3, #0
  000d4	e5823000	 str         r3, [r2]

; 60   : }

  000d8	e59d3020	 ldr         r3, [sp, #0x20]
  000dc	e58d3010	 str         r3, [sp, #0x10]
  000e0	e59d0010	 ldr         r0, [sp, #0x10]
  000e4	e28dd018	 add         sp, sp, #0x18
  000e8	e89d6000	 ldmia       sp, {sp, lr}
  000ec	e12fff1e	 bx          lr
  000f0		 |$LN10@Heap|
  000f0		 |$LN11@Heap|
  000f0	00000000	 DCD         |??_C@_1II@IBLAMDCN@?$AAH?$AAe?$AAa?$AAp?$AA?3?$AA?3?$AAH?$AAe?$AAa?$AAp?$AA?5?$AAs?$AAi?$AAz?$AAe?$AA?5?$AA?$CF?$AAd?$AA?5?$AAa?$AAd?$AAd?$AAr?$AAe?$AAs?$AAs?$AA?5?$AA0?$AAx?$AA?$CF?$AA0?$AA8@|
  000f4		 |$M35638|

			 ENDP  ; |??0Heap@@QAA@KKPAV0@0@Z|, Heap::Heap

	EXPORT	|??_C@_1CK@LIOJGCDK@?$AAD?$AAe?$AAl?$AAe?$AAt?$AAi?$AAn?$AAg?$AA?5?$AAn?$AAo?$AAd?$AAe?$AA?5?$AAo?$AAn?$AAl?$AAy?$AA?$AN?$AA?6?$AA?$AA@| [ DATA ] ; `string'
	EXPORT	|??_GHeap@@QAAPAXI@Z|			; Heap::`scalar deleting destructor'
	EXPORT	|??_C@_1CC@KCHFJKML@?$AAD?$AAe?$AAl?$AAe?$AAt?$AAi?$AAn?$AAg?$AA?5?$AAh?$AAe?$AAa?$AAp?$AA?$CB?$AA?$AN?$AA?6?$AA?$AA@| [ DATA ] ; `string'
	EXPORT	|??_C@_1DO@CNJFFIKA@?$AAH?$AAe?$AAa?$AAp?$AA?3?$AA?3?$AA?$HO?$AAH?$AAe?$AAa?$AAp?$AA?5?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx?$AA?5?$AA?$CI?$AAs?$AAi?$AAz?$AAe?$AA?$DN?$AA?$CF?$AAd?$AA?$CJ?$AA?$AN?$AA?6?$AA?$AA@| [ DATA ] ; `string'
	EXPORT	|??1Heap@@QAA@XZ|			; Heap::~Heap

  00008			 AREA	 |.pdata|, PDATA
|$T35657| DCD	|$LN20@Heap@2|
	DCD	0x40007704

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1CK@LIOJGCDK@?$AAD?$AAe?$AAl?$AAe?$AAt?$AAi?$AAn?$AAg?$AA?5?$AAn?$AAo?$AAd?$AAe?$AA?5?$AAo?$AAn?$AAl?$AAy?$AA?$AN?$AA?6?$AA?$AA@| DCB "D"
	DCB	0x0, "e", 0x0, "l", 0x0, "e", 0x0, "t", 0x0, "i", 0x0, "n"
	DCB	0x0, "g", 0x0, " ", 0x0, "n", 0x0, "o", 0x0, "d", 0x0, "e"
	DCB	0x0, " ", 0x0, "o", 0x0, "n", 0x0, "l", 0x0, "y", 0x0, 0xd
	DCB	0x0, 0xa, 0x0, 0x0, 0x0			; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1CC@KCHFJKML@?$AAD?$AAe?$AAl?$AAe?$AAt?$AAi?$AAn?$AAg?$AA?5?$AAh?$AAe?$AAa?$AAp?$AA?$CB?$AA?$AN?$AA?6?$AA?$AA@| DCB "D"
	DCB	0x0, "e", 0x0, "l", 0x0, "e", 0x0, "t", 0x0, "i", 0x0, "n"
	DCB	0x0, "g", 0x0, " ", 0x0, "h", 0x0, "e", 0x0, "a", 0x0, "p"
	DCB	0x0, "!", 0x0, 0xd, 0x0, 0xa, 0x0, 0x0, 0x0 ; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1DO@CNJFFIKA@?$AAH?$AAe?$AAa?$AAp?$AA?3?$AA?3?$AA?$HO?$AAH?$AAe?$AAa?$AAp?$AA?5?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx?$AA?5?$AA?$CI?$AAs?$AAi?$AAz?$AAe?$AA?$DN?$AA?$CF?$AAd?$AA?$CJ?$AA?$AN?$AA?6?$AA?$AA@| DCB "H"
	DCB	0x0, "e", 0x0, "a", 0x0, "p", 0x0, ":", 0x0, ":", 0x0, "~"
	DCB	0x0, "H", 0x0, "e", 0x0, "a", 0x0, "p", 0x0, " ", 0x0, "0"
	DCB	0x0, "x", 0x0, "%", 0x0, "0", 0x0, "8", 0x0, "x", 0x0, " "
	DCB	0x0, "(", 0x0, "s", 0x0, "i", 0x0, "z", 0x0, "e", 0x0, "="
	DCB	0x0, "%", 0x0, "d", 0x0, ")", 0x0, 0xd, 0x0, 0xa, 0x0, 0x0
	DCB	0x0					; `string'
; Function compile flags: /Odtp

  000f4			 AREA	 |.text|, CODE, ARM

  000f4		 |??1Heap@@QAA@XZ| PROC			; Heap::~Heap

; 64   : {

  000f4		 |$LN20@Heap@2|
  000f4	e1a0c00d	 mov         r12, sp
  000f8	e92d0001	 stmdb       sp!, {r0}
  000fc	e92d5000	 stmdb       sp!, {r12, lr}
  00100	e24dd020	 sub         sp, sp, #0x20
  00104		 |$M35654|

; 65   :     DEBUGMSG(ZONE_HEAP,(TEXT("Heap::~Heap 0x%08x (size=%d)\r\n"),this,m_nSize));

  00104	ea000008	 b           |$LN10@Heap@2|
  00108	e59d3028	 ldr         r3, [sp, #0x28]
  0010c	e283300c	 add         r3, r3, #0xC
  00110	e5932000	 ldr         r2, [r3]
  00114	e59d1028	 ldr         r1, [sp, #0x28]
  00118	e59f01ac	 ldr         r0, [pc, #0x1AC]
  0011c	eb000000	 bl          NKDbgPrintfW
  00120	e3a03001	 mov         r3, #1
  00124	e58d300c	 str         r3, [sp, #0xC]
  00128	ea000001	 b           |$LN11@Heap@2|
  0012c		 |$LN10@Heap@2|
  0012c	e3a03000	 mov         r3, #0
  00130	e58d300c	 str         r3, [sp, #0xC]
  00134		 |$LN11@Heap@2|

; 66   : 
; 67   :     if( !m_pPrev )

  00134	e59d3028	 ldr         r3, [sp, #0x28]
  00138	e2833004	 add         r3, r3, #4
  0013c	e5933000	 ldr         r3, [r3]
  00140	e3530000	 cmp         r3, #0
  00144	1a000034	 bne         |$LN7@Heap@2|

; 68   :     {
; 69   :         DEBUGMSG(ZONE_HEAP,(TEXT("Deleting heap!\r\n")));

  00148	ea000004	 b           |$LN12@Heap@2|
  0014c	e59f0174	 ldr         r0, [pc, #0x174]
  00150	eb000000	 bl          NKDbgPrintfW
  00154	e3a03001	 mov         r3, #1
  00158	e58d3010	 str         r3, [sp, #0x10]
  0015c	ea000001	 b           |$LN13@Heap@2|
  00160		 |$LN12@Heap@2|
  00160	e3a03000	 mov         r3, #0
  00164	e58d3010	 str         r3, [sp, #0x10]
  00168		 |$LN13@Heap@2|

; 70   : 
; 71   :         // if this is the base, then we are deleting the heap,
; 72   :         Heap *pLast = this;

  00168	e59d3028	 ldr         r3, [sp, #0x28]
  0016c	e58d3000	 str         r3, [sp]
  00170		 |$LN6@Heap@2|

; 73   :         
; 74   :         while( pLast->m_pNext )

  00170	e59d3000	 ldr         r3, [sp]
  00174	e5933000	 ldr         r3, [r3]
  00178	e3530000	 cmp         r3, #0
  0017c	0a000003	 beq         |$LN5@Heap@2|

; 75   :             pLast = pLast->m_pNext;

  00180	e59d3000	 ldr         r3, [sp]
  00184	e5933000	 ldr         r3, [r3]
  00188	e58d3000	 str         r3, [sp]
  0018c	eafffff7	 b           |$LN6@Heap@2|
  00190		 |$LN5@Heap@2|
  00190		 |$LN4@Heap@2|

; 76   :         
; 77   :         while( pLast != this )

  00190	e59d2000	 ldr         r2, [sp]
  00194	e59d3028	 ldr         r3, [sp, #0x28]
  00198	e1520003	 cmp         r2, r3
  0019c	0a00001d	 beq         |$LN3@Heap@2|

; 78   :         {
; 79   :             pLast = pLast->m_pPrev;

  001a0	e59d3000	 ldr         r3, [sp]
  001a4	e2833004	 add         r3, r3, #4
  001a8	e5933000	 ldr         r3, [r3]
  001ac	e58d3000	 str         r3, [sp]

; 80   :             pLast->m_pNext->m_pPrev = (Heap *)NULL; // prevent Heap::~Heap from doing anything

  001b0	e59d3000	 ldr         r3, [sp]
  001b4	e5933000	 ldr         r3, [r3]
  001b8	e2832004	 add         r2, r3, #4
  001bc	e3a03000	 mov         r3, #0
  001c0	e5823000	 str         r3, [r2]

; 81   :             delete pLast->m_pNext;

  001c4	e59d3000	 ldr         r3, [sp]
  001c8	e5933000	 ldr         r3, [r3]
  001cc	e58d3008	 str         r3, [sp, #8]
  001d0	e59d3008	 ldr         r3, [sp, #8]
  001d4	e58d3004	 str         r3, [sp, #4]
  001d8	e59d3004	 ldr         r3, [sp, #4]
  001dc	e3530000	 cmp         r3, #0
  001e0	0a000006	 beq         |$LN14@Heap@2|
  001e4	e3a01001	 mov         r1, #1
  001e8	e59d0004	 ldr         r0, [sp, #4]
  001ec	eb000000	 bl          |??_GHeap@@QAAPAXI@Z|
  001f0	e58d0014	 str         r0, [sp, #0x14]
  001f4	e59d3014	 ldr         r3, [sp, #0x14]
  001f8	e58d3018	 str         r3, [sp, #0x18]
  001fc	ea000001	 b           |$LN15@Heap@2|
  00200		 |$LN14@Heap@2|
  00200	e3a03000	 mov         r3, #0
  00204	e58d3018	 str         r3, [sp, #0x18]
  00208		 |$LN15@Heap@2|

; 82   :             pLast->m_pNext = (Heap *)NULL;

  00208	e59d2000	 ldr         r2, [sp]
  0020c	e3a03000	 mov         r3, #0
  00210	e5823000	 str         r3, [r2]

; 83   :         }

  00214	eaffffdd	 b           |$LN4@Heap@2|
  00218		 |$LN3@Heap@2|

; 84   :     }
; 85   :     else

  00218	ea000026	 b           |$LN2@Heap@2|
  0021c		 |$LN7@Heap@2|

; 86   :     {
; 87   :         DEBUGMSG(ZONE_HEAP,(TEXT("Deleting node only\r\n")));

  0021c	ea000004	 b           |$LN16@Heap@2|
  00220	e59f009c	 ldr         r0, [pc, #0x9C]
  00224	eb000000	 bl          NKDbgPrintfW
  00228	e3a03001	 mov         r3, #1
  0022c	e58d301c	 str         r3, [sp, #0x1C]
  00230	ea000001	 b           |$LN17@Heap@2|
  00234		 |$LN16@Heap@2|
  00234	e3a03000	 mov         r3, #0
  00238	e58d301c	 str         r3, [sp, #0x1C]
  0023c		 |$LN17@Heap@2|

; 88   : 
; 89   :         // otherwise, we are just freeing this node
; 90   :         m_pPrev->m_nSize += m_nSize;

  0023c	e59d3028	 ldr         r3, [sp, #0x28]
  00240	e2833004	 add         r3, r3, #4
  00244	e5933000	 ldr         r3, [r3]
  00248	e283200c	 add         r2, r3, #0xC
  0024c	e59d3028	 ldr         r3, [sp, #0x28]
  00250	e283300c	 add         r3, r3, #0xC
  00254	e5922000	 ldr         r2, [r2]
  00258	e5933000	 ldr         r3, [r3]
  0025c	e0822003	 add         r2, r2, r3
  00260	e59d3028	 ldr         r3, [sp, #0x28]
  00264	e2833004	 add         r3, r3, #4
  00268	e5933000	 ldr         r3, [r3]
  0026c	e283300c	 add         r3, r3, #0xC
  00270	e5832000	 str         r2, [r3]

; 91   :         m_pPrev->m_pNext = m_pNext;

  00274	e59d3028	 ldr         r3, [sp, #0x28]
  00278	e2833004	 add         r3, r3, #4
  0027c	e5932000	 ldr         r2, [r3]
  00280	e59d3028	 ldr         r3, [sp, #0x28]
  00284	e5933000	 ldr         r3, [r3]
  00288	e5823000	 str         r3, [r2]

; 92   :         if( m_pNext )

  0028c	e59d3028	 ldr         r3, [sp, #0x28]
  00290	e5933000	 ldr         r3, [r3]
  00294	e3530000	 cmp         r3, #0
  00298	0a000006	 beq         |$LN1@Heap@2|

; 93   :             m_pNext->m_pPrev = m_pPrev;

  0029c	e59d3028	 ldr         r3, [sp, #0x28]
  002a0	e2831004	 add         r1, r3, #4
  002a4	e59d3028	 ldr         r3, [sp, #0x28]
  002a8	e5933000	 ldr         r3, [r3]
  002ac	e2832004	 add         r2, r3, #4
  002b0	e5913000	 ldr         r3, [r1]
  002b4	e5823000	 str         r3, [r2]
  002b8		 |$LN1@Heap@2|
  002b8		 |$LN2@Heap@2|

; 94   :     }
; 95   : }

  002b8	e28dd020	 add         sp, sp, #0x20
  002bc	e89d6000	 ldmia       sp, {sp, lr}
  002c0	e12fff1e	 bx          lr
  002c4		 |$LN21@Heap@2|
  002c4		 |$LN22@Heap@2|
  002c4	00000000	 DCD         |??_C@_1CK@LIOJGCDK@?$AAD?$AAe?$AAl?$AAe?$AAt?$AAi?$AAn?$AAg?$AA?5?$AAn?$AAo?$AAd?$AAe?$AA?5?$AAo?$AAn?$AAl?$AAy?$AA?$AN?$AA?6?$AA?$AA@|
  002c8		 |$LN23@Heap@2|
  002c8	00000000	 DCD         |??_C@_1CC@KCHFJKML@?$AAD?$AAe?$AAl?$AAe?$AAt?$AAi?$AAn?$AAg?$AA?5?$AAh?$AAe?$AAa?$AAp?$AA?$CB?$AA?$AN?$AA?6?$AA?$AA@|
  002cc		 |$LN24@Heap@2|
  002cc	00000000	 DCD         |??_C@_1DO@CNJFFIKA@?$AAH?$AAe?$AAa?$AAp?$AA?3?$AA?3?$AA?$HO?$AAH?$AAe?$AAa?$AAp?$AA?5?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx?$AA?5?$AA?$CI?$AAs?$AAi?$AAz?$AAe?$AA?$DN?$AA?$CF?$AAd?$AA?$CJ?$AA?$AN?$AA?6?$AA?$AA@|
  002d0		 |$M35655|

			 ENDP  ; |??1Heap@@QAA@XZ|, Heap::~Heap

	IMPORT	|??3@YAXPAX@Z|				; operator delete

  00000			 AREA	 |.pdata|, PDATA
|$T35667| DCD	|$LN6@scalar|
	DCD	0x40001104
; Function compile flags: /Odtp

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |??_GHeap@@QAAPAXI@Z| PROC		; Heap::`scalar deleting destructor'
  00000		 |$LN6@scalar|
  00000	e1a0c00d	 mov         r12, sp
  00004	e92d0003	 stmdb       sp!, {r0, r1}
  00008	e92d5000	 stmdb       sp!, {r12, lr}
  0000c	e24dd004	 sub         sp, sp, #4
  00010		 |$M35664|
  00010	e59d000c	 ldr         r0, [sp, #0xC]
  00014	eb000000	 bl          |??1Heap@@QAA@XZ|
  00018	e59d3010	 ldr         r3, [sp, #0x10]
  0001c	e3130001	 tst         r3, #1
  00020	0a000001	 beq         |$LN1@scalar|
  00024	e59d000c	 ldr         r0, [sp, #0xC]
  00028	eb000000	 bl          |??3@YAXPAX@Z|
  0002c		 |$LN1@scalar|
  0002c	e59d300c	 ldr         r3, [sp, #0xC]
  00030	e58d3000	 str         r3, [sp]
  00034	e59d0000	 ldr         r0, [sp]
  00038	e28dd004	 add         sp, sp, #4
  0003c	e89d6000	 ldmia       sp, {sp, lr}
  00040	e12fff1e	 bx          lr
  00044		 |$M35665|

			 ENDP  ; |??_GHeap@@QAAPAXI@Z|, Heap::`scalar deleting destructor'

	EXPORT	|?TotalUsed@Heap@@QAAKXZ|		; Heap::TotalUsed

  00010			 AREA	 |.pdata|, PDATA
|$T35675| DCD	|$LN9@TotalUsed|
	DCD	0x40002104
; Function compile flags: /Odtp

  002d0			 AREA	 |.text|, CODE, ARM

  002d0		 |?TotalUsed@Heap@@QAAKXZ| PROC		; Heap::TotalUsed

; 99   : {

  002d0		 |$LN9@TotalUsed|
  002d0	e1a0c00d	 mov         r12, sp
  002d4	e92d0001	 stmdb       sp!, {r0}
  002d8	e92d5000	 stmdb       sp!, {r12, lr}
  002dc	e24dd00c	 sub         sp, sp, #0xC
  002e0		 |$M35672|

; 100  :     Heap *pNode;
; 101  :     DWORD size = 0;

  002e0	e3a03000	 mov         r3, #0
  002e4	e58d3004	 str         r3, [sp, #4]

; 102  : 
; 103  :     for( pNode=this; pNode; pNode = pNode->m_pNext )

  002e8	e59d3014	 ldr         r3, [sp, #0x14]
  002ec	e58d3000	 str         r3, [sp]
  002f0	ea000002	 b           |$LN4@TotalUsed|
  002f4		 |$LN3@TotalUsed|
  002f4	e59d3000	 ldr         r3, [sp]
  002f8	e5933000	 ldr         r3, [r3]
  002fc	e58d3000	 str         r3, [sp]
  00300		 |$LN4@TotalUsed|
  00300	e59d3000	 ldr         r3, [sp]
  00304	e3530000	 cmp         r3, #0
  00308	0a00000b	 beq         |$LN2@TotalUsed|

; 104  :         if( pNode->m_fUsed )

  0030c	e59d3000	 ldr         r3, [sp]
  00310	e2833010	 add         r3, r3, #0x10
  00314	e5933000	 ldr         r3, [r3]
  00318	e3530000	 cmp         r3, #0
  0031c	0a000005	 beq         |$LN1@TotalUsed|

; 105  :             size += pNode->m_nSize;

  00320	e59d3000	 ldr         r3, [sp]
  00324	e283300c	 add         r3, r3, #0xC
  00328	e59d2004	 ldr         r2, [sp, #4]
  0032c	e5933000	 ldr         r3, [r3]
  00330	e0823003	 add         r3, r2, r3
  00334	e58d3004	 str         r3, [sp, #4]
  00338		 |$LN1@TotalUsed|

; 106  : 
; 107  :     return size;

  00338	eaffffed	 b           |$LN3@TotalUsed|
  0033c		 |$LN2@TotalUsed|
  0033c	e59d3004	 ldr         r3, [sp, #4]
  00340	e58d3008	 str         r3, [sp, #8]

; 108  : }

  00344	e59d0008	 ldr         r0, [sp, #8]
  00348	e28dd00c	 add         sp, sp, #0xC
  0034c	e89d6000	 ldmia       sp, {sp, lr}
  00350	e12fff1e	 bx          lr
  00354		 |$M35673|

			 ENDP  ; |?TotalUsed@Heap@@QAAKXZ|, Heap::TotalUsed

	EXPORT	|?TotalFree@Heap@@QAAKXZ|		; Heap::TotalFree

  00018			 AREA	 |.pdata|, PDATA
|$T35681| DCD	|$LN9@TotalFree|
	DCD	0x40002104
; Function compile flags: /Odtp

  00354			 AREA	 |.text|, CODE, ARM

  00354		 |?TotalFree@Heap@@QAAKXZ| PROC		; Heap::TotalFree

; 112  : {

  00354		 |$LN9@TotalFree|
  00354	e1a0c00d	 mov         r12, sp
  00358	e92d0001	 stmdb       sp!, {r0}
  0035c	e92d5000	 stmdb       sp!, {r12, lr}
  00360	e24dd00c	 sub         sp, sp, #0xC
  00364		 |$M35678|

; 113  :     Heap *pNode;
; 114  :     DWORD size = 0;

  00364	e3a03000	 mov         r3, #0
  00368	e58d3004	 str         r3, [sp, #4]

; 115  : 
; 116  :     for( pNode = this; pNode; pNode = pNode->m_pNext )

  0036c	e59d3014	 ldr         r3, [sp, #0x14]
  00370	e58d3000	 str         r3, [sp]
  00374	ea000002	 b           |$LN4@TotalFree|
  00378		 |$LN3@TotalFree|
  00378	e59d3000	 ldr         r3, [sp]
  0037c	e5933000	 ldr         r3, [r3]
  00380	e58d3000	 str         r3, [sp]
  00384		 |$LN4@TotalFree|
  00384	e59d3000	 ldr         r3, [sp]
  00388	e3530000	 cmp         r3, #0
  0038c	0a00000b	 beq         |$LN2@TotalFree|

; 117  :         if( !pNode->m_fUsed )

  00390	e59d3000	 ldr         r3, [sp]
  00394	e2833010	 add         r3, r3, #0x10
  00398	e5933000	 ldr         r3, [r3]
  0039c	e3530000	 cmp         r3, #0
  003a0	1a000005	 bne         |$LN1@TotalFree|

; 118  :             size += pNode->m_nSize;

  003a4	e59d3000	 ldr         r3, [sp]
  003a8	e283300c	 add         r3, r3, #0xC
  003ac	e59d2004	 ldr         r2, [sp, #4]
  003b0	e5933000	 ldr         r3, [r3]
  003b4	e0823003	 add         r3, r2, r3
  003b8	e58d3004	 str         r3, [sp, #4]
  003bc		 |$LN1@TotalFree|

; 119  : 
; 120  :     return size;

  003bc	eaffffed	 b           |$LN3@TotalFree|
  003c0		 |$LN2@TotalFree|
  003c0	e59d3004	 ldr         r3, [sp, #4]
  003c4	e58d3008	 str         r3, [sp, #8]

; 121  : }

  003c8	e59d0008	 ldr         r0, [sp, #8]
  003cc	e28dd00c	 add         sp, sp, #0xC
  003d0	e89d6000	 ldmia       sp, {sp, lr}
  003d4	e12fff1e	 bx          lr
  003d8		 |$M35679|

			 ENDP  ; |?TotalFree@Heap@@QAAKXZ|, Heap::TotalFree

	EXPORT	|??_C@_1GE@CINLEPBF@?$AAM?$AAa?$AAr?$AAk?$AAi?$AAn?$AAg?$AA?5?$AAn?$AAo?$AAd?$AAe?$AA?5?$AAa?$AAt?$AA?5?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx?$AA?5?$AAa?$AAs?$AA?5?$AAu?$AAs?$AAe?$AAd?$AA?5?$AA?$CI@| [ DATA ] ; `string'
	EXPORT	|?Address@Heap@@QAAKXZ|			; Heap::Address
	EXPORT	|??_C@_1DM@NHHILNKE@?$AAF?$AAa?$AAi?$AAl?$AAe?$AAd?$AA?5?$AAt?$AAo?$AA?5?$AAa?$AAl?$AAl?$AAo?$AAc?$AAa?$AAt?$AAe?$AA?5?$AAn?$AAe?$AAw?$AA?5?$AAn?$AAo?$AAd?$AAe?$AA?$AN?$AA?6?$AA?$AA@| [ DATA ] ; `string'
	EXPORT	|??_C@_1EG@GAMEKDIE@?$AAS?$AAp?$AAl?$AAi?$AAt?$AAt?$AAi?$AAn?$AAg?$AA?5?$AA?$CF?$AAd?$AA?5?$AAb?$AAy?$AAt?$AAe?$AA?5?$AAn?$AAo?$AAd?$AAe?$AA?5?$AAa?$AAt?$AA?5?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx@| [ DATA ] ; `string'
	EXPORT	|??_C@_1CK@EHNPEJMP@?$AAH?$AAe?$AAa?$AAp?$AA?3?$AA?3?$AAA?$AAl?$AAl?$AAo?$AAc?$AAa?$AAt?$AAe?$AA?$CI?$AA?$CF?$AAd?$AA?$CJ?$AA?$AN?$AA?6?$AA?$AA@| [ DATA ] ; `string'
	EXPORT	|?Allocate@Heap@@QAAPAV1@K@Z|		; Heap::Allocate
	IMPORT	|??2@YAPAXI@Z|				; operator new

  00020			 AREA	 |.pdata|, PDATA
|$T35699| DCD	|$LN22@Allocate|
	DCD	0x40008604

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1GE@CINLEPBF@?$AAM?$AAa?$AAr?$AAk?$AAi?$AAn?$AAg?$AA?5?$AAn?$AAo?$AAd?$AAe?$AA?5?$AAa?$AAt?$AA?5?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx?$AA?5?$AAa?$AAs?$AA?5?$AAu?$AAs?$AAe?$AAd?$AA?5?$AA?$CI@| DCB "M"
	DCB	0x0, "a", 0x0, "r", 0x0, "k", 0x0, "i", 0x0, "n", 0x0, "g"
	DCB	0x0, " ", 0x0, "n", 0x0, "o", 0x0, "d", 0x0, "e", 0x0, " "
	DCB	0x0, "a", 0x0, "t", 0x0, " ", 0x0, "0", 0x0, "x", 0x0, "%"
	DCB	0x0, "0", 0x0, "8", 0x0, "x", 0x0, " ", 0x0, "a", 0x0, "s"
	DCB	0x0, " ", 0x0, "u", 0x0, "s", 0x0, "e", 0x0, "d", 0x0, " "
	DCB	0x0, "(", 0x0, "o", 0x0, "f", 0x0, "f", 0x0, "s", 0x0, "e"
	DCB	0x0, "t", 0x0, " ", 0x0, "=", 0x0, " ", 0x0, "0", 0x0, "x"
	DCB	0x0, "0", 0x0, "8", 0x0, "x", 0x0, ")", 0x0, 0xd, 0x0, 0xa
	DCB	0x0, 0x0, 0x0				; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1DM@NHHILNKE@?$AAF?$AAa?$AAi?$AAl?$AAe?$AAd?$AA?5?$AAt?$AAo?$AA?5?$AAa?$AAl?$AAl?$AAo?$AAc?$AAa?$AAt?$AAe?$AA?5?$AAn?$AAe?$AAw?$AA?5?$AAn?$AAo?$AAd?$AAe?$AA?$AN?$AA?6?$AA?$AA@| DCB "F"
	DCB	0x0, "a", 0x0, "i", 0x0, "l", 0x0, "e", 0x0, "d", 0x0, " "
	DCB	0x0, "t", 0x0, "o", 0x0, " ", 0x0, "a", 0x0, "l", 0x0, "l"
	DCB	0x0, "o", 0x0, "c", 0x0, "a", 0x0, "t", 0x0, "e", 0x0, " "
	DCB	0x0, "n", 0x0, "e", 0x0, "w", 0x0, " ", 0x0, "n", 0x0, "o"
	DCB	0x0, "d", 0x0, "e", 0x0, 0xd, 0x0, 0xa, 0x0, 0x0, 0x0 ; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1EG@GAMEKDIE@?$AAS?$AAp?$AAl?$AAi?$AAt?$AAt?$AAi?$AAn?$AAg?$AA?5?$AA?$CF?$AAd?$AA?5?$AAb?$AAy?$AAt?$AAe?$AA?5?$AAn?$AAo?$AAd?$AAe?$AA?5?$AAa?$AAt?$AA?5?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx@| DCB "S"
	DCB	0x0, "p", 0x0, "l", 0x0, "i", 0x0, "t", 0x0, "t", 0x0, "i"
	DCB	0x0, "n", 0x0, "g", 0x0, " ", 0x0, "%", 0x0, "d", 0x0, " "
	DCB	0x0, "b", 0x0, "y", 0x0, "t", 0x0, "e", 0x0, " ", 0x0, "n"
	DCB	0x0, "o", 0x0, "d", 0x0, "e", 0x0, " ", 0x0, "a", 0x0, "t"
	DCB	0x0, " ", 0x0, "0", 0x0, "x", 0x0, "%", 0x0, "0", 0x0, "8"
	DCB	0x0, "x", 0x0, 0xd, 0x0, 0xa, 0x0, 0x0, 0x0 ; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1CK@EHNPEJMP@?$AAH?$AAe?$AAa?$AAp?$AA?3?$AA?3?$AAA?$AAl?$AAl?$AAo?$AAc?$AAa?$AAt?$AAe?$AA?$CI?$AA?$CF?$AAd?$AA?$CJ?$AA?$AN?$AA?6?$AA?$AA@| DCB "H"
	DCB	0x0, "e", 0x0, "a", 0x0, "p", 0x0, ":", 0x0, ":", 0x0, "A"
	DCB	0x0, "l", 0x0, "l", 0x0, "o", 0x0, "c", 0x0, "a", 0x0, "t"
	DCB	0x0, "e", 0x0, "(", 0x0, "%", 0x0, "d", 0x0, ")", 0x0, 0xd
	DCB	0x0, 0xa, 0x0, 0x0, 0x0			; `string'
; Function compile flags: /Odtp

  003d8			 AREA	 |.text|, CODE, ARM

  003d8		 |?Allocate@Heap@@QAAPAV1@K@Z| PROC	; Heap::Allocate

; 126  : {

  003d8		 |$LN22@Allocate|
  003d8	e1a0c00d	 mov         r12, sp
  003dc	e92d0003	 stmdb       sp!, {r0, r1}
  003e0	e92d5000	 stmdb       sp!, {r12, lr}
  003e4	e24dd038	 sub         sp, sp, #0x38
  003e8		 |$M35696|

; 127  :     Heap *pNode = this;

  003e8	e59d3040	 ldr         r3, [sp, #0x40]
  003ec	e58d3004	 str         r3, [sp, #4]

; 128  : 
; 129  :     DEBUGMSG(ZONE_HEAP,(TEXT("Heap::Allocate(%d)\r\n"),size));

  003f0	ea000005	 b           |$LN10@Allocate|
  003f4	e59d1044	 ldr         r1, [sp, #0x44]
  003f8	e59f01ec	 ldr         r0, [pc, #0x1EC]
  003fc	eb000000	 bl          NKDbgPrintfW
  00400	e3a03001	 mov         r3, #1
  00404	e58d3018	 str         r3, [sp, #0x18]
  00408	ea000001	 b           |$LN11@Allocate|
  0040c		 |$LN10@Allocate|
  0040c	e3a03000	 mov         r3, #0
  00410	e58d3018	 str         r3, [sp, #0x18]
  00414		 |$LN11@Allocate|
  00414		 |$LN7@Allocate|

; 130  : 
; 131  :     while( pNode && ( ( pNode->m_fUsed ) || ( pNode->m_nSize < size ) ) )

  00414	e59d3004	 ldr         r3, [sp, #4]
  00418	e3530000	 cmp         r3, #0
  0041c	0a00000e	 beq         |$LN6@Allocate|
  00420	e59d3004	 ldr         r3, [sp, #4]
  00424	e2833010	 add         r3, r3, #0x10
  00428	e5933000	 ldr         r3, [r3]
  0042c	e3530000	 cmp         r3, #0
  00430	1a000005	 bne         |$LN5@Allocate|
  00434	e59d3004	 ldr         r3, [sp, #4]
  00438	e283300c	 add         r3, r3, #0xC
  0043c	e5932000	 ldr         r2, [r3]
  00440	e59d3044	 ldr         r3, [sp, #0x44]
  00444	e1520003	 cmp         r2, r3
  00448	2a000003	 bcs         |$LN6@Allocate|
  0044c		 |$LN5@Allocate|

; 132  :         pNode = pNode->m_pNext;

  0044c	e59d3004	 ldr         r3, [sp, #4]
  00450	e5933000	 ldr         r3, [r3]
  00454	e58d3004	 str         r3, [sp, #4]
  00458	eaffffed	 b           |$LN7@Allocate|
  0045c		 |$LN6@Allocate|

; 133  : 
; 134  :     if( pNode && ( pNode->m_nSize > size ) )

  0045c	e59d3004	 ldr         r3, [sp, #4]
  00460	e3530000	 cmp         r3, #0
  00464	0a000043	 beq         |$LN4@Allocate|
  00468	e59d3004	 ldr         r3, [sp, #4]
  0046c	e283300c	 add         r3, r3, #0xC
  00470	e5932000	 ldr         r2, [r3]
  00474	e59d3044	 ldr         r3, [sp, #0x44]
  00478	e1520003	 cmp         r2, r3
  0047c	9a00003d	 bls         |$LN4@Allocate|

; 135  :     {
; 136  :         DEBUGMSG(ZONE_HEAP,(TEXT("Splitting %d byte node at 0x%08x\r\n"), pNode->m_nSize, pNode ));

  00480	ea000008	 b           |$LN12@Allocate|
  00484	e59d2004	 ldr         r2, [sp, #4]
  00488	e59d3004	 ldr         r3, [sp, #4]
  0048c	e283300c	 add         r3, r3, #0xC
  00490	e5931000	 ldr         r1, [r3]
  00494	e59f014c	 ldr         r0, [pc, #0x14C]
  00498	eb000000	 bl          NKDbgPrintfW
  0049c	e3a03001	 mov         r3, #1
  004a0	e58d301c	 str         r3, [sp, #0x1C]
  004a4	ea000001	 b           |$LN13@Allocate|
  004a8		 |$LN12@Allocate|
  004a8	e3a03000	 mov         r3, #0
  004ac	e58d301c	 str         r3, [sp, #0x1C]
  004b0		 |$LN13@Allocate|

; 137  : 
; 138  :         // Ok, have to split into used & unused section
; 139  :         Heap *pFreeNode = new Heap(
; 140  :                                 pNode->m_nSize - size,      // size
; 141  :                                 pNode->m_pStart + size,     // start
; 142  :                                 pNode->m_pNext,             // next
; 143  :                                 pNode                       // prev
; 144  :                                 );

  004b0	e3a00014	 mov         r0, #0x14
  004b4	eb000000	 bl          |??2@YAPAXI@Z|
  004b8	e58d0020	 str         r0, [sp, #0x20]
  004bc	e59d3020	 ldr         r3, [sp, #0x20]
  004c0	e58d300c	 str         r3, [sp, #0xC]
  004c4	e59d300c	 ldr         r3, [sp, #0xC]
  004c8	e3530000	 cmp         r3, #0
  004cc	0a000013	 beq         |$LN14@Allocate|
  004d0	e59d3004	 ldr         r3, [sp, #4]
  004d4	e58d3000	 str         r3, [sp]
  004d8	e59d3004	 ldr         r3, [sp, #4]
  004dc	e5933000	 ldr         r3, [r3]
  004e0	e59d2004	 ldr         r2, [sp, #4]
  004e4	e2822008	 add         r2, r2, #8
  004e8	e5921000	 ldr         r1, [r2]
  004ec	e59d2044	 ldr         r2, [sp, #0x44]
  004f0	e0812002	 add         r2, r1, r2
  004f4	e59d1004	 ldr         r1, [sp, #4]
  004f8	e281100c	 add         r1, r1, #0xC
  004fc	e5910000	 ldr         r0, [r1]
  00500	e59d1044	 ldr         r1, [sp, #0x44]
  00504	e0401001	 sub         r1, r0, r1
  00508	e59d000c	 ldr         r0, [sp, #0xC]
  0050c	eb000000	 bl          |??0Heap@@QAA@KKPAV0@0@Z|
  00510	e58d0024	 str         r0, [sp, #0x24]
  00514	e59d3024	 ldr         r3, [sp, #0x24]
  00518	e58d3028	 str         r3, [sp, #0x28]
  0051c	ea000001	 b           |$LN15@Allocate|
  00520		 |$LN14@Allocate|
  00520	e3a03000	 mov         r3, #0
  00524	e58d3028	 str         r3, [sp, #0x28]
  00528		 |$LN15@Allocate|
  00528	e59d3028	 ldr         r3, [sp, #0x28]
  0052c	e58d3008	 str         r3, [sp, #8]

; 145  : 
; 146  :         if( !pFreeNode )

  00530	e59d3008	 ldr         r3, [sp, #8]
  00534	e3530000	 cmp         r3, #0
  00538	1a00000a	 bne         |$LN3@Allocate|

; 147  :         {
; 148  :             pNode = (Heap *)NULL;   // out of memory for new node

  0053c	e3a03000	 mov         r3, #0
  00540	e58d3004	 str         r3, [sp, #4]

; 149  :             DEBUGMSG(ZONE_HEAP,(TEXT("Failed to allocate new node\r\n")));

  00544	ea000004	 b           |$LN16@Allocate|
  00548	e59f0094	 ldr         r0, [pc, #0x94]
  0054c	eb000000	 bl          NKDbgPrintfW
  00550	e3a03001	 mov         r3, #1
  00554	e58d302c	 str         r3, [sp, #0x2C]
  00558	ea000001	 b           |$LN17@Allocate|
  0055c		 |$LN16@Allocate|
  0055c	e3a03000	 mov         r3, #0
  00560	e58d302c	 str         r3, [sp, #0x2C]
  00564		 |$LN17@Allocate|

; 150  :         }
; 151  :         else

  00564	ea000003	 b           |$LN2@Allocate|
  00568		 |$LN3@Allocate|

; 152  :         {
; 153  :             pNode->m_nSize = size;

  00568	e59d3004	 ldr         r3, [sp, #4]
  0056c	e283200c	 add         r2, r3, #0xC
  00570	e59d3044	 ldr         r3, [sp, #0x44]
  00574	e5823000	 str         r3, [r2]
  00578		 |$LN2@Allocate|
  00578		 |$LN4@Allocate|

; 154  :         }
; 155  :     }
; 156  : 
; 157  :     if( pNode )

  00578	e59d3004	 ldr         r3, [sp, #4]
  0057c	e3530000	 cmp         r3, #0
  00580	0a000010	 beq         |$LN1@Allocate|

; 158  :     {
; 159  :         pNode->m_fUsed = 1;

  00584	e59d3004	 ldr         r3, [sp, #4]
  00588	e2832010	 add         r2, r3, #0x10
  0058c	e3a03001	 mov         r3, #1
  00590	e5823000	 str         r3, [r2]

; 160  :         DEBUGMSG(ZONE_HEAP,(TEXT("Marking node at 0x%08x as used (offset = 0x08x)\r\n"),pNode, pNode->Address()));

  00594	ea000009	 b           |$LN18@Allocate|
  00598	e59d0004	 ldr         r0, [sp, #4]
  0059c	eb000000	 bl          |?Address@Heap@@QAAKXZ|
  005a0	e58d0030	 str         r0, [sp, #0x30]
  005a4	e59d2030	 ldr         r2, [sp, #0x30]
  005a8	e59d1004	 ldr         r1, [sp, #4]
  005ac	e59f002c	 ldr         r0, [pc, #0x2C]
  005b0	eb000000	 bl          NKDbgPrintfW
  005b4	e3a03001	 mov         r3, #1
  005b8	e58d3034	 str         r3, [sp, #0x34]
  005bc	ea000001	 b           |$LN19@Allocate|
  005c0		 |$LN18@Allocate|
  005c0	e3a03000	 mov         r3, #0
  005c4	e58d3034	 str         r3, [sp, #0x34]
  005c8		 |$LN19@Allocate|
  005c8		 |$LN1@Allocate|

; 161  :     }
; 162  : 
; 163  :     return pNode;

  005c8	e59d3004	 ldr         r3, [sp, #4]
  005cc	e58d3014	 str         r3, [sp, #0x14]

; 164  : }

  005d0	e59d0014	 ldr         r0, [sp, #0x14]
  005d4	e28dd038	 add         sp, sp, #0x38
  005d8	e89d6000	 ldmia       sp, {sp, lr}
  005dc	e12fff1e	 bx          lr
  005e0		 |$LN23@Allocate|
  005e0		 |$LN24@Allocate|
  005e0	00000000	 DCD         |??_C@_1GE@CINLEPBF@?$AAM?$AAa?$AAr?$AAk?$AAi?$AAn?$AAg?$AA?5?$AAn?$AAo?$AAd?$AAe?$AA?5?$AAa?$AAt?$AA?5?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx?$AA?5?$AAa?$AAs?$AA?5?$AAu?$AAs?$AAe?$AAd?$AA?5?$AA?$CI@|
  005e4		 |$LN25@Allocate|
  005e4	00000000	 DCD         |??_C@_1DM@NHHILNKE@?$AAF?$AAa?$AAi?$AAl?$AAe?$AAd?$AA?5?$AAt?$AAo?$AA?5?$AAa?$AAl?$AAl?$AAo?$AAc?$AAa?$AAt?$AAe?$AA?5?$AAn?$AAe?$AAw?$AA?5?$AAn?$AAo?$AAd?$AAe?$AA?$AN?$AA?6?$AA?$AA@|
  005e8		 |$LN26@Allocate|
  005e8	00000000	 DCD         |??_C@_1EG@GAMEKDIE@?$AAS?$AAp?$AAl?$AAi?$AAt?$AAt?$AAi?$AAn?$AAg?$AA?5?$AA?$CF?$AAd?$AA?5?$AAb?$AAy?$AAt?$AAe?$AA?5?$AAn?$AAo?$AAd?$AAe?$AA?5?$AAa?$AAt?$AA?5?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx@|
  005ec		 |$LN27@Allocate|
  005ec	00000000	 DCD         |??_C@_1CK@EHNPEJMP@?$AAH?$AAe?$AAa?$AAp?$AA?3?$AA?3?$AAA?$AAl?$AAl?$AAo?$AAc?$AAa?$AAt?$AAe?$AA?$CI?$AA?$CF?$AAd?$AA?$CJ?$AA?$AN?$AA?6?$AA?$AA@|
  005f0		 |$M35697|

			 ENDP  ; |?Allocate@Heap@@QAAPAV1@K@Z|, Heap::Allocate

; File c:\wince600\platform\common\src\soc\common_ti_v1\common_ti\dss\dssai\heap.h

  00000			 AREA	 |.pdata|, PDATA
|$T35710| DCD	|$LN5@Address|
	DCD	0x40000c04
; Function compile flags: /Odtp

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |?Address@Heap@@QAAKXZ| PROC		; Heap::Address

; 76   :     DWORD       Address() { return m_pStart; }

  00000		 |$LN5@Address|
  00000	e1a0c00d	 mov         r12, sp
  00004	e92d0001	 stmdb       sp!, {r0}
  00008	e92d5000	 stmdb       sp!, {r12, lr}
  0000c	e24dd004	 sub         sp, sp, #4
  00010		 |$M35707|
  00010	e59d300c	 ldr         r3, [sp, #0xC]
  00014	e2833008	 add         r3, r3, #8
  00018	e5933000	 ldr         r3, [r3]
  0001c	e58d3000	 str         r3, [sp]
  00020	e59d0000	 ldr         r0, [sp]
  00024	e28dd004	 add         sp, sp, #4
  00028	e89d6000	 ldmia       sp, {sp, lr}
  0002c	e12fff1e	 bx          lr
  00030		 |$M35708|

			 ENDP  ; |?Address@Heap@@QAAKXZ|, Heap::Address

	EXPORT	|??_C@_1HA@PBJAGEFK@?$AAH?$AAe?$AAa?$AAp?$AA?3?$AA?3?$AAF?$AAr?$AAe?$AAe?$AA?5?$AA?9?$AA?5?$AAm?$AAe?$AAr?$AAg?$AAi?$AAn?$AAg?$AA?5?$AA?$CF?$AA0?$AA8?$AAx?$AA?5?$AAw?$AAi?$AAt?$AAh?$AA?5?$AAs@| [ DATA ] ; `string'
	EXPORT	|??_C@_1HA@MCEDHLD@?$AAH?$AAe?$AAa?$AAp?$AA?3?$AA?3?$AAF?$AAr?$AAe?$AAe?$AA?5?$AA?9?$AA?5?$AAm?$AAe?$AAr?$AAg?$AAi?$AAn?$AAg?$AA?5?$AAn?$AAo?$AAd?$AAe?$AA?5?$AA?$CF?$AA0?$AA8?$AAx?$AA?5?$AAw@| [ DATA ] ; `string'
	EXPORT	|??_C@_1DM@LBIMDIFJ@?$AAH?$AAe?$AAa?$AAp?$AA?3?$AA?3?$AAF?$AAr?$AAe?$AAe?$AA?5?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx?$AA?5?$AA?$CI?$AAs?$AAi?$AAz?$AAe?$AA?$DN?$AA?$CF?$AAd?$AA?$CJ?$AA?$AN?$AA?6?$AA?$AA@| [ DATA ] ; `string'
	EXPORT	|?Free@Heap@@QAAXXZ|			; Heap::Free

  00028			 AREA	 |.pdata|, PDATA
|$T35731| DCD	|$LN17@Free|
	DCD	0x40006904
; File c:\wince600\platform\common\src\soc\common_ti_v1\common_ti\dss\dssai\heap.cpp

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1HA@PBJAGEFK@?$AAH?$AAe?$AAa?$AAp?$AA?3?$AA?3?$AAF?$AAr?$AAe?$AAe?$AA?5?$AA?9?$AA?5?$AAm?$AAe?$AAr?$AAg?$AAi?$AAn?$AAg?$AA?5?$AA?$CF?$AA0?$AA8?$AAx?$AA?5?$AAw?$AAi?$AAt?$AAh?$AA?5?$AAs@| DCB "H"
	DCB	0x0, "e", 0x0, "a", 0x0, "p", 0x0, ":", 0x0, ":", 0x0, "F"
	DCB	0x0, "r", 0x0, "e", 0x0, "e", 0x0, " ", 0x0, "-", 0x0, " "
	DCB	0x0, "m", 0x0, "e", 0x0, "r", 0x0, "g", 0x0, "i", 0x0, "n"
	DCB	0x0, "g", 0x0, " ", 0x0, "%", 0x0, "0", 0x0, "8", 0x0, "x"
	DCB	0x0, " ", 0x0, "w", 0x0, "i", 0x0, "t", 0x0, "h", 0x0, " "
	DCB	0x0, "s", 0x0, "u", 0x0, "b", 0x0, "s", 0x0, "e", 0x0, "q"
	DCB	0x0, "u", 0x0, "e", 0x0, "n", 0x0, "t", 0x0, " ", 0x0, "n"
	DCB	0x0, "o", 0x0, "d", 0x0, "e", 0x0, " ", 0x0, "(", 0x0, "%"
	DCB	0x0, "0", 0x0, "8", 0x0, "x", 0x0, ")", 0x0, 0xd, 0x0, 0xa
	DCB	0x0, 0x0, 0x0				; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1HA@MCEDHLD@?$AAH?$AAe?$AAa?$AAp?$AA?3?$AA?3?$AAF?$AAr?$AAe?$AAe?$AA?5?$AA?9?$AA?5?$AAm?$AAe?$AAr?$AAg?$AAi?$AAn?$AAg?$AA?5?$AAn?$AAo?$AAd?$AAe?$AA?5?$AA?$CF?$AA0?$AA8?$AAx?$AA?5?$AAw@| DCB "H"
	DCB	0x0, "e", 0x0, "a", 0x0, "p", 0x0, ":", 0x0, ":", 0x0, "F"
	DCB	0x0, "r", 0x0, "e", 0x0, "e", 0x0, " ", 0x0, "-", 0x0, " "
	DCB	0x0, "m", 0x0, "e", 0x0, "r", 0x0, "g", 0x0, "i", 0x0, "n"
	DCB	0x0, "g", 0x0, " ", 0x0, "n", 0x0, "o", 0x0, "d", 0x0, "e"
	DCB	0x0, " ", 0x0, "%", 0x0, "0", 0x0, "8", 0x0, "x", 0x0, " "
	DCB	0x0, "w", 0x0, "i", 0x0, "t", 0x0, "h", 0x0, " ", 0x0, "p"
	DCB	0x0, "r", 0x0, "i", 0x0, "o", 0x0, "r", 0x0, " ", 0x0, "n"
	DCB	0x0, "o", 0x0, "d", 0x0, "e", 0x0, " ", 0x0, "(", 0x0, "%"
	DCB	0x0, "0", 0x0, "8", 0x0, "x", 0x0, ")", 0x0, 0xd, 0x0, 0xa
	DCB	0x0, 0x0, 0x0				; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1DM@LBIMDIFJ@?$AAH?$AAe?$AAa?$AAp?$AA?3?$AA?3?$AAF?$AAr?$AAe?$AAe?$AA?5?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx?$AA?5?$AA?$CI?$AAs?$AAi?$AAz?$AAe?$AA?$DN?$AA?$CF?$AAd?$AA?$CJ?$AA?$AN?$AA?6?$AA?$AA@| DCB "H"
	DCB	0x0, "e", 0x0, "a", 0x0, "p", 0x0, ":", 0x0, ":", 0x0, "F"
	DCB	0x0, "r", 0x0, "e", 0x0, "e", 0x0, " ", 0x0, "0", 0x0, "x"
	DCB	0x0, "%", 0x0, "0", 0x0, "8", 0x0, "x", 0x0, " ", 0x0, "("
	DCB	0x0, "s", 0x0, "i", 0x0, "z", 0x0, "e", 0x0, "=", 0x0, "%"
	DCB	0x0, "d", 0x0, ")", 0x0, 0xd, 0x0, 0xa, 0x0, 0x0, 0x0 ; `string'
; Function compile flags: /Odtp

  005f0			 AREA	 |.text|, CODE, ARM

  005f0		 |?Free@Heap@@QAAXXZ| PROC		; Heap::Free

; 168  : {

  005f0		 |$LN17@Free|
  005f0	e1a0c00d	 mov         r12, sp
  005f4	e92d0001	 stmdb       sp!, {r0}
  005f8	e92d5000	 stmdb       sp!, {r12, lr}
  005fc	e24dd034	 sub         sp, sp, #0x34
  00600		 |$M35728|

; 169  :     Heap *pMerge;
; 170  :     Heap *pNode = this;

  00600	e59d303c	 ldr         r3, [sp, #0x3C]
  00604	e58d3000	 str         r3, [sp]

; 171  : 
; 172  :     DEBUGMSG(ZONE_HEAP,(TEXT("Heap::Free 0x%08x (size=%d)\r\n"),pNode,pNode->m_nSize));

  00608	ea000008	 b           |$LN5@Free|
  0060c	e59d3000	 ldr         r3, [sp]
  00610	e283300c	 add         r3, r3, #0xC
  00614	e5932000	 ldr         r2, [r3]
  00618	e59d1000	 ldr         r1, [sp]
  0061c	e59f016c	 ldr         r0, [pc, #0x16C]
  00620	eb000000	 bl          NKDbgPrintfW
  00624	e3a03001	 mov         r3, #1
  00628	e58d3018	 str         r3, [sp, #0x18]
  0062c	ea000001	 b           |$LN6@Free|
  00630		 |$LN5@Free|
  00630	e3a03000	 mov         r3, #0
  00634	e58d3018	 str         r3, [sp, #0x18]
  00638		 |$LN6@Free|

; 173  : 
; 174  :     pNode->m_fUsed = 0;

  00638	e59d3000	 ldr         r3, [sp]
  0063c	e2832010	 add         r2, r3, #0x10
  00640	e3a03000	 mov         r3, #0
  00644	e5823000	 str         r3, [r2]

; 175  :     pMerge = pNode->m_pPrev;

  00648	e59d3000	 ldr         r3, [sp]
  0064c	e2833004	 add         r3, r3, #4
  00650	e5933000	 ldr         r3, [r3]
  00654	e58d3004	 str         r3, [sp, #4]

; 176  : 
; 177  :     if( pMerge && !pMerge->m_fUsed )

  00658	e59d3004	 ldr         r3, [sp, #4]
  0065c	e3530000	 cmp         r3, #0
  00660	0a000020	 beq         |$LN2@Free|
  00664	e59d3004	 ldr         r3, [sp, #4]
  00668	e2833010	 add         r3, r3, #0x10
  0066c	e5933000	 ldr         r3, [r3]
  00670	e3530000	 cmp         r3, #0
  00674	1a00001b	 bne         |$LN2@Free|

; 178  :     {
; 179  :         DEBUGMSG(ZONE_HEAP,(TEXT("Heap::Free - merging node %08x with prior node (%08x)\r\n"),
; 180  :             pNode, pMerge ));

  00678	ea000006	 b           |$LN7@Free|
  0067c	e59d2004	 ldr         r2, [sp, #4]
  00680	e59d1000	 ldr         r1, [sp]
  00684	e59f0100	 ldr         r0, [pc, #0x100]
  00688	eb000000	 bl          NKDbgPrintfW
  0068c	e3a03001	 mov         r3, #1
  00690	e58d301c	 str         r3, [sp, #0x1C]
  00694	ea000001	 b           |$LN8@Free|
  00698		 |$LN7@Free|
  00698	e3a03000	 mov         r3, #0
  0069c	e58d301c	 str         r3, [sp, #0x1C]
  006a0		 |$LN8@Free|

; 181  :         delete pNode;           // Merge pNode with prior node

  006a0	e59d3000	 ldr         r3, [sp]
  006a4	e58d300c	 str         r3, [sp, #0xC]
  006a8	e59d300c	 ldr         r3, [sp, #0xC]
  006ac	e58d3008	 str         r3, [sp, #8]
  006b0	e59d3008	 ldr         r3, [sp, #8]
  006b4	e3530000	 cmp         r3, #0
  006b8	0a000006	 beq         |$LN9@Free|
  006bc	e3a01001	 mov         r1, #1
  006c0	e59d0008	 ldr         r0, [sp, #8]
  006c4	eb000000	 bl          |??_GHeap@@QAAPAXI@Z|
  006c8	e58d0020	 str         r0, [sp, #0x20]
  006cc	e59d3020	 ldr         r3, [sp, #0x20]
  006d0	e58d3024	 str         r3, [sp, #0x24]
  006d4	ea000001	 b           |$LN10@Free|
  006d8		 |$LN9@Free|
  006d8	e3a03000	 mov         r3, #0
  006dc	e58d3024	 str         r3, [sp, #0x24]
  006e0		 |$LN10@Free|

; 182  :         pNode = pMerge;

  006e0	e59d3004	 ldr         r3, [sp, #4]
  006e4	e58d3000	 str         r3, [sp]
  006e8		 |$LN2@Free|

; 183  :     }
; 184  :     pMerge = pNode->m_pNext;

  006e8	e59d3000	 ldr         r3, [sp]
  006ec	e5933000	 ldr         r3, [r3]
  006f0	e58d3004	 str         r3, [sp, #4]

; 185  : 
; 186  :     if( pMerge && !pMerge->m_fUsed )

  006f4	e59d3004	 ldr         r3, [sp, #4]
  006f8	e3530000	 cmp         r3, #0
  006fc	0a00001e	 beq         |$LN1@Free|
  00700	e59d3004	 ldr         r3, [sp, #4]
  00704	e2833010	 add         r3, r3, #0x10
  00708	e5933000	 ldr         r3, [r3]
  0070c	e3530000	 cmp         r3, #0
  00710	1a000019	 bne         |$LN1@Free|

; 187  :     {
; 188  :         DEBUGMSG(ZONE_HEAP,(TEXT("Heap::Free - merging %08x with subsequent node (%08x)\r\n"),
; 189  :             pNode, pMerge ));

  00714	ea000006	 b           |$LN11@Free|
  00718	e59d2004	 ldr         r2, [sp, #4]
  0071c	e59d1000	 ldr         r1, [sp]
  00720	e59f0060	 ldr         r0, [pc, #0x60]
  00724	eb000000	 bl          NKDbgPrintfW
  00728	e3a03001	 mov         r3, #1
  0072c	e58d3028	 str         r3, [sp, #0x28]
  00730	ea000001	 b           |$LN12@Free|
  00734		 |$LN11@Free|
  00734	e3a03000	 mov         r3, #0
  00738	e58d3028	 str         r3, [sp, #0x28]
  0073c		 |$LN12@Free|

; 190  :         delete pMerge;          // Merge pNode with subsequent node

  0073c	e59d3004	 ldr         r3, [sp, #4]
  00740	e58d3014	 str         r3, [sp, #0x14]
  00744	e59d3014	 ldr         r3, [sp, #0x14]
  00748	e58d3010	 str         r3, [sp, #0x10]
  0074c	e59d3010	 ldr         r3, [sp, #0x10]
  00750	e3530000	 cmp         r3, #0
  00754	0a000006	 beq         |$LN13@Free|
  00758	e3a01001	 mov         r1, #1
  0075c	e59d0010	 ldr         r0, [sp, #0x10]
  00760	eb000000	 bl          |??_GHeap@@QAAPAXI@Z|
  00764	e58d002c	 str         r0, [sp, #0x2C]
  00768	e59d302c	 ldr         r3, [sp, #0x2C]
  0076c	e58d3030	 str         r3, [sp, #0x30]
  00770	ea000001	 b           |$LN14@Free|
  00774		 |$LN13@Free|
  00774	e3a03000	 mov         r3, #0
  00778	e58d3030	 str         r3, [sp, #0x30]
  0077c		 |$LN14@Free|
  0077c		 |$LN1@Free|

; 191  :     }
; 192  : }

  0077c	e28dd034	 add         sp, sp, #0x34
  00780	e89d6000	 ldmia       sp, {sp, lr}
  00784	e12fff1e	 bx          lr
  00788		 |$LN18@Free|
  00788		 |$LN19@Free|
  00788	00000000	 DCD         |??_C@_1HA@PBJAGEFK@?$AAH?$AAe?$AAa?$AAp?$AA?3?$AA?3?$AAF?$AAr?$AAe?$AAe?$AA?5?$AA?9?$AA?5?$AAm?$AAe?$AAr?$AAg?$AAi?$AAn?$AAg?$AA?5?$AA?$CF?$AA0?$AA8?$AAx?$AA?5?$AAw?$AAi?$AAt?$AAh?$AA?5?$AAs@|
  0078c		 |$LN20@Free|
  0078c	00000000	 DCD         |??_C@_1HA@MCEDHLD@?$AAH?$AAe?$AAa?$AAp?$AA?3?$AA?3?$AAF?$AAr?$AAe?$AAe?$AA?5?$AA?9?$AA?5?$AAm?$AAe?$AAr?$AAg?$AAi?$AAn?$AAg?$AA?5?$AAn?$AAo?$AAd?$AAe?$AA?5?$AA?$CF?$AA0?$AA8?$AAx?$AA?5?$AAw@|
  00790		 |$LN21@Free|
  00790	00000000	 DCD         |??_C@_1DM@LBIMDIFJ@?$AAH?$AAe?$AAa?$AAp?$AA?3?$AA?3?$AAF?$AAr?$AAe?$AAe?$AA?5?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx?$AA?5?$AA?$CI?$AAs?$AAi?$AAz?$AAe?$AA?$DN?$AA?$CF?$AAd?$AA?$CJ?$AA?$AN?$AA?6?$AA?$AA@|
  00794		 |$M35729|

			 ENDP  ; |?Free@Heap@@QAAXXZ|, Heap::Free

	END
