; Listing generated by Microsoft (R) Optimizing Compiler Version 14.01.60511.01 

	TTL	C:\WINCE600\PLATFORM\COMMON\SRC\SOC\COMMON_TI_V1\COMMON_TI\EMAC\Emac_Phy.c
	CODE32

  00000			 AREA	 |.drectve|, DRECTVE
	DCB	"-defaultlib:LIBCMT "
	DCB	"-defaultlib:OLDNAMES "


  00000			 AREA	 |.data|, DATA
	 COMMON	|f_pMdioRegs|, 0x4


  00000			 AREA	 |.rdata|, DATA, READONLY
|EdbgVendorIds| DCW 0x0
	DCW	0x0
	DCD	0x4033
	DCB	0x1
	DCB	"AD", 0x0
	DCW	0x1050
	DCW	0x940
	DCD	0x4005
	DCB	0x1
	DCB	"LS", 0x0
	DCW	0x1050
	DCW	0x940
	DCD	0x2078
	DCB	0x1
	DCB	"LS", 0x0
	DCW	0x10ec
	DCW	0x8029
	DCD	0xc0f0
	DCB	0x1
	DCB	"KS", 0x0
	DCW	0x10ec
	DCW	0x8129
	DCD	0x0
	DCB	0x4
	DCB	"RT", 0x0
	DCW	0x10ec
	DCW	0x8139
	DCD	0x900b
	DCB	0x4
	DCB	"RT", 0x0
	DCW	0x10ec
	DCW	0x8139
	DCD	0xd0c9
	DCB	0x4
	DCB	"RT", 0x0
	DCW	0x10ec
	DCW	0x8139
	DCD	0xe04c
	DCB	0x4
	DCB	"RT", 0x0
	DCW	0x1186
	DCW	0x1300
	DCD	0x50ba
	DCB	0x4
	DCB	"DL", 0x0
	DCW	0x100b
	DCW	0x20
	DCD	0xa0cc
	DCB	0x5
	DCB	"NG", 0x0
	DCW	0x10b7
	DCW	0x9050
	DCD	0x6008
	DCB	0x6
	DCB	"3C", 0x0
	DCW	0x10b7
	DCW	0x9200
	DCD	0x476
	DCB	0x6
	DCB	"3C", 0x0
	EXPORT	|ReadPhyRegister|

  00000			 AREA	 |.pdata|, PDATA
|$T50108| DCD	|$LN9@ReadPhyReg|
	DCD	0x40002b04
; Function compile flags: /Odtp
; File c:\wince600\platform\common\src\soc\common_ti_v1\common_ti\emac\emac_phy.c

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |ReadPhyRegister| PROC

; 33   : {

  00000		 |$LN9@ReadPhyReg|
  00000	e1a0c00d	 mov         r12, sp
  00004	e92d0003	 stmdb       sp!, {r0, r1}
  00008	e92d5000	 stmdb       sp!, {r12, lr}
  0000c	e24dd004	 sub         sp, sp, #4
  00010		 |$M50105|
  00010		 |$LN4@ReadPhyReg|

; 34   :     /* Wait for any previous command to complete */ 
; 35   :     while ( (f_pMdioRegs->USERACCESS0 & MDIO_USERACCESS0_GO) != 0 )

  00010	e59f3090	 ldr         r3, [pc, #0x90]
  00014	e5933000	 ldr         r3, [r3]
  00018	e2833080	 add         r3, r3, #0x80
  0001c	e5933000	 ldr         r3, [r3]
  00020	e3130102	 tst         r3, #2, 2
  00024	0a000000	 beq         |$LN3@ReadPhyReg|

; 36   :     {
; 37   :     }

  00028	eafffff8	 b           |$LN4@ReadPhyReg|
  0002c		 |$LN3@ReadPhyReg|

; 38   :     f_pMdioRegs->USERACCESS0 =(
; 39   :                                 (MDIO_USERACCESS0_GO) |
; 40   :                                 (MDIO_USERACCESS0_WRITE_READ)|
; 41   :                                 ((RegNum & 0x1F) << 21) |
; 42   :                                 ((PhyAddr & 0x1F) << 16)
; 43   :                                 );

  0002c	e59d3010	 ldr         r3, [sp, #0x10]
  00030	e203301f	 and         r3, r3, #0x1F
  00034	e1a03a83	 mov         r3, r3, lsl #21
  00038	e3832102	 orr         r2, r3, #2, 2
  0003c	e59d300c	 ldr         r3, [sp, #0xC]
  00040	e203301f	 and         r3, r3, #0x1F
  00044	e1a03803	 mov         r3, r3, lsl #16
  00048	e1822003	 orr         r2, r2, r3
  0004c	e59f3054	 ldr         r3, [pc, #0x54]
  00050	e5933000	 ldr         r3, [r3]
  00054	e2833080	 add         r3, r3, #0x80
  00058	e5832000	 str         r2, [r3]
  0005c		 |$LN2@ReadPhyReg|

; 44   :     /* Wait for command to complete */
; 45   : 
; 46   :     while ( (f_pMdioRegs->USERACCESS0 & MDIO_USERACCESS0_GO) != 0 )

  0005c	e59f3044	 ldr         r3, [pc, #0x44]
  00060	e5933000	 ldr         r3, [r3]
  00064	e2833080	 add         r3, r3, #0x80
  00068	e5933000	 ldr         r3, [r3]
  0006c	e3130102	 tst         r3, #2, 2
  00070	0a000000	 beq         |$LN1@ReadPhyReg|

; 47   :     {
; 48   :     }

  00074	eafffff8	 b           |$LN2@ReadPhyReg|
  00078		 |$LN1@ReadPhyReg|

; 49   : 
; 50   :     return (f_pMdioRegs->USERACCESS0 & 0xFFFF);

  00078	e59f3028	 ldr         r3, [pc, #0x28]
  0007c	e5933000	 ldr         r3, [r3]
  00080	e2833080	 add         r3, r3, #0x80
  00084	e5932000	 ldr         r2, [r3]
  00088	e3a03cff	 mov         r3, #0xFF, 24
  0008c	e38330ff	 orr         r3, r3, #0xFF
  00090	e0023003	 and         r3, r2, r3
  00094	e58d3000	 str         r3, [sp]

; 51   : }

  00098	e59d0000	 ldr         r0, [sp]
  0009c	e28dd004	 add         sp, sp, #4
  000a0	e89d6000	 ldmia       sp, {sp, lr}
  000a4	e12fff1e	 bx          lr
  000a8		 |$LN10@ReadPhyReg|
  000a8		 |$LN11@ReadPhyReg|
  000a8	00000000	 DCD         |f_pMdioRegs|
  000ac		 |$M50106|

			 ENDP  ; |ReadPhyRegister|

	EXPORT	|WritePhyRegister|

  00008			 AREA	 |.pdata|, PDATA
|$T50115| DCD	|$LN7@WritePhyRe|
	DCD	0x40001e03
; Function compile flags: /Odtp

  000ac			 AREA	 |.text|, CODE, ARM

  000ac		 |WritePhyRegister| PROC

; 69   : {

  000ac		 |$LN7@WritePhyRe|
  000ac	e1a0c00d	 mov         r12, sp
  000b0	e92d0007	 stmdb       sp!, {r0 - r2}
  000b4	e92d5000	 stmdb       sp!, {r12, lr}
  000b8		 |$M50112|
  000b8		 |$LN2@WritePhyRe|

; 70   :     /* Wait for User access register to be ready */
; 71   : 
; 72   :     while ( (f_pMdioRegs->USERACCESS0 & MDIO_USERACCESS0_GO) != 0 )

  000b8	e59f3060	 ldr         r3, [pc, #0x60]
  000bc	e5933000	 ldr         r3, [r3]
  000c0	e2833080	 add         r3, r3, #0x80
  000c4	e5933000	 ldr         r3, [r3]
  000c8	e3130102	 tst         r3, #2, 2
  000cc	0a000000	 beq         |$LN1@WritePhyRe|

; 73   :     {
; 74   :     }

  000d0	eafffff8	 b           |$LN2@WritePhyRe|
  000d4		 |$LN1@WritePhyRe|

; 75   : 
; 76   :     f_pMdioRegs->USERACCESS0 =(
; 77   :                                 (MDIO_USERACCESS0_GO) |
; 78   :                                 (MDIO_USERACCESS0_WRITE_WRITE) |
; 79   :                                 ((RegNum & 0x1F) << 21) |
; 80   :                                 ((PhyAddr & 0x1F) << 16) |
; 81   :                                 (Data & 0xFFFF)
; 82   :                                 );

  000d4	e59d300c	 ldr         r3, [sp, #0xC]
  000d8	e203301f	 and         r3, r3, #0x1F
  000dc	e1a03a83	 mov         r3, r3, lsl #21
  000e0	e3832103	 orr         r2, r3, #3, 2
  000e4	e59d3008	 ldr         r3, [sp, #8]
  000e8	e203301f	 and         r3, r3, #0x1F
  000ec	e1a03803	 mov         r3, r3, lsl #16
  000f0	e1821003	 orr         r1, r2, r3
  000f4	e59d2010	 ldr         r2, [sp, #0x10]
  000f8	e3a03cff	 mov         r3, #0xFF, 24
  000fc	e38330ff	 orr         r3, r3, #0xFF
  00100	e0023003	 and         r3, r2, r3
  00104	e1812003	 orr         r2, r1, r3
  00108	e59f3010	 ldr         r3, [pc, #0x10]
  0010c	e5933000	 ldr         r3, [r3]
  00110	e2833080	 add         r3, r3, #0x80
  00114	e5832000	 str         r2, [r3]

; 83   : 
; 84   : }

  00118	e89d6000	 ldmia       sp, {sp, lr}
  0011c	e12fff1e	 bx          lr
  00120		 |$LN8@WritePhyRe|
  00120		 |$LN9@WritePhyRe|
  00120	00000000	 DCD         |f_pMdioRegs|
  00124		 |$M50113|

			 ENDP  ; |WritePhyRegister|

	EXPORT	|??_C@_1CE@LENCGGPM@?$AA?$DM?$AA?9?$AA?9?$AA?9?$AAP?$AAH?$AAY?$AAF?$AAi?$AAn?$AAd?$AAL?$AAi?$AAn?$AAk?$AA?$AN?$AA?6?$AA?$AA@| [ DATA ] ; `string'
	EXPORT	|??_C@_1EO@CADGDKPE@?$AAR?$AAe?$AAg?$AAv?$AAa?$AAl?$AA?5?$AA?$CF?$AAx?$AA?0?$AA?5?$AAP?$AAh?$AAy?$AAA?$AAd?$AAd?$AAr?$AA?5?$AA?$CF?$AAu?$AA?0?$AA?5?$AAL?$AAi?$AAn?$AAk?$AAS?$AAt?$AAa?$AAt?$AAe@| [ DATA ] ; `string'
	EXPORT	|??_C@_1CG@OAGPBBIM@?$AA?9?$AA?9?$AA?9?$AA?$DO?$AAP?$AAH?$AAY?$AAF?$AAi?$AAn?$AAd?$AAL?$AAi?$AAn?$AAk?$AA?5?$AA?$AN?$AA?6?$AA?$AA@| [ DATA ] ; `string'
	EXPORT	|PhyFindLink|
	IMPORT	|NKDbgPrintfW|
	IMPORT	|dpCurSettings|

  00010			 AREA	 |.pdata|, PDATA
|$T50129| DCD	|$LN17@PhyFindLin|
	DCD	0x40007204

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1CE@LENCGGPM@?$AA?$DM?$AA?9?$AA?9?$AA?9?$AAP?$AAH?$AAY?$AAF?$AAi?$AAn?$AAd?$AAL?$AAi?$AAn?$AAk?$AA?$AN?$AA?6?$AA?$AA@| DCB "<"
	DCB	0x0, "-", 0x0, "-", 0x0, "-", 0x0, "P", 0x0, "H", 0x0, "Y"
	DCB	0x0, "F", 0x0, "i", 0x0, "n", 0x0, "d", 0x0, "L", 0x0, "i"
	DCB	0x0, "n", 0x0, "k", 0x0, 0xd, 0x0, 0xa, 0x0, 0x0, 0x0 ; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1EO@CADGDKPE@?$AAR?$AAe?$AAg?$AAv?$AAa?$AAl?$AA?5?$AA?$CF?$AAx?$AA?0?$AA?5?$AAP?$AAh?$AAy?$AAA?$AAd?$AAd?$AAr?$AA?5?$AA?$CF?$AAu?$AA?0?$AA?5?$AAL?$AAi?$AAn?$AAk?$AAS?$AAt?$AAa?$AAt?$AAe@| DCB "R"
	DCB	0x0, "e", 0x0, "g", 0x0, "v", 0x0, "a", 0x0, "l", 0x0, " "
	DCB	0x0, "%", 0x0, "x", 0x0, ",", 0x0, " ", 0x0, "P", 0x0, "h"
	DCB	0x0, "y", 0x0, "A", 0x0, "d", 0x0, "d", 0x0, "r", 0x0, " "
	DCB	0x0, "%", 0x0, "u", 0x0, ",", 0x0, " ", 0x0, "L", 0x0, "i"
	DCB	0x0, "n", 0x0, "k", 0x0, "S", 0x0, "t", 0x0, "a", 0x0, "t"
	DCB	0x0, "e", 0x0, " ", 0x0, "%", 0x0, "d", 0x0, " ", 0x0, 0xd
	DCB	0x0, 0xa, 0x0, 0x0, 0x0			; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1CG@OAGPBBIM@?$AA?9?$AA?9?$AA?9?$AA?$DO?$AAP?$AAH?$AAY?$AAF?$AAi?$AAn?$AAd?$AAL?$AAi?$AAn?$AAk?$AA?5?$AA?$AN?$AA?6?$AA?$AA@| DCB "-"
	DCB	0x0, "-", 0x0, "-", 0x0, ">", 0x0, "P", 0x0, "H", 0x0, "Y"
	DCB	0x0, "F", 0x0, "i", 0x0, "n", 0x0, "d", 0x0, "L", 0x0, "i"
	DCB	0x0, "n", 0x0, "k", 0x0, " ", 0x0, 0xd, 0x0, 0xa, 0x0, 0x0
	DCB	0x0					; `string'
; Function compile flags: /Odtp

  00124			 AREA	 |.text|, CODE, ARM

  00124		 |PhyFindLink| PROC

; 96   : {

  00124		 |$LN17@PhyFindLin|
  00124	e1a0c00d	 mov         r12, sp
  00128	e92d0001	 stmdb       sp!, {r0}
  0012c	e92d5000	 stmdb       sp!, {r12, lr}
  00130	e24dd024	 sub         sp, sp, #0x24
  00134		 |$M50126|

; 97   :     UINT32 ActPhy    = 0;

  00134	e3a03000	 mov         r3, #0
  00138	e58d300c	 str         r3, [sp, #0xC]

; 98   :     UINT32 LinkState = 0;   /* To maintain link state  */

  0013c	e3a03000	 mov         r3, #0
  00140	e58d3008	 str         r3, [sp, #8]

; 99   :     UINT32 PhyAddr   = 0;   /* Phy number to be probed */

  00144	e3a03000	 mov         r3, #0
  00148	e58d3004	 str         r3, [sp, #4]

; 100  :     UINT32 Regval    = 0;

  0014c	e3a03000	 mov         r3, #0
  00150	e58d3000	 str         r3, [sp]

; 101  : 
; 102  :     f_pMdioRegs = Adapter->m_pMdioRegsBase;

  00154	e59d302c	 ldr         r3, [sp, #0x2C]
  00158	e2833010	 add         r3, r3, #0x10
  0015c	e5932000	 ldr         r2, [r3]
  00160	e59f3180	 ldr         r3, [pc, #0x180]
  00164	e5832000	 str         r2, [r3]

; 103  :     
; 104  :     ActPhy = f_pMdioRegs->ALIVE;

  00168	e59f3178	 ldr         r3, [pc, #0x178]
  0016c	e5933000	 ldr         r3, [r3]
  00170	e2833008	 add         r3, r3, #8
  00174	e5933000	 ldr         r3, [r3]
  00178	e58d300c	 str         r3, [sp, #0xC]

; 105  :     
; 106  :     DEBUGMSG(DBG_FUNC,(L"--->PHYFindLink \r\n")); 

  0017c	e59f3158	 ldr         r3, [pc, #0x158]
  00180	e5933440	 ldr         r3, [r3, #0x440]
  00184	e3130080	 tst         r3, #0x80
  00188	0a000004	 beq         |$LN9@PhyFindLin|
  0018c	e59f0150	 ldr         r0, [pc, #0x150]
  00190	eb000000	 bl          NKDbgPrintfW
  00194	e3a03001	 mov         r3, #1
  00198	e58d3014	 str         r3, [sp, #0x14]
  0019c	ea000001	 b           |$LN10@PhyFindLin|
  001a0		 |$LN9@PhyFindLin|
  001a0	e3a03000	 mov         r3, #0
  001a4	e58d3014	 str         r3, [sp, #0x14]
  001a8		 |$LN10@PhyFindLin|
  001a8		 |$LN6@PhyFindLin|

; 107  :     
; 108  :     while(ActPhy != 0)

  001a8	e59d300c	 ldr         r3, [sp, #0xC]
  001ac	e3530000	 cmp         r3, #0
  001b0	0a000033	 beq         |$LN5@PhyFindLin|
  001b4		 |$LN4@PhyFindLin|

; 109  :     {
; 110  :         /* find the next active phy */
; 111  :         while (0 == (ActPhy & BIT(0)))

  001b4	e59d300c	 ldr         r3, [sp, #0xC]
  001b8	e3130001	 tst         r3, #1
  001bc	1a000006	 bne         |$LN3@PhyFindLin|

; 112  :         {
; 113  :             PhyAddr++;

  001c0	e59d3004	 ldr         r3, [sp, #4]
  001c4	e2833001	 add         r3, r3, #1
  001c8	e58d3004	 str         r3, [sp, #4]

; 114  :             ActPhy >>= 1;

  001cc	e59d300c	 ldr         r3, [sp, #0xC]
  001d0	e1a030a3	 mov         r3, r3, lsr #1
  001d4	e58d300c	 str         r3, [sp, #0xC]

; 115  :         }

  001d8	eafffff5	 b           |$LN4@PhyFindLin|
  001dc		 |$LN3@PhyFindLin|

; 116  : 
; 117  :         /* Read the status register from Phy */
; 118  :         Regval = ReadPhyRegister(PhyAddr, MII_STATUS_REG);

  001dc	e3a01001	 mov         r1, #1
  001e0	e59d0004	 ldr         r0, [sp, #4]
  001e4	eb000000	 bl          ReadPhyRegister
  001e8	e58d0018	 str         r0, [sp, #0x18]
  001ec	e59d3018	 ldr         r3, [sp, #0x18]
  001f0	e58d3000	 str         r3, [sp]

; 119  :         DEBUGMSG(DBG_INFO, (L"Regval %x, PhyAddr %u, LinkState %d \r\n",Regval, PhyAddr, LinkState));

  001f4	e59f30e0	 ldr         r3, [pc, #0xE0]
  001f8	e5933440	 ldr         r3, [r3, #0x440]
  001fc	e3130040	 tst         r3, #0x40
  00200	0a000007	 beq         |$LN11@PhyFindLin|
  00204	e59d3008	 ldr         r3, [sp, #8]
  00208	e59d2004	 ldr         r2, [sp, #4]
  0020c	e59d1000	 ldr         r1, [sp]
  00210	e59f00c8	 ldr         r0, [pc, #0xC8]
  00214	eb000000	 bl          NKDbgPrintfW
  00218	e3a03001	 mov         r3, #1
  0021c	e58d301c	 str         r3, [sp, #0x1C]
  00220	ea000001	 b           |$LN12@PhyFindLin|
  00224		 |$LN11@PhyFindLin|
  00224	e3a03000	 mov         r3, #0
  00228	e58d301c	 str         r3, [sp, #0x1C]
  0022c		 |$LN12@PhyFindLin|

; 120  : 
; 121  :         /* update link status mask */
; 122  :         if (Regval != 0xFFFF)

  0022c	e59d2000	 ldr         r2, [sp]
  00230	e3a03cff	 mov         r3, #0xFF, 24
  00234	e38330ff	 orr         r3, r3, #0xFF
  00238	e1520003	 cmp         r2, r3
  0023c	0a000009	 beq         |$LN2@PhyFindLin|

; 123  :         {
; 124  : 			if (Regval & PHY_LINK_STATUS)

  00240	e59d3000	 ldr         r3, [sp]
  00244	e3130004	 tst         r3, #4
  00248	0a000005	 beq         |$LN1@PhyFindLin|

; 125  : 			{
; 126  : 				LinkState |= 1 << PhyAddr;

  0024c	e59d2004	 ldr         r2, [sp, #4]
  00250	e3a03001	 mov         r3, #1
  00254	e1a02213	 mov         r2, r3, lsl r2
  00258	e59d3008	 ldr         r3, [sp, #8]
  0025c	e1833002	 orr         r3, r3, r2
  00260	e58d3008	 str         r3, [sp, #8]
  00264		 |$LN1@PhyFindLin|

; 127  : 			}
; 128  :             break;

  00264	ea000006	 b           |$LN5@PhyFindLin|
  00268		 |$LN2@PhyFindLin|

; 129  :         }
; 130  : 
; 131  :         /* go to next phy */
; 132  :         PhyAddr++;

  00268	e59d3004	 ldr         r3, [sp, #4]
  0026c	e2833001	 add         r3, r3, #1
  00270	e58d3004	 str         r3, [sp, #4]

; 133  :         ActPhy >>= 1;

  00274	e59d300c	 ldr         r3, [sp, #0xC]
  00278	e1a030a3	 mov         r3, r3, lsr #1
  0027c	e58d300c	 str         r3, [sp, #0xC]

; 134  :     }

  00280	eaffffc8	 b           |$LN6@PhyFindLin|
  00284		 |$LN5@PhyFindLin|

; 135  : 
; 136  : 	Adapter->m_ActivePhy = PhyAddr;

  00284	e59d302c	 ldr         r3, [sp, #0x2C]
  00288	e2832f6a	 add         r2, r3, #0x6A, 30
  0028c	e59d3004	 ldr         r3, [sp, #4]
  00290	e5823000	 str         r3, [r2]

; 137  : 
; 138  :     DEBUGMSG(DBG_FUNC, (L"<---PHYFindLink\r\n")); 

  00294	e59f3040	 ldr         r3, [pc, #0x40]
  00298	e5933440	 ldr         r3, [r3, #0x440]
  0029c	e3130080	 tst         r3, #0x80
  002a0	0a000004	 beq         |$LN13@PhyFindLin|
  002a4	e59f002c	 ldr         r0, [pc, #0x2C]
  002a8	eb000000	 bl          NKDbgPrintfW
  002ac	e3a03001	 mov         r3, #1
  002b0	e58d3020	 str         r3, [sp, #0x20]
  002b4	ea000001	 b           |$LN14@PhyFindLin|
  002b8		 |$LN13@PhyFindLin|
  002b8	e3a03000	 mov         r3, #0
  002bc	e58d3020	 str         r3, [sp, #0x20]
  002c0		 |$LN14@PhyFindLin|

; 139  : 
; 140  :     return (LinkState);

  002c0	e59d3008	 ldr         r3, [sp, #8]
  002c4	e58d3010	 str         r3, [sp, #0x10]

; 141  : }

  002c8	e59d0010	 ldr         r0, [sp, #0x10]
  002cc	e28dd024	 add         sp, sp, #0x24
  002d0	e89d6000	 ldmia       sp, {sp, lr}
  002d4	e12fff1e	 bx          lr
  002d8		 |$LN18@PhyFindLin|
  002d8		 |$LN19@PhyFindLin|
  002d8	00000000	 DCD         |??_C@_1CE@LENCGGPM@?$AA?$DM?$AA?9?$AA?9?$AA?9?$AAP?$AAH?$AAY?$AAF?$AAi?$AAn?$AAd?$AAL?$AAi?$AAn?$AAk?$AA?$AN?$AA?6?$AA?$AA@|
  002dc		 |$LN20@PhyFindLin|
  002dc	00000000	 DCD         |dpCurSettings|
  002e0		 |$LN21@PhyFindLin|
  002e0	00000000	 DCD         |??_C@_1EO@CADGDKPE@?$AAR?$AAe?$AAg?$AAv?$AAa?$AAl?$AA?5?$AA?$CF?$AAx?$AA?0?$AA?5?$AAP?$AAh?$AAy?$AAA?$AAd?$AAd?$AAr?$AA?5?$AA?$CF?$AAu?$AA?0?$AA?5?$AAL?$AAi?$AAn?$AAk?$AAS?$AAt?$AAa?$AAt?$AAe@|
  002e4		 |$LN22@PhyFindLin|
  002e4	00000000	 DCD         |??_C@_1CG@OAGPBBIM@?$AA?9?$AA?9?$AA?9?$AA?$DO?$AAP?$AAH?$AAY?$AAF?$AAi?$AAn?$AAd?$AAL?$AAi?$AAn?$AAk?$AA?5?$AA?$AN?$AA?6?$AA?$AA@|
  002e8		 |$LN23@PhyFindLin|
  002e8	00000000	 DCD         |f_pMdioRegs|
  002ec		 |$M50127|

			 ENDP  ; |PhyFindLink|

	EXPORT	|??_C@_1GE@LMMFOHEG@?$AAL?$AAi?$AAn?$AAk?$AAC?$AAh?$AAa?$AAn?$AAg?$AAe?$AAI?$AAn?$AAt?$AAr?$AAH?$AAa?$AAn?$AAd?$AAl?$AAe?$AAr?$AA?5?$AAN?$AAD?$AAI?$AAS?$AA_?$AAS?$AAT?$AAA?$AAT?$AAU@| [ DATA ] ; `string'
	EXPORT	|??_C@_1GK@LCHFNNGH@?$AAL?$AAi?$AAn?$AAk?$AAC?$AAh?$AAa?$AAn?$AAg?$AAe?$AAI?$AAn?$AAt?$AAr?$AAH?$AAa?$AAn?$AAd?$AAl?$AAe?$AAr?$AA?5?$AAN?$AAD?$AAI?$AAS?$AA_?$AAS?$AAT?$AAA?$AAT?$AAU@| [ DATA ] ; `string'
	EXPORT	|??_C@_1FK@DBCHBNGD@?$AAL?$AAi?$AAn?$AAk?$AAC?$AAh?$AAa?$AAn?$AAg?$AAe?$AAI?$AAn?$AAt?$AAr?$AAH?$AAa?$AAn?$AAd?$AAl?$AAe?$AAr?$AA?9?$AA?9?$AA?$DO?$AAm?$AA_?$AAA?$AAc?$AAt?$AAi?$AAv?$AAe@| [ DATA ] ; `string'
	EXPORT	|LinkChangeIntrHandler|

  00018			 AREA	 |.pdata|, PDATA
|$T50146| DCD	|$LN13@LinkChange|
	DCD	0x40007604

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1GE@LMMFOHEG@?$AAL?$AAi?$AAn?$AAk?$AAC?$AAh?$AAa?$AAn?$AAg?$AAe?$AAI?$AAn?$AAt?$AAr?$AAH?$AAa?$AAn?$AAd?$AAl?$AAe?$AAr?$AA?5?$AAN?$AAD?$AAI?$AAS?$AA_?$AAS?$AAT?$AAA?$AAT?$AAU@| DCB "L"
	DCB	0x0, "i", 0x0, "n", 0x0, "k", 0x0, "C", 0x0, "h", 0x0, "a"
	DCB	0x0, "n", 0x0, "g", 0x0, "e", 0x0, "I", 0x0, "n", 0x0, "t"
	DCB	0x0, "r", 0x0, "H", 0x0, "a", 0x0, "n", 0x0, "d", 0x0, "l"
	DCB	0x0, "e", 0x0, "r", 0x0, " ", 0x0, "N", 0x0, "D", 0x0, "I"
	DCB	0x0, "S", 0x0, "_", 0x0, "S", 0x0, "T", 0x0, "A", 0x0, "T"
	DCB	0x0, "U", 0x0, "S", 0x0, "_", 0x0, "M", 0x0, "E", 0x0, "D"
	DCB	0x0, "I", 0x0, "A", 0x0, "_", 0x0, "C", 0x0, "O", 0x0, "N"
	DCB	0x0, "N", 0x0, "E", 0x0, "C", 0x0, "T", 0x0, 0xd, 0x0, 0xa
	DCB	0x0, 0x0, 0x0				; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1GK@LCHFNNGH@?$AAL?$AAi?$AAn?$AAk?$AAC?$AAh?$AAa?$AAn?$AAg?$AAe?$AAI?$AAn?$AAt?$AAr?$AAH?$AAa?$AAn?$AAd?$AAl?$AAe?$AAr?$AA?5?$AAN?$AAD?$AAI?$AAS?$AA_?$AAS?$AAT?$AAA?$AAT?$AAU@| DCB "L"
	DCB	0x0, "i", 0x0, "n", 0x0, "k", 0x0, "C", 0x0, "h", 0x0, "a"
	DCB	0x0, "n", 0x0, "g", 0x0, "e", 0x0, "I", 0x0, "n", 0x0, "t"
	DCB	0x0, "r", 0x0, "H", 0x0, "a", 0x0, "n", 0x0, "d", 0x0, "l"
	DCB	0x0, "e", 0x0, "r", 0x0, " ", 0x0, "N", 0x0, "D", 0x0, "I"
	DCB	0x0, "S", 0x0, "_", 0x0, "S", 0x0, "T", 0x0, "A", 0x0, "T"
	DCB	0x0, "U", 0x0, "S", 0x0, "_", 0x0, "M", 0x0, "E", 0x0, "D"
	DCB	0x0, "I", 0x0, "A", 0x0, "_", 0x0, "D", 0x0, "I", 0x0, "S"
	DCB	0x0, "C", 0x0, "O", 0x0, "N", 0x0, "N", 0x0, "E", 0x0, "C"
	DCB	0x0, "T", 0x0, 0xd, 0x0, 0xa, 0x0, 0x0, 0x0 ; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1FK@DBCHBNGD@?$AAL?$AAi?$AAn?$AAk?$AAC?$AAh?$AAa?$AAn?$AAg?$AAe?$AAI?$AAn?$AAt?$AAr?$AAH?$AAa?$AAn?$AAd?$AAl?$AAe?$AAr?$AA?9?$AA?9?$AA?$DO?$AAm?$AA_?$AAA?$AAc?$AAt?$AAi?$AAv?$AAe@| DCB "L"
	DCB	0x0, "i", 0x0, "n", 0x0, "k", 0x0, "C", 0x0, "h", 0x0, "a"
	DCB	0x0, "n", 0x0, "g", 0x0, "e", 0x0, "I", 0x0, "n", 0x0, "t"
	DCB	0x0, "r", 0x0, "H", 0x0, "a", 0x0, "n", 0x0, "d", 0x0, "l"
	DCB	0x0, "e", 0x0, "r", 0x0, "-", 0x0, "-", 0x0, ">", 0x0, "m"
	DCB	0x0, "_", 0x0, "A", 0x0, "c", 0x0, "t", 0x0, "i", 0x0, "v"
	DCB	0x0, "e", 0x0, "P", 0x0, "h", 0x0, "y", 0x0, " ", 0x0, "="
	DCB	0x0, " ", 0x0, "0", 0x0, "x", 0x0, "%", 0x0, "X", 0x0, 0xd
	DCB	0x0, 0xa, 0x0, 0x0, 0x0			; `string'
; Function compile flags: /Odtp

  002ec			 AREA	 |.text|, CODE, ARM

  002ec		 |LinkChangeIntrHandler| PROC

; 153  : {

  002ec		 |$LN13@LinkChange|
  002ec	e1a0c00d	 mov         r12, sp
  002f0	e92d0001	 stmdb       sp!, {r0}
  002f4	e92d5010	 stmdb       sp!, {r4, r12, lr}
  002f8	e24dd00c	 sub         sp, sp, #0xC
  002fc		 |$M50143|

; 154  :     f_pMdioRegs = Adapter->m_pMdioRegsBase;

  002fc	e59d3018	 ldr         r3, [sp, #0x18]
  00300	e2833010	 add         r3, r3, #0x10
  00304	e5932000	 ldr         r2, [r3]
  00308	e59f31a0	 ldr         r3, [pc, #0x1A0]
  0030c	e5832000	 str         r2, [r3]

; 155  :     
; 156  :     DEBUGMSG(DBG_FUNC, (L"LinkChangeIntrHandler-->m_ActivePhy = 0x%X\r\n", Adapter->m_ActivePhy));

  00310	e59f31a0	 ldr         r3, [pc, #0x1A0]
  00314	e5933440	 ldr         r3, [r3, #0x440]
  00318	e3130080	 tst         r3, #0x80
  0031c	0a000007	 beq         |$LN5@LinkChange|
  00320	e59d3018	 ldr         r3, [sp, #0x18]
  00324	e2833f6a	 add         r3, r3, #0x6A, 30
  00328	e5931000	 ldr         r1, [r3]
  0032c	e59f018c	 ldr         r0, [pc, #0x18C]
  00330	eb000000	 bl          NKDbgPrintfW
  00334	e3a03001	 mov         r3, #1
  00338	e58d3000	 str         r3, [sp]
  0033c	ea000001	 b           |$LN6@LinkChange|
  00340		 |$LN5@LinkChange|
  00340	e3a03000	 mov         r3, #0
  00344	e58d3000	 str         r3, [sp]
  00348		 |$LN6@LinkChange|

; 157  :     /* Extract the Link status for the active PHY */
; 158  :     if(0 == (f_pMdioRegs->LINK & (BIT(0) << Adapter->m_ActivePhy)))

  00348	e59f3160	 ldr         r3, [pc, #0x160]
  0034c	e5933000	 ldr         r3, [r3]
  00350	e283100c	 add         r1, r3, #0xC
  00354	e59d3018	 ldr         r3, [sp, #0x18]
  00358	e2833f6a	 add         r3, r3, #0x6A, 30
  0035c	e5932000	 ldr         r2, [r3]
  00360	e3a03001	 mov         r3, #1
  00364	e1a02213	 mov         r2, r3, lsl r2
  00368	e5913000	 ldr         r3, [r1]
  0036c	e1130002	 tst         r3, r2
  00370	1a000023	 bne         |$LN2@LinkChange|

; 159  :     {
; 160  :         Adapter->m_LinkStatus = DOWN;

  00374	e59d3018	 ldr         r3, [sp, #0x18]
  00378	e2832f69	 add         r2, r3, #0x69, 30
  0037c	e3a03001	 mov         r3, #1
  00380	e5823000	 str         r3, [r2]

; 161  :          /* Link was active last time, now it is down. */
; 162  :         NdisMIndicateStatus(Adapter->m_AdapterHandle,
; 163  :                                 NDIS_STATUS_MEDIA_DISCONNECT, 
; 164  :                                 (PVOID)0, 
; 165  :                                 0);

  00384	e3a03000	 mov         r3, #0
  00388	e3a02000	 mov         r2, #0
  0038c	e3a01131	 mov         r1, #0x31, 2
  00390	e3811801	 orr         r1, r1, #1, 16
  00394	e59d0018	 ldr         r0, [sp, #0x18]
  00398	e5900000	 ldr         r0, [r0]
  0039c	e59de018	 ldr         lr, [sp, #0x18]
  003a0	e59ee000	 ldr         lr, [lr]
  003a4	e28eee22	 add         lr, lr, #0x22, 28
  003a8	e59e4000	 ldr         r4, [lr]
  003ac	e1a0e00f	 mov         lr, pc
  003b0	e12fff14	 bx          r4

; 166  :                     
; 167  :         NdisMIndicateStatusComplete(Adapter->m_AdapterHandle);   

  003b4	e59d3018	 ldr         r3, [sp, #0x18]
  003b8	e5930000	 ldr         r0, [r3]
  003bc	e59d3018	 ldr         r3, [sp, #0x18]
  003c0	e5933000	 ldr         r3, [r3]
  003c4	e2833f89	 add         r3, r3, #0x89, 30
  003c8	e5933000	 ldr         r3, [r3]
  003cc	e1a0e00f	 mov         lr, pc
  003d0	e12fff13	 bx          r3

; 168  :         DEBUGMSG(DBG_INFO, (L"LinkChangeIntrHandler NDIS_STATUS_MEDIA_DISCONNECT\r\n"));

  003d4	e59f30dc	 ldr         r3, [pc, #0xDC]
  003d8	e5933440	 ldr         r3, [r3, #0x440]
  003dc	e3130040	 tst         r3, #0x40
  003e0	0a000004	 beq         |$LN7@LinkChange|
  003e4	e59f00d0	 ldr         r0, [pc, #0xD0]
  003e8	eb000000	 bl          NKDbgPrintfW
  003ec	e3a03001	 mov         r3, #1
  003f0	e58d3004	 str         r3, [sp, #4]
  003f4	ea000001	 b           |$LN8@LinkChange|
  003f8		 |$LN7@LinkChange|
  003f8	e3a03000	 mov         r3, #0
  003fc	e58d3004	 str         r3, [sp, #4]
  00400		 |$LN8@LinkChange|

; 169  :     } 
; 170  :     else 

  00400	ea000022	 b           |$LN1@LinkChange|
  00404		 |$LN2@LinkChange|

; 171  :     {   
; 172  :         Adapter->m_LinkStatus = UP;

  00404	e59d3018	 ldr         r3, [sp, #0x18]
  00408	e2832f69	 add         r2, r3, #0x69, 30
  0040c	e3a03000	 mov         r3, #0
  00410	e5823000	 str         r3, [r2]

; 173  :         /* Link was active last time, now it is up. */
; 174  :         NdisMIndicateStatus(Adapter->m_AdapterHandle,
; 175  :                                 NDIS_STATUS_MEDIA_CONNECT, 
; 176  :                                 (PVOID)0, 
; 177  :                                 0);

  00414	e3a03000	 mov         r3, #0
  00418	e3a02000	 mov         r2, #0
  0041c	e3a0112d	 mov         r1, #0x2D, 2
  00420	e3811801	 orr         r1, r1, #1, 16
  00424	e59d0018	 ldr         r0, [sp, #0x18]
  00428	e5900000	 ldr         r0, [r0]
  0042c	e59de018	 ldr         lr, [sp, #0x18]
  00430	e59ee000	 ldr         lr, [lr]
  00434	e28eee22	 add         lr, lr, #0x22, 28
  00438	e59e4000	 ldr         r4, [lr]
  0043c	e1a0e00f	 mov         lr, pc
  00440	e12fff14	 bx          r4

; 178  :         
; 179  :         NdisMIndicateStatusComplete(Adapter->m_AdapterHandle);

  00444	e59d3018	 ldr         r3, [sp, #0x18]
  00448	e5930000	 ldr         r0, [r3]
  0044c	e59d3018	 ldr         r3, [sp, #0x18]
  00450	e5933000	 ldr         r3, [r3]
  00454	e2833f89	 add         r3, r3, #0x89, 30
  00458	e5933000	 ldr         r3, [r3]
  0045c	e1a0e00f	 mov         lr, pc
  00460	e12fff13	 bx          r3

; 180  :         DEBUGMSG(DBG_INFO, (L"LinkChangeIntrHandler NDIS_STATUS_MEDIA_CONNECT\r\n"));

  00464	e59f304c	 ldr         r3, [pc, #0x4C]
  00468	e5933440	 ldr         r3, [r3, #0x440]
  0046c	e3130040	 tst         r3, #0x40
  00470	0a000004	 beq         |$LN9@LinkChange|
  00474	e59f0038	 ldr         r0, [pc, #0x38]
  00478	eb000000	 bl          NKDbgPrintfW
  0047c	e3a03001	 mov         r3, #1
  00480	e58d3008	 str         r3, [sp, #8]
  00484	ea000001	 b           |$LN10@LinkChange|
  00488		 |$LN9@LinkChange|
  00488	e3a03000	 mov         r3, #0
  0048c	e58d3008	 str         r3, [sp, #8]
  00490		 |$LN10@LinkChange|
  00490		 |$LN1@LinkChange|

; 181  :     } 
; 182  :     /* Acknowledge interrupt */
; 183  :     f_pMdioRegs->LINKINTMASKED = 0x1;

  00490	e59f3018	 ldr         r3, [pc, #0x18]
  00494	e5933000	 ldr         r3, [r3]
  00498	e2832014	 add         r2, r3, #0x14
  0049c	e3a03001	 mov         r3, #1
  004a0	e5823000	 str         r3, [r2]

; 184  : }

  004a4	e28dd00c	 add         sp, sp, #0xC
  004a8	e89d6010	 ldmia       sp, {r4, sp, lr}
  004ac	e12fff1e	 bx          lr
  004b0		 |$LN14@LinkChange|
  004b0		 |$LN15@LinkChange|
  004b0	00000000	 DCD         |f_pMdioRegs|
  004b4		 |$LN16@LinkChange|
  004b4	00000000	 DCD         |??_C@_1GE@LMMFOHEG@?$AAL?$AAi?$AAn?$AAk?$AAC?$AAh?$AAa?$AAn?$AAg?$AAe?$AAI?$AAn?$AAt?$AAr?$AAH?$AAa?$AAn?$AAd?$AAl?$AAe?$AAr?$AA?5?$AAN?$AAD?$AAI?$AAS?$AA_?$AAS?$AAT?$AAA?$AAT?$AAU@|
  004b8		 |$LN17@LinkChange|
  004b8	00000000	 DCD         |dpCurSettings|
  004bc		 |$LN18@LinkChange|
  004bc	00000000	 DCD         |??_C@_1GK@LCHFNNGH@?$AAL?$AAi?$AAn?$AAk?$AAC?$AAh?$AAa?$AAn?$AAg?$AAe?$AAI?$AAn?$AAt?$AAr?$AAH?$AAa?$AAn?$AAd?$AAl?$AAe?$AAr?$AA?5?$AAN?$AAD?$AAI?$AAS?$AA_?$AAS?$AAT?$AAA?$AAT?$AAU@|
  004c0		 |$LN19@LinkChange|
  004c0	00000000	 DCD         |??_C@_1FK@DBCHBNGD@?$AAL?$AAi?$AAn?$AAk?$AAC?$AAh?$AAa?$AAn?$AAg?$AAe?$AAI?$AAn?$AAt?$AAr?$AAH?$AAa?$AAn?$AAd?$AAl?$AAe?$AAr?$AA?9?$AA?9?$AA?$DO?$AAm?$AA_?$AAA?$AAc?$AAt?$AAi?$AAv?$AAe@|
  004c4		 |$M50144|

			 ENDP  ; |LinkChangeIntrHandler|

	END
