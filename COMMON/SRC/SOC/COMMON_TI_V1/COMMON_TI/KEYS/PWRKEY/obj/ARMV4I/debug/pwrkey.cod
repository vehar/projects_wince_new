; Listing generated by Microsoft (R) Optimizing Compiler Version 14.01.60511.01 

	TTL	C:\WINCE600\PLATFORM\COMMON\SRC\SOC\COMMON_TI_V1\COMMON_TI\KEYS\PWRKEY\pwrkey.c
	CODE32

  00000			 AREA	 |.drectve|, DRECTVE
	DCB	"-defaultlib:LIBCMT "
	DCB	"-defaultlib:OLDNAMES "

	EXPORT	|??_C@_1BC@JHNNEHFE@?$AAP?$AAr?$AAi?$AAo?$AAr?$AAi?$AAt?$AAy?$AA?$AA@| [ DATA ] ; `string'
	EXPORT	|??_C@_1BO@PBJLKMGC@?$AAd?$AAe?$AAb?$AAo?$AAu?$AAn?$AAc?$AAe?$AAP?$AAe?$AAr?$AAi?$AAo?$AAd?$AA?$AA@| [ DATA ] ; `string'
	EXPORT	|??_C@_1M@NEOABOKH@?$AAp?$AAi?$AAn?$AAI?$AAd?$AA?$AA@| [ DATA ] ; `string'
	EXPORT	|dpCurSettings| [ DATA ]

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1BC@JHNNEHFE@?$AAP?$AAr?$AAi?$AAo?$AAr?$AAi?$AAt?$AAy?$AA?$AA@| DCB "P"
	DCB	0x0, "r", 0x0, "i", 0x0, "o", 0x0, "r", 0x0, "i", 0x0, "t"
	DCB	0x0, "y", 0x0, 0x0, 0x0			; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1BO@PBJLKMGC@?$AAd?$AAe?$AAb?$AAo?$AAu?$AAn?$AAc?$AAe?$AAP?$AAe?$AAr?$AAi?$AAo?$AAd?$AA?$AA@| DCB "d"
	DCB	0x0, "e", 0x0, "b", 0x0, "o", 0x0, "u", 0x0, "n", 0x0, "c"
	DCB	0x0, "e", 0x0, "P", 0x0, "e", 0x0, "r", 0x0, "i", 0x0, "o"
	DCB	0x0, "d", 0x0, 0x0, 0x0			; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1M@NEOABOKH@?$AAp?$AAi?$AAn?$AAI?$AAd?$AA?$AA@| DCB "p", 0x0, "i", 0x0
	DCB	"n", 0x0, "I", 0x0, "d", 0x0, 0x0, 0x0	; `string'

  00000			 AREA	 |.data|, DATA
|dpCurSettings| DCB "p", 0x0, "w", 0x0, "r", 0x0, "k", 0x0, "e", 0x0, "y", 0x0
	DCB	0x0, 0x0
	%	50
	DCB	"E", 0x0, "r", 0x0, "r", 0x0, "o", 0x0, "r", 0x0, "s", 0x0
	DCB	0x0, 0x0
	%	50
	DCB	"W", 0x0, "a", 0x0, "r", 0x0, "n", 0x0, "i", 0x0, "n", 0x0
	DCB	"g", 0x0, "s", 0x0, 0x0, 0x0
	%	46
	DCB	"F", 0x0, "u", 0x0, "n", 0x0, "c", 0x0, "t", 0x0, "i", 0x0
	DCB	"o", 0x0, "n", 0x0, 0x0, 0x0
	%	46
	DCB	"I", 0x0, "n", 0x0, "f", 0x0, "o", 0x0, 0x0, 0x0
	%	54
	DCB	"I", 0x0, "S", 0x0, "T", 0x0, 0x0, 0x0
	%	56
	DCB	"U", 0x0, "n", 0x0, "d", 0x0, "e", 0x0, "f", 0x0, "i", 0x0
	DCB	"n", 0x0, "e", 0x0, "d", 0x0, 0x0, 0x0
	%	44
	DCB	"U", 0x0, "n", 0x0, "d", 0x0, "e", 0x0, "f", 0x0, "i", 0x0
	DCB	"n", 0x0, "e", 0x0, "d", 0x0, 0x0, 0x0
	%	44
	DCB	"U", 0x0, "n", 0x0, "d", 0x0, "e", 0x0, "f", 0x0, "i", 0x0
	DCB	"n", 0x0, "e", 0x0, "d", 0x0, 0x0, 0x0
	%	44
	DCB	"U", 0x0, "n", 0x0, "d", 0x0, "e", 0x0, "f", 0x0, "i", 0x0
	DCB	"n", 0x0, "e", 0x0, "d", 0x0, 0x0, 0x0
	%	44
	DCB	"U", 0x0, "n", 0x0, "d", 0x0, "e", 0x0, "f", 0x0, "i", 0x0
	DCB	"n", 0x0, "e", 0x0, "d", 0x0, 0x0, 0x0
	%	44
	DCB	"U", 0x0, "n", 0x0, "d", 0x0, "e", 0x0, "f", 0x0, "i", 0x0
	DCB	"n", 0x0, "e", 0x0, "d", 0x0, 0x0, 0x0
	%	44
	DCB	"U", 0x0, "n", 0x0, "d", 0x0, "e", 0x0, "f", 0x0, "i", 0x0
	DCB	"n", 0x0, "e", 0x0, "d", 0x0, 0x0, 0x0
	%	44
	DCB	"U", 0x0, "n", 0x0, "d", 0x0, "e", 0x0, "f", 0x0, "i", 0x0
	DCB	"n", 0x0, "e", 0x0, "d", 0x0, 0x0, 0x0
	%	44
	DCB	"U", 0x0, "n", 0x0, "d", 0x0, "e", 0x0, "f", 0x0, "i", 0x0
	DCB	"n", 0x0, "e", 0x0, "d", 0x0, 0x0, 0x0
	%	44
	DCB	"U", 0x0, "n", 0x0, "d", 0x0, "e", 0x0, "f", 0x0, "i", 0x0
	DCB	"n", 0x0, "e", 0x0, "d", 0x0, 0x0, 0x0
	%	44
	DCB	"U", 0x0, "n", 0x0, "d", 0x0, "e", 0x0, "f", 0x0, "i", 0x0
	DCB	"n", 0x0, "e", 0x0, "d", 0x0, 0x0, 0x0
	%	44
	DCD	0x3

  00000			 AREA	 |.rdata|, DATA, READONLY
|EdbgVendorIds| DCW 0x0
	DCW	0x0
	DCD	0x4033
	DCB	0x1
	DCB	"AD", 0x0
	DCW	0x1050
	DCW	0x940
	DCD	0x4005
	DCB	0x1
	DCB	"LS", 0x0
	DCW	0x1050
	DCW	0x940
	DCD	0x2078
	DCB	0x1
	DCB	"LS", 0x0
	DCW	0x10ec
	DCW	0x8029
	DCD	0xc0f0
	DCB	0x1
	DCB	"KS", 0x0
	DCW	0x10ec
	DCW	0x8129
	DCD	0x0
	DCB	0x4
	DCB	"RT", 0x0
	DCW	0x10ec
	DCW	0x8139
	DCD	0x900b
	DCB	0x4
	DCB	"RT", 0x0
	DCW	0x10ec
	DCW	0x8139
	DCD	0xd0c9
	DCB	0x4
	DCB	"RT", 0x0
	DCW	0x10ec
	DCW	0x8139
	DCD	0xe04c
	DCB	0x4
	DCB	"RT", 0x0
	DCW	0x1186
	DCW	0x1300
	DCD	0x50ba
	DCB	0x4
	DCB	"DL", 0x0
	DCW	0x100b
	DCW	0x20
	DCD	0xa0cc
	DCB	0x5
	DCB	"NG", 0x0
	DCW	0x10b7
	DCW	0x9050
	DCD	0x6008
	DCB	0x6
	DCB	"3C", 0x0
	DCW	0x10b7
	DCW	0x9200
	DCD	0x476
	DCB	0x6
	DCB	"3C", 0x0
|s_deviceRegParams| DCD |??_C@_1M@NEOABOKH@?$AAp?$AAi?$AAn?$AAI?$AAd?$AA?$AA@|
	DCD	0x1
	DCD	0x1
	DCD	0x4
	DCD	0x4
	DCD	0x0
	DCD	|??_C@_1BO@PBJLKMGC@?$AAd?$AAe?$AAb?$AAo?$AAu?$AAn?$AAc?$AAe?$AAP?$AAe?$AAr?$AAi?$AAo?$AAd?$AA?$AA@|
	DCD	0x1
	DCD	0x0
	DCD	0x1c
	DCD	0x4
	DCD	0x32
	DCD	|??_C@_1BC@JHNNEHFE@?$AAP?$AAr?$AAi?$AAo?$AAr?$AAi?$AAt?$AAy?$AA?$AA@|
	DCD	0x1
	DCD	0x0
	DCD	0x18
	DCD	0x4
	DCD	0xfa
	EXPORT	|PKD_Deinit|
	EXPORT	|??_C@_1GE@KCLDBJDP@?$AAE?$AAR?$AAR?$AAO?$AAR?$AA?3?$AA?5?$AAP?$AAK?$AAD?$AA_?$AAI?$AAn?$AAi?$AAt?$AA?3?$AA?5?$AAF?$AAa?$AAi?$AAl?$AAe?$AAd?$AA?5?$AAc?$AAr?$AAe?$AAa?$AAt?$AAe?$AA?5?$AAi@| [ DATA ] ; `string'
	EXPORT	|PKD_IntrThread|
	EXPORT	|??_C@_1GC@MKODEJOK@?$AAE?$AAR?$AAR?$AAO?$AAR?$AA?3?$AA?5?$AAP?$AAK?$AAD?$AA_?$AAI?$AAn?$AAi?$AAt?$AA?3?$AA?5?$AAF?$AAa?$AAi?$AAl?$AAe?$AAd?$AA?5?$AAc?$AAr?$AAe?$AAa?$AAt?$AAe?$AA?5?$AAi@| [ DATA ] ; `string'
	EXPORT	|??_C@_1GA@NBNBHCGG@?$AAE?$AAR?$AAR?$AAO?$AAR?$AA?3?$AA?5?$AAP?$AAK?$AAD?$AA_?$AAI?$AAn?$AAi?$AAt?$AA?3?$AA?5?$AAE?$AAr?$AAr?$AAo?$AAr?$AA?5?$AAr?$AAe?$AAa?$AAd?$AAi?$AAn?$AAg?$AA?5?$AAf@| [ DATA ] ; `string'
	EXPORT	|PKD_Init|
	IMPORT	|CeSetThreadPriority|
	IMPORT	|GPIOInterruptDone|
	IMPORT	|GPIOInterruptInitialize|
	IMPORT	|GPIOSetMode|
	IMPORT	|GPIOOpen|
	IMPORT	|CreateThread|
	IMPORT	|CreateEventW|
	IMPORT	|NKDbgPrintfW|
	IMPORT	|GetDeviceRegistryParams|
	IMPORT	|memset|
	IMPORT	|malloc|

  00000			 AREA	 |.pdata|, PDATA
|$T43796| DCD	|$LN17@PKD_Init|
	DCD	0x4000a704
; File c:\wince600\platform\common\src\soc\common_ti_v1\common_ti\keys\pwrkey\pwrkey.c

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1GE@KCLDBJDP@?$AAE?$AAR?$AAR?$AAO?$AAR?$AA?3?$AA?5?$AAP?$AAK?$AAD?$AA_?$AAI?$AAn?$AAi?$AAt?$AA?3?$AA?5?$AAF?$AAa?$AAi?$AAl?$AAe?$AAd?$AA?5?$AAc?$AAr?$AAe?$AAa?$AAt?$AAe?$AA?5?$AAi@| DCB "E"
	DCB	0x0, "R", 0x0, "R", 0x0, "O", 0x0, "R", 0x0, ":", 0x0, " "
	DCB	0x0, "P", 0x0, "K", 0x0, "D", 0x0, "_", 0x0, "I", 0x0, "n"
	DCB	0x0, "i", 0x0, "t", 0x0, ":", 0x0, " ", 0x0, "F", 0x0, "a"
	DCB	0x0, "i", 0x0, "l", 0x0, "e", 0x0, "d", 0x0, " ", 0x0, "c"
	DCB	0x0, "r", 0x0, "e", 0x0, "a", 0x0, "t", 0x0, "e", 0x0, " "
	DCB	0x0, "i", 0x0, "n", 0x0, "t", 0x0, "e", 0x0, "r", 0x0, "r"
	DCB	0x0, "u", 0x0, "p", 0x0, "t", 0x0, " ", 0x0, "t", 0x0, "h"
	DCB	0x0, "r", 0x0, "e", 0x0, "a", 0x0, "d", 0x0, 0xd, 0x0, 0xa
	DCB	0x0, 0x0, 0x0				; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1GC@MKODEJOK@?$AAE?$AAR?$AAR?$AAO?$AAR?$AA?3?$AA?5?$AAP?$AAK?$AAD?$AA_?$AAI?$AAn?$AAi?$AAt?$AA?3?$AA?5?$AAF?$AAa?$AAi?$AAl?$AAe?$AAd?$AA?5?$AAc?$AAr?$AAe?$AAa?$AAt?$AAe?$AA?5?$AAi@| DCB "E"
	DCB	0x0, "R", 0x0, "R", 0x0, "O", 0x0, "R", 0x0, ":", 0x0, " "
	DCB	0x0, "P", 0x0, "K", 0x0, "D", 0x0, "_", 0x0, "I", 0x0, "n"
	DCB	0x0, "i", 0x0, "t", 0x0, ":", 0x0, " ", 0x0, "F", 0x0, "a"
	DCB	0x0, "i", 0x0, "l", 0x0, "e", 0x0, "d", 0x0, " ", 0x0, "c"
	DCB	0x0, "r", 0x0, "e", 0x0, "a", 0x0, "t", 0x0, "e", 0x0, " "
	DCB	0x0, "i", 0x0, "n", 0x0, "t", 0x0, "e", 0x0, "r", 0x0, "r"
	DCB	0x0, "u", 0x0, "p", 0x0, "t", 0x0, " ", 0x0, "e", 0x0, "v"
	DCB	0x0, "e", 0x0, "n", 0x0, "t", 0x0, 0xd, 0x0, 0xa, 0x0, 0x0
	DCB	0x0					; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1GA@NBNBHCGG@?$AAE?$AAR?$AAR?$AAO?$AAR?$AA?3?$AA?5?$AAP?$AAK?$AAD?$AA_?$AAI?$AAn?$AAi?$AAt?$AA?3?$AA?5?$AAE?$AAr?$AAr?$AAo?$AAr?$AA?5?$AAr?$AAe?$AAa?$AAd?$AAi?$AAn?$AAg?$AA?5?$AAf@| DCB "E"
	DCB	0x0, "R", 0x0, "R", 0x0, "O", 0x0, "R", 0x0, ":", 0x0, " "
	DCB	0x0, "P", 0x0, "K", 0x0, "D", 0x0, "_", 0x0, "I", 0x0, "n"
	DCB	0x0, "i", 0x0, "t", 0x0, ":", 0x0, " ", 0x0, "E", 0x0, "r"
	DCB	0x0, "r", 0x0, "o", 0x0, "r", 0x0, " ", 0x0, "r", 0x0, "e"
	DCB	0x0, "a", 0x0, "d", 0x0, "i", 0x0, "n", 0x0, "g", 0x0, " "
	DCB	0x0, "f", 0x0, "r", 0x0, "o", 0x0, "m", 0x0, " ", 0x0, "R"
	DCB	0x0, "e", 0x0, "g", 0x0, "i", 0x0, "s", 0x0, "t", 0x0, "r"
	DCB	0x0, "y", 0x0, ".", 0x0, 0xd, 0x0, 0xa, 0x0, 0x0, 0x0 ; `string'
; Function compile flags: /Odtp

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |PKD_Init| PROC

; 109  : {

  00000		 |$LN17@PKD_Init|
  00000	e1a0c00d	 mov         r12, sp
  00004	e92d0003	 stmdb       sp!, {r0, r1}
  00008	e92d5000	 stmdb       sp!, {r12, lr}
  0000c	e24dd040	 sub         sp, sp, #0x40
  00010		 |$M43793|

; 110  :     DWORD rc = (DWORD)NULL;    

  00010	e3a03000	 mov         r3, #0
  00014	e58d300c	 str         r3, [sp, #0xC]

; 111  :     T_PWRKEY_DEVICE* pDevice = malloc(sizeof(T_PWRKEY_DEVICE));

  00018	e3a00020	 mov         r0, #0x20
  0001c	eb000000	 bl          malloc
  00020	e58d001c	 str         r0, [sp, #0x1C]
  00024	e59d301c	 ldr         r3, [sp, #0x1C]
  00028	e58d3008	 str         r3, [sp, #8]

; 112  : 
; 113  :     UNREFERENCED_PARAMETER(pBusContext);
; 114  : 
; 115  :     if (pDevice==NULL) return 0;

  0002c	e59d3008	 ldr         r3, [sp, #8]
  00030	e3530000	 cmp         r3, #0
  00034	1a000002	 bne         |$LN6@PKD_Init|
  00038	e3a03000	 mov         r3, #0
  0003c	e58d3010	 str         r3, [sp, #0x10]
  00040	ea00008b	 b           |$LN7@PKD_Init|
  00044		 |$LN6@PKD_Init|

; 116  :     memset(pDevice,0,sizeof(T_PWRKEY_DEVICE));

  00044	e3a02020	 mov         r2, #0x20
  00048	e3a01000	 mov         r1, #0
  0004c	e59d0008	 ldr         r0, [sp, #8]
  00050	eb000000	 bl          memset

; 117  :     pDevice->dwSysintr = (DWORD) SYSINTR_UNDEFINED;

  00054	e59d3008	 ldr         r3, [sp, #8]
  00058	e2832008	 add         r2, r3, #8
  0005c	e3e03000	 mvn         r3, #0
  00060	e5823000	 str         r3, [r2]

; 118  : 
; 119  :     // Read parameters from registry
; 120  :     if (GetDeviceRegistryParams(
; 121  :         szContext, 
; 122  :         pDevice, 
; 123  :         dimof(s_deviceRegParams), 
; 124  :         s_deviceRegParams) != ERROR_SUCCESS)

  00064	e59f322c	 ldr         r3, [pc, #0x22C]
  00068	e3a02003	 mov         r2, #3
  0006c	e59d1008	 ldr         r1, [sp, #8]
  00070	e59d0048	 ldr         r0, [sp, #0x48]
  00074	eb000000	 bl          GetDeviceRegistryParams
  00078	e58d0020	 str         r0, [sp, #0x20]
  0007c	e59d3020	 ldr         r3, [sp, #0x20]
  00080	e3530000	 cmp         r3, #0
  00084	0a00000b	 beq         |$LN5@PKD_Init|

; 125  :     {
; 126  :         DEBUGMSG(ZONE_ERROR, (TEXT("ERROR: PKD_Init: Error reading from Registry.\r\n")));

  00088	e59f31f8	 ldr         r3, [pc, #0x1F8]
  0008c	e5933440	 ldr         r3, [r3, #0x440]
  00090	e3130001	 tst         r3, #1
  00094	0a000004	 beq         |$LN9@PKD_Init|
  00098	e59f01f4	 ldr         r0, [pc, #0x1F4]
  0009c	eb000000	 bl          NKDbgPrintfW
  000a0	e3a03001	 mov         r3, #1
  000a4	e58d3024	 str         r3, [sp, #0x24]
  000a8	ea000001	 b           |$LN10@PKD_Init|
  000ac		 |$LN9@PKD_Init|
  000ac	e3a03000	 mov         r3, #0
  000b0	e58d3024	 str         r3, [sp, #0x24]
  000b4		 |$LN10@PKD_Init|

; 127  :         goto cleanUp;

  000b4	ea000067	 b           |$cleanUp$43661|
  000b8		 |$LN5@PKD_Init|

; 128  :     }
; 129  : 
; 130  :     // Create interrupt event
; 131  :     pDevice->hIntrEvent = CreateEvent(NULL, FALSE, FALSE, NULL);

  000b8	e3a03000	 mov         r3, #0
  000bc	e3a02000	 mov         r2, #0
  000c0	e3a01000	 mov         r1, #0
  000c4	e3a00000	 mov         r0, #0
  000c8	eb000000	 bl          CreateEventW
  000cc	e58d0028	 str         r0, [sp, #0x28]
  000d0	e59d3008	 ldr         r3, [sp, #8]
  000d4	e283200c	 add         r2, r3, #0xC
  000d8	e59d3028	 ldr         r3, [sp, #0x28]
  000dc	e5823000	 str         r3, [r2]

; 132  :     if (pDevice->hIntrEvent == NULL)

  000e0	e59d3008	 ldr         r3, [sp, #8]
  000e4	e283300c	 add         r3, r3, #0xC
  000e8	e5933000	 ldr         r3, [r3]
  000ec	e3530000	 cmp         r3, #0
  000f0	1a00000b	 bne         |$LN4@PKD_Init|

; 133  :     {
; 134  :         DEBUGMSG(ZONE_ERROR, (L"ERROR: PKD_Init: Failed create interrupt event\r\n"));

  000f4	e59f318c	 ldr         r3, [pc, #0x18C]
  000f8	e5933440	 ldr         r3, [r3, #0x440]
  000fc	e3130001	 tst         r3, #1
  00100	0a000004	 beq         |$LN11@PKD_Init|
  00104	e59f0184	 ldr         r0, [pc, #0x184]
  00108	eb000000	 bl          NKDbgPrintfW
  0010c	e3a03001	 mov         r3, #1
  00110	e58d302c	 str         r3, [sp, #0x2C]
  00114	ea000001	 b           |$LN12@PKD_Init|
  00118		 |$LN11@PKD_Init|
  00118	e3a03000	 mov         r3, #0
  0011c	e58d302c	 str         r3, [sp, #0x2C]
  00120		 |$LN12@PKD_Init|

; 135  :         goto cleanUp;

  00120	ea00004c	 b           |$cleanUp$43661|
  00124		 |$LN4@PKD_Init|

; 136  :     }
; 137  : 
; 138  :     pDevice->hIntrThread = CreateThread(NULL, 0, PKD_IntrThread, pDevice, 0, NULL);

  00124	e3a03000	 mov         r3, #0
  00128	e58d3004	 str         r3, [sp, #4]
  0012c	e3a03000	 mov         r3, #0
  00130	e58d3000	 str         r3, [sp]
  00134	e59d3008	 ldr         r3, [sp, #8]
  00138	e59f214c	 ldr         r2, [pc, #0x14C]
  0013c	e3a01000	 mov         r1, #0
  00140	e3a00000	 mov         r0, #0
  00144	eb000000	 bl          CreateThread
  00148	e58d0030	 str         r0, [sp, #0x30]
  0014c	e59d3008	 ldr         r3, [sp, #8]
  00150	e2832010	 add         r2, r3, #0x10
  00154	e59d3030	 ldr         r3, [sp, #0x30]
  00158	e5823000	 str         r3, [r2]

; 139  :     if (!pDevice->hIntrThread)

  0015c	e59d3008	 ldr         r3, [sp, #8]
  00160	e2833010	 add         r3, r3, #0x10
  00164	e5933000	 ldr         r3, [r3]
  00168	e3530000	 cmp         r3, #0
  0016c	1a00000b	 bne         |$LN3@PKD_Init|

; 140  :     {
; 141  :         DEBUGMSG (ZONE_ERROR, (L"ERROR: PKD_Init: Failed create interrupt thread\r\n"));

  00170	e59f3110	 ldr         r3, [pc, #0x110]
  00174	e5933440	 ldr         r3, [r3, #0x440]
  00178	e3130001	 tst         r3, #1
  0017c	0a000004	 beq         |$LN13@PKD_Init|
  00180	e59f00fc	 ldr         r0, [pc, #0xFC]
  00184	eb000000	 bl          NKDbgPrintfW
  00188	e3a03001	 mov         r3, #1
  0018c	e58d3034	 str         r3, [sp, #0x34]
  00190	ea000001	 b           |$LN14@PKD_Init|
  00194		 |$LN13@PKD_Init|
  00194	e3a03000	 mov         r3, #0
  00198	e58d3034	 str         r3, [sp, #0x34]
  0019c		 |$LN14@PKD_Init|

; 142  :         goto cleanUp;

  0019c	ea00002d	 b           |$cleanUp$43661|
  001a0		 |$LN3@PKD_Init|

; 143  :     }
; 144  : 
; 145  : 
; 146  :     pDevice->hGpio = GPIOOpen();        

  001a0	eb000000	 bl          GPIOOpen
  001a4	e58d0038	 str         r0, [sp, #0x38]
  001a8	e59d2038	 ldr         r2, [sp, #0x38]
  001ac	e59d3008	 ldr         r3, [sp, #8]
  001b0	e5832000	 str         r2, [r3]

; 147  :     GPIOSetMode(pDevice->hGpio,pDevice->pinId,GPIO_DIR_INPUT | GPIO_INT_LOW);

  001b4	e3a02009	 mov         r2, #9
  001b8	e59d3008	 ldr         r3, [sp, #8]
  001bc	e2833004	 add         r3, r3, #4
  001c0	e5931000	 ldr         r1, [r3]
  001c4	e59d3008	 ldr         r3, [sp, #8]
  001c8	e5930000	 ldr         r0, [r3]
  001cc	eb000000	 bl          GPIOSetMode

; 148  :     if (!GPIOInterruptInitialize(pDevice->hGpio,pDevice->pinId,&pDevice->dwSysintr,pDevice->hIntrEvent))

  001d0	e59d3008	 ldr         r3, [sp, #8]
  001d4	e283300c	 add         r3, r3, #0xC
  001d8	e5933000	 ldr         r3, [r3]
  001dc	e59d2008	 ldr         r2, [sp, #8]
  001e0	e2822008	 add         r2, r2, #8
  001e4	e59d1008	 ldr         r1, [sp, #8]
  001e8	e2811004	 add         r1, r1, #4
  001ec	e5911000	 ldr         r1, [r1]
  001f0	e59d0008	 ldr         r0, [sp, #8]
  001f4	e5900000	 ldr         r0, [r0]
  001f8	eb000000	 bl          GPIOInterruptInitialize
  001fc	e58d003c	 str         r0, [sp, #0x3C]
  00200	e59d303c	 ldr         r3, [sp, #0x3C]
  00204	e3530000	 cmp         r3, #0
  00208	1a000000	 bne         |$LN2@PKD_Init|

; 149  :     {
; 150  :         goto cleanUp;

  0020c	ea000011	 b           |$cleanUp$43661|
  00210		 |$LN2@PKD_Init|

; 151  :     }    
; 152  :     GPIOInterruptDone(pDevice->hGpio,pDevice->pinId,pDevice->dwSysintr);

  00210	e59d3008	 ldr         r3, [sp, #8]
  00214	e2833008	 add         r3, r3, #8
  00218	e5932000	 ldr         r2, [r3]
  0021c	e59d3008	 ldr         r3, [sp, #8]
  00220	e2833004	 add         r3, r3, #4
  00224	e5931000	 ldr         r1, [r3]
  00228	e59d3008	 ldr         r3, [sp, #8]
  0022c	e5930000	 ldr         r0, [r3]
  00230	eb000000	 bl          GPIOInterruptDone

; 153  : 
; 154  :     // Set thread priority
; 155  :     CeSetThreadPriority(pDevice->hIntrThread,pDevice->threadPriority);

  00234	e59d3008	 ldr         r3, [sp, #8]
  00238	e2833018	 add         r3, r3, #0x18
  0023c	e5931000	 ldr         r1, [r3]
  00240	e59d3008	 ldr         r3, [sp, #8]
  00244	e2833010	 add         r3, r3, #0x10
  00248	e5930000	 ldr         r0, [r3]
  0024c	eb000000	 bl          CeSetThreadPriority

; 156  : 
; 157  :     // Return non-null value
; 158  :     rc = (DWORD)pDevice;

  00250	e59d3008	 ldr         r3, [sp, #8]
  00254	e58d300c	 str         r3, [sp, #0xC]
  00258		 |$cleanUp$43661|

; 159  : cleanUp:
; 160  :     if (rc == (DWORD)NULL)

  00258	e59d300c	 ldr         r3, [sp, #0xC]
  0025c	e3530000	 cmp         r3, #0
  00260	1a000001	 bne         |$LN1@PKD_Init|

; 161  :     {
; 162  :         PKD_Deinit((DWORD) pDevice);

  00264	e59d0008	 ldr         r0, [sp, #8]
  00268	eb000000	 bl          PKD_Deinit
  0026c		 |$LN1@PKD_Init|

; 163  :     }
; 164  :     return rc;

  0026c	e59d300c	 ldr         r3, [sp, #0xC]
  00270	e58d3010	 str         r3, [sp, #0x10]
  00274		 |$LN7@PKD_Init|

; 165  : }

  00274	e59d0010	 ldr         r0, [sp, #0x10]
  00278	e28dd040	 add         sp, sp, #0x40
  0027c	e89d6000	 ldmia       sp, {sp, lr}
  00280	e12fff1e	 bx          lr
  00284		 |$LN18@PKD_Init|
  00284		 |$LN19@PKD_Init|
  00284	00000000	 DCD         |??_C@_1GE@KCLDBJDP@?$AAE?$AAR?$AAR?$AAO?$AAR?$AA?3?$AA?5?$AAP?$AAK?$AAD?$AA_?$AAI?$AAn?$AAi?$AAt?$AA?3?$AA?5?$AAF?$AAa?$AAi?$AAl?$AAe?$AAd?$AA?5?$AAc?$AAr?$AAe?$AAa?$AAt?$AAe?$AA?5?$AAi@|
  00288		 |$LN20@PKD_Init|
  00288	00000000	 DCD         |dpCurSettings|
  0028c		 |$LN21@PKD_Init|
  0028c	00000000	 DCD         |PKD_IntrThread|
  00290		 |$LN22@PKD_Init|
  00290	00000000	 DCD         |??_C@_1GC@MKODEJOK@?$AAE?$AAR?$AAR?$AAO?$AAR?$AA?3?$AA?5?$AAP?$AAK?$AAD?$AA_?$AAI?$AAn?$AAi?$AAt?$AA?3?$AA?5?$AAF?$AAa?$AAi?$AAl?$AAe?$AAd?$AA?5?$AAc?$AAr?$AAe?$AAa?$AAt?$AAe?$AA?5?$AAi@|
  00294		 |$LN23@PKD_Init|
  00294	00000000	 DCD         |??_C@_1GA@NBNBHCGG@?$AAE?$AAR?$AAR?$AAO?$AAR?$AA?3?$AA?5?$AAP?$AAK?$AAD?$AA_?$AAI?$AAn?$AAi?$AAt?$AA?3?$AA?5?$AAE?$AAr?$AAr?$AAo?$AAr?$AA?5?$AAr?$AAe?$AAa?$AAd?$AAi?$AAn?$AAg?$AA?5?$AAf@|
  00298		 |$LN24@PKD_Init|
  00298	00000000	 DCD         |s_deviceRegParams|
  0029c		 |$M43794|

			 ENDP  ; |PKD_Init|

	EXPORT	|SetEvent|
	IMPORT	|LocalFree|
	IMPORT	|CloseHandle|
	IMPORT	|GPIOClose|
	IMPORT	|GPIOInterruptDisable|
	IMPORT	|WaitForSingleObject|

  00008			 AREA	 |.pdata|, PDATA
|$T43809| DCD	|$LN10@PKD_Deinit|
	DCD	0x40004604
; Function compile flags: /Odtp

  0029c			 AREA	 |.text|, CODE, ARM

  0029c		 |PKD_Deinit| PROC

; 177  : {

  0029c		 |$LN10@PKD_Deinit|
  0029c	e1a0c00d	 mov         r12, sp
  002a0	e92d0001	 stmdb       sp!, {r0}
  002a4	e92d5000	 stmdb       sp!, {r12, lr}
  002a8	e24dd00c	 sub         sp, sp, #0xC
  002ac		 |$M43806|

; 178  :     BOOL rc = FALSE;

  002ac	e3a03000	 mov         r3, #0
  002b0	e58d3004	 str         r3, [sp, #4]

; 179  :     T_PWRKEY_DEVICE *pDevice = (T_PWRKEY_DEVICE*) context;

  002b4	e59d3014	 ldr         r3, [sp, #0x14]
  002b8	e58d3000	 str         r3, [sp]

; 180  : 
; 181  :     if (pDevice == NULL)

  002bc	e59d3000	 ldr         r3, [sp]
  002c0	e3530000	 cmp         r3, #0
  002c4	1a000000	 bne         |$LN5@PKD_Deinit|

; 182  :     {
; 183  :         goto cleanUp;

  002c8	ea000033	 b           |$cleanUp$43687|
  002cc		 |$LN5@PKD_Deinit|

; 184  :     }
; 185  :     if (pDevice->hIntrThread)

  002cc	e59d3000	 ldr         r3, [sp]
  002d0	e2833010	 add         r3, r3, #0x10
  002d4	e5933000	 ldr         r3, [r3]
  002d8	e3530000	 cmp         r3, #0
  002dc	0a00000c	 beq         |$LN4@PKD_Deinit|

; 186  :     {
; 187  :         pDevice->fTerminateThread = TRUE;

  002e0	e59d3000	 ldr         r3, [sp]
  002e4	e2832014	 add         r2, r3, #0x14
  002e8	e3a03001	 mov         r3, #1
  002ec	e5823000	 str         r3, [r2]

; 188  :         SetEvent(pDevice->hIntrEvent);

  002f0	e59d3000	 ldr         r3, [sp]
  002f4	e283300c	 add         r3, r3, #0xC
  002f8	e5930000	 ldr         r0, [r3]
  002fc	eb000000	 bl          SetEvent

; 189  :         WaitForSingleObject(pDevice->hIntrThread,INFINITE);

  00300	e3e01000	 mvn         r1, #0
  00304	e59d3000	 ldr         r3, [sp]
  00308	e2833010	 add         r3, r3, #0x10
  0030c	e5930000	 ldr         r0, [r3]
  00310	eb000000	 bl          WaitForSingleObject
  00314		 |$LN4@PKD_Deinit|

; 190  :     }
; 191  :     if (pDevice->dwSysintr != SYSINTR_UNDEFINED)

  00314	e59d3000	 ldr         r3, [sp]
  00318	e2833008	 add         r3, r3, #8
  0031c	e5933000	 ldr         r3, [r3]
  00320	e3730001	 cmn         r3, #1
  00324	0a000008	 beq         |$LN3@PKD_Deinit|

; 192  :     {
; 193  :         GPIOInterruptDisable(pDevice->hGpio,pDevice->pinId,pDevice->dwSysintr);

  00328	e59d3000	 ldr         r3, [sp]
  0032c	e2833008	 add         r3, r3, #8
  00330	e5932000	 ldr         r2, [r3]
  00334	e59d3000	 ldr         r3, [sp]
  00338	e2833004	 add         r3, r3, #4
  0033c	e5931000	 ldr         r1, [r3]
  00340	e59d3000	 ldr         r3, [sp]
  00344	e5930000	 ldr         r0, [r3]
  00348	eb000000	 bl          GPIOInterruptDisable
  0034c		 |$LN3@PKD_Deinit|

; 194  :     }
; 195  :     if (pDevice->hGpio)

  0034c	e59d3000	 ldr         r3, [sp]
  00350	e5933000	 ldr         r3, [r3]
  00354	e3530000	 cmp         r3, #0
  00358	0a000002	 beq         |$LN2@PKD_Deinit|

; 196  :     {
; 197  :         GPIOClose(pDevice->hGpio);

  0035c	e59d3000	 ldr         r3, [sp]
  00360	e5930000	 ldr         r0, [r3]
  00364	eb000000	 bl          GPIOClose
  00368		 |$LN2@PKD_Deinit|

; 198  :     }
; 199  :     if (pDevice->hIntrEvent)

  00368	e59d3000	 ldr         r3, [sp]
  0036c	e283300c	 add         r3, r3, #0xC
  00370	e5933000	 ldr         r3, [r3]
  00374	e3530000	 cmp         r3, #0
  00378	0a000003	 beq         |$LN1@PKD_Deinit|

; 200  :     {
; 201  :         CloseHandle(pDevice->hIntrEvent);

  0037c	e59d3000	 ldr         r3, [sp]
  00380	e283300c	 add         r3, r3, #0xC
  00384	e5930000	 ldr         r0, [r3]
  00388	eb000000	 bl          CloseHandle
  0038c		 |$LN1@PKD_Deinit|

; 202  :     }
; 203  :     LocalFree(pDevice);

  0038c	e59d0000	 ldr         r0, [sp]
  00390	eb000000	 bl          LocalFree

; 204  : 
; 205  :     rc = TRUE;

  00394	e3a03001	 mov         r3, #1
  00398	e58d3004	 str         r3, [sp, #4]
  0039c		 |$cleanUp$43687|

; 206  : 
; 207  : cleanUp:
; 208  : 
; 209  :     return rc;

  0039c	e59d3004	 ldr         r3, [sp, #4]
  003a0	e58d3008	 str         r3, [sp, #8]

; 210  : }

  003a4	e59d0008	 ldr         r0, [sp, #8]
  003a8	e28dd00c	 add         sp, sp, #0xC
  003ac	e89d6000	 ldmia       sp, {sp, lr}
  003b0	e12fff1e	 bx          lr
  003b4		 |$M43807|

			 ENDP  ; |PKD_Deinit|

	IMPORT	|EventModify|
; File c:\wince600\public\common\sdk\inc\kfuncs.h

  00000			 AREA	 |.pdata|, PDATA
|$T43815| DCD	|$LN5@SetEvent|
	DCD	0x40000e04
; Function compile flags: /Odtp

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |SetEvent| PROC

; 235  : _inline BOOL SetEvent(HANDLE h) {

  00000		 |$LN5@SetEvent|
  00000	e1a0c00d	 mov         r12, sp
  00004	e92d0001	 stmdb       sp!, {r0}
  00008	e92d5000	 stmdb       sp!, {r12, lr}
  0000c	e24dd008	 sub         sp, sp, #8
  00010		 |$M43812|

; 236  : 	return EventModify(h,EVENT_SET);

  00010	e3a01003	 mov         r1, #3
  00014	e59d0010	 ldr         r0, [sp, #0x10]
  00018	eb000000	 bl          EventModify
  0001c	e58d0004	 str         r0, [sp, #4]
  00020	e59d3004	 ldr         r3, [sp, #4]
  00024	e58d3000	 str         r3, [sp]

; 237  : }

  00028	e59d0000	 ldr         r0, [sp]
  0002c	e28dd008	 add         sp, sp, #8
  00030	e89d6000	 ldmia       sp, {sp, lr}
  00034	e12fff1e	 bx          lr
  00038		 |$M43813|

			 ENDP  ; |SetEvent|

	EXPORT	|PKD_Open|

  00010			 AREA	 |.pdata|, PDATA
|$T43823| DCD	|$LN5@PKD_Open|
	DCD	0x40000a04
; Function compile flags: /Odtp
; File c:\wince600\platform\common\src\soc\common_ti_v1\common_ti\keys\pwrkey\pwrkey.c

  003b4			 AREA	 |.text|, CODE, ARM

  003b4		 |PKD_Open| PROC

; 224  : {

  003b4		 |$LN5@PKD_Open|
  003b4	e1a0c00d	 mov         r12, sp
  003b8	e92d0007	 stmdb       sp!, {r0 - r2}
  003bc	e92d5000	 stmdb       sp!, {r12, lr}
  003c0	e24dd004	 sub         sp, sp, #4
  003c4		 |$M43820|

; 225  :     UNREFERENCED_PARAMETER(context);
; 226  :     UNREFERENCED_PARAMETER(accessCode);
; 227  :     UNREFERENCED_PARAMETER(shareMode);
; 228  :     return context;

  003c4	e59d300c	 ldr         r3, [sp, #0xC]
  003c8	e58d3000	 str         r3, [sp]

; 229  : }

  003cc	e59d0000	 ldr         r0, [sp]
  003d0	e28dd004	 add         sp, sp, #4
  003d4	e89d6000	 ldmia       sp, {sp, lr}
  003d8	e12fff1e	 bx          lr
  003dc		 |$M43821|

			 ENDP  ; |PKD_Open|

	EXPORT	|PKD_Close|

  00018			 AREA	 |.pdata|, PDATA
|$T43829| DCD	|$LN5@PKD_Close|
	DCD	0x40000a04
; Function compile flags: /Odtp

  003dc			 AREA	 |.text|, CODE, ARM

  003dc		 |PKD_Close| PROC

; 241  : {

  003dc		 |$LN5@PKD_Close|
  003dc	e1a0c00d	 mov         r12, sp
  003e0	e92d0001	 stmdb       sp!, {r0}
  003e4	e92d5000	 stmdb       sp!, {r12, lr}
  003e8	e24dd004	 sub         sp, sp, #4
  003ec		 |$M43826|

; 242  :     UNREFERENCED_PARAMETER(context);
; 243  :     return TRUE;

  003ec	e3a03001	 mov         r3, #1
  003f0	e58d3000	 str         r3, [sp]

; 244  : }

  003f4	e59d0000	 ldr         r0, [sp]
  003f8	e28dd004	 add         sp, sp, #4
  003fc	e89d6000	 ldmia       sp, {sp, lr}
  00400	e12fff1e	 bx          lr
  00404		 |$M43827|

			 ENDP  ; |PKD_Close|

	EXPORT	|PKD_PowerUp|

  00020			 AREA	 |.pdata|, PDATA
|$T43834| DCD	|$LN5@PKD_PowerU|
	DCD	0x40000503
; Function compile flags: /Odtp

  00404			 AREA	 |.text|, CODE, ARM

  00404		 |PKD_PowerUp| PROC

; 258  : {

  00404		 |$LN5@PKD_PowerU|
  00404	e1a0c00d	 mov         r12, sp
  00408	e92d0001	 stmdb       sp!, {r0}
  0040c	e92d5000	 stmdb       sp!, {r12, lr}
  00410		 |$M43831|

; 259  :     UNREFERENCED_PARAMETER(context);
; 260  : }

  00410	e89d6000	 ldmia       sp, {sp, lr}
  00414	e12fff1e	 bx          lr
  00418		 |$M43832|

			 ENDP  ; |PKD_PowerUp|

	EXPORT	|PKD_PowerDown|

  00028			 AREA	 |.pdata|, PDATA
|$T43839| DCD	|$LN5@PKD_PowerD|
	DCD	0x40000503
; Function compile flags: /Odtp

  00418			 AREA	 |.text|, CODE, ARM

  00418		 |PKD_PowerDown| PROC

; 272  : {

  00418		 |$LN5@PKD_PowerD|
  00418	e1a0c00d	 mov         r12, sp
  0041c	e92d0001	 stmdb       sp!, {r0}
  00420	e92d5000	 stmdb       sp!, {r12, lr}
  00424		 |$M43836|

; 273  :     UNREFERENCED_PARAMETER(context);
; 274  : }

  00424	e89d6000	 ldmia       sp, {sp, lr}
  00428	e12fff1e	 bx          lr
  0042c		 |$M43837|

			 ENDP  ; |PKD_PowerDown|

	EXPORT	|PKD_IOControl|

  00030			 AREA	 |.pdata|, PDATA
|$T43845| DCD	|$LN5@PKD_IOCont|
	DCD	0x40000c04
; Function compile flags: /Odtp

  0042c			 AREA	 |.text|, CODE, ARM

  0042c		 |PKD_IOControl| PROC

; 292  : {

  0042c		 |$LN5@PKD_IOCont|
  0042c	e1a0c00d	 mov         r12, sp
  00430	e92d000f	 stmdb       sp!, {r0 - r3}
  00434	e92d5000	 stmdb       sp!, {r12, lr}
  00438	e24dd008	 sub         sp, sp, #8
  0043c		 |$M43842|

; 293  :     BOOL rc = FALSE;

  0043c	e3a03000	 mov         r3, #0
  00440	e58d3000	 str         r3, [sp]

; 294  :     UNREFERENCED_PARAMETER(context);    
; 295  :     UNREFERENCED_PARAMETER(code);    
; 296  :     UNREFERENCED_PARAMETER(pInBuffer);    
; 297  :     UNREFERENCED_PARAMETER(inSize);    
; 298  :     UNREFERENCED_PARAMETER(pOutBuffer);    
; 299  :     UNREFERENCED_PARAMETER(outSize);    
; 300  :     UNREFERENCED_PARAMETER(pOutSize);    
; 301  :     return rc;

  00444	e59d3000	 ldr         r3, [sp]
  00448	e58d3004	 str         r3, [sp, #4]

; 302  : }

  0044c	e59d0004	 ldr         r0, [sp, #4]
  00450	e28dd008	 add         sp, sp, #8
  00454	e89d6000	 ldmia       sp, {sp, lr}
  00458	e12fff1e	 bx          lr
  0045c		 |$M43843|

			 ENDP  ; |PKD_IOControl|

	EXPORT	|??_C@_1CE@ICCCMJPG@?$AA?9?$AAP?$AAK?$AAD?$AA_?$AAI?$AAn?$AAt?$AAr?$AAT?$AAh?$AAr?$AAe?$AAa?$AAd?$AA?$AN?$AA?6?$AA?$AA@| [ DATA ] ; `string'
	EXPORT	|??_C@_1CO@IHCFLGPB@?$AAP?$AAo?$AAw?$AAe?$AAr?$AA?5?$AAK?$AAe?$AAy?$AA?5?$AAp?$AAr?$AAe?$AAs?$AAs?$AAe?$AAd?$AA?$CB?$AA?$CB?$AA?$CB?$AA?$AN?$AA?6?$AA?$AA@| [ DATA ] ; `string'
	IMPORT	|SetSystemPowerState|
	IMPORT	|GPIOGetBit|

  00038			 AREA	 |.pdata|, PDATA
|$T43853| DCD	|$LN15@PKD_IntrTh|
	DCD	0x40006304

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1CE@ICCCMJPG@?$AA?9?$AAP?$AAK?$AAD?$AA_?$AAI?$AAn?$AAt?$AAr?$AAT?$AAh?$AAr?$AAe?$AAa?$AAd?$AA?$AN?$AA?6?$AA?$AA@| DCB "-"
	DCB	0x0, "P", 0x0, "K", 0x0, "D", 0x0, "_", 0x0, "I", 0x0, "n"
	DCB	0x0, "t", 0x0, "r", 0x0, "T", 0x0, "h", 0x0, "r", 0x0, "e"
	DCB	0x0, "a", 0x0, "d", 0x0, 0xd, 0x0, 0xa, 0x0, 0x0, 0x0 ; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1CO@IHCFLGPB@?$AAP?$AAo?$AAw?$AAe?$AAr?$AA?5?$AAK?$AAe?$AAy?$AA?5?$AAp?$AAr?$AAe?$AAs?$AAs?$AAe?$AAd?$AA?$CB?$AA?$CB?$AA?$CB?$AA?$AN?$AA?6?$AA?$AA@| DCB "P"
	DCB	0x0, "o", 0x0, "w", 0x0, "e", 0x0, "r", 0x0, " ", 0x0, "K"
	DCB	0x0, "e", 0x0, "y", 0x0, " ", 0x0, "p", 0x0, "r", 0x0, "e"
	DCB	0x0, "s", 0x0, "s", 0x0, "e", 0x0, "d", 0x0, "!", 0x0, "!"
	DCB	0x0, "!", 0x0, 0xd, 0x0, 0xa, 0x0, 0x0, 0x0 ; `string'
; Function compile flags: /Odtp

  0045c			 AREA	 |.text|, CODE, ARM

  0045c		 |PKD_IntrThread| PROC

; 314  : {

  0045c		 |$LN15@PKD_IntrTh|
  0045c	e1a0c00d	 mov         r12, sp
  00460	e92d0001	 stmdb       sp!, {r0}
  00464	e92d5000	 stmdb       sp!, {r12, lr}
  00468	e24dd018	 sub         sp, sp, #0x18
  0046c		 |$M43850|

; 315  :     T_PWRKEY_DEVICE *pDevice = (T_PWRKEY_DEVICE*) pContext;

  0046c	e59d3020	 ldr         r3, [sp, #0x20]
  00470	e58d3000	 str         r3, [sp]
  00474		 |$LN8@PKD_IntrTh|

; 316  :     while (!pDevice->fTerminateThread)

  00474	e59d3000	 ldr         r3, [sp]
  00478	e2833014	 add         r3, r3, #0x14
  0047c	e5933000	 ldr         r3, [r3]
  00480	e3530000	 cmp         r3, #0
  00484	1a000043	 bne         |$LN7@PKD_IntrTh|

; 317  :     {
; 318  :         // Wait for pwrkey interrupt
; 319  :         if (WaitForSingleObject(pDevice->hIntrEvent, INFINITE) == WAIT_OBJECT_0)

  00488	e3e01000	 mvn         r1, #0
  0048c	e59d3000	 ldr         r3, [sp]
  00490	e283300c	 add         r3, r3, #0xC
  00494	e5930000	 ldr         r0, [r3]
  00498	eb000000	 bl          WaitForSingleObject
  0049c	e58d0008	 str         r0, [sp, #8]
  004a0	e59d3008	 ldr         r3, [sp, #8]
  004a4	e3530000	 cmp         r3, #0
  004a8	1a000033	 bne         |$LN6@PKD_IntrTh|

; 320  :         {
; 321  :             GPIOInterruptDone(pDevice->hGpio,pDevice->pinId,pDevice->dwSysintr);            

  004ac	e59d3000	 ldr         r3, [sp]
  004b0	e2833008	 add         r3, r3, #8
  004b4	e5932000	 ldr         r2, [r3]
  004b8	e59d3000	 ldr         r3, [sp]
  004bc	e2833004	 add         r3, r3, #4
  004c0	e5931000	 ldr         r1, [r3]
  004c4	e59d3000	 ldr         r3, [sp]
  004c8	e5930000	 ldr         r0, [r3]
  004cc	eb000000	 bl          GPIOInterruptDone
  004d0		 |$LN5@PKD_IntrTh|

; 322  :             while (WaitForSingleObject(pDevice->hIntrEvent, pDevice->debouncePeriod) == WAIT_OBJECT_0)

  004d0	e59d3000	 ldr         r3, [sp]
  004d4	e283301c	 add         r3, r3, #0x1C
  004d8	e5931000	 ldr         r1, [r3]
  004dc	e59d3000	 ldr         r3, [sp]
  004e0	e283300c	 add         r3, r3, #0xC
  004e4	e5930000	 ldr         r0, [r3]
  004e8	eb000000	 bl          WaitForSingleObject
  004ec	e58d000c	 str         r0, [sp, #0xC]
  004f0	e59d300c	 ldr         r3, [sp, #0xC]
  004f4	e3530000	 cmp         r3, #0
  004f8	1a000009	 bne         |$LN4@PKD_IntrTh|

; 323  :             {
; 324  :                 GPIOInterruptDone(pDevice->hGpio,pDevice->pinId,pDevice->dwSysintr);

  004fc	e59d3000	 ldr         r3, [sp]
  00500	e2833008	 add         r3, r3, #8
  00504	e5932000	 ldr         r2, [r3]
  00508	e59d3000	 ldr         r3, [sp]
  0050c	e2833004	 add         r3, r3, #4
  00510	e5931000	 ldr         r1, [r3]
  00514	e59d3000	 ldr         r3, [sp]
  00518	e5930000	 ldr         r0, [r3]
  0051c	eb000000	 bl          GPIOInterruptDone

; 325  :             }            

  00520	eaffffea	 b           |$LN5@PKD_IntrTh|
  00524		 |$LN4@PKD_IntrTh|

; 326  :             if (pDevice->fTerminateThread)

  00524	e59d3000	 ldr         r3, [sp]
  00528	e2833014	 add         r3, r3, #0x14
  0052c	e5933000	 ldr         r3, [r3]
  00530	e3530000	 cmp         r3, #0
  00534	0a000000	 beq         |$LN3@PKD_IntrTh|

; 327  :             {
; 328  :                 break;

  00538	ea000016	 b           |$LN7@PKD_IntrTh|
  0053c		 |$LN3@PKD_IntrTh|

; 329  :             }
; 330  :             if (GPIOGetBit(pDevice->hGpio,pDevice->pinId) == 0)

  0053c	e59d3000	 ldr         r3, [sp]
  00540	e2833004	 add         r3, r3, #4
  00544	e5931000	 ldr         r1, [r3]
  00548	e59d3000	 ldr         r3, [sp]
  0054c	e5930000	 ldr         r0, [r3]
  00550	eb000000	 bl          GPIOGetBit
  00554	e58d0010	 str         r0, [sp, #0x10]
  00558	e59d3010	 ldr         r3, [sp, #0x10]
  0055c	e3530000	 cmp         r3, #0
  00560	1a000005	 bne         |$LN2@PKD_IntrTh|

; 331  :             {
; 332  :                 // Key is pressed for more than xxx ms
; 333  :                 RETAILMSG(1,(TEXT("Power Key pressed!!!\r\n")));

  00564	e59f0078	 ldr         r0, [pc, #0x78]
  00568	eb000000	 bl          NKDbgPrintfW

; 334  :                 // suspend system
; 335  :                 SetSystemPowerState(NULL, POWER_STATE_SUSPEND, POWER_FORCE);

  0056c	e3a02a01	 mov         r2, #1, 20
  00570	e3a01602	 mov         r1, #2, 12
  00574	e3a00000	 mov         r0, #0
  00578	eb000000	 bl          SetSystemPowerState
  0057c		 |$LN2@PKD_IntrTh|
  0057c		 |$LN6@PKD_IntrTh|

; 336  :             }
; 337  :         }
; 338  :         if (pDevice->fTerminateThread)

  0057c	e59d3000	 ldr         r3, [sp]
  00580	e2833014	 add         r3, r3, #0x14
  00584	e5933000	 ldr         r3, [r3]
  00588	e3530000	 cmp         r3, #0
  0058c	0a000000	 beq         |$LN1@PKD_IntrTh|

; 339  :         {
; 340  :             break;

  00590	ea000000	 b           |$LN7@PKD_IntrTh|
  00594		 |$LN1@PKD_IntrTh|

; 341  :         }
; 342  : 
; 343  :     }

  00594	eaffffb6	 b           |$LN8@PKD_IntrTh|
  00598		 |$LN7@PKD_IntrTh|

; 344  : 
; 345  :     DEBUGMSG(ZONE_IST, (L"-PKD_IntrThread\r\n"));

  00598	e59f3040	 ldr         r3, [pc, #0x40]
  0059c	e5933440	 ldr         r3, [r3, #0x440]
  005a0	e3130010	 tst         r3, #0x10
  005a4	0a000004	 beq         |$LN11@PKD_IntrTh|
  005a8	e59f002c	 ldr         r0, [pc, #0x2C]
  005ac	eb000000	 bl          NKDbgPrintfW
  005b0	e3a03001	 mov         r3, #1
  005b4	e58d3014	 str         r3, [sp, #0x14]
  005b8	ea000001	 b           |$LN12@PKD_IntrTh|
  005bc		 |$LN11@PKD_IntrTh|
  005bc	e3a03000	 mov         r3, #0
  005c0	e58d3014	 str         r3, [sp, #0x14]
  005c4		 |$LN12@PKD_IntrTh|

; 346  :     return ERROR_SUCCESS;

  005c4	e3a03000	 mov         r3, #0
  005c8	e58d3004	 str         r3, [sp, #4]

; 347  : }

  005cc	e59d0004	 ldr         r0, [sp, #4]
  005d0	e28dd018	 add         sp, sp, #0x18
  005d4	e89d6000	 ldmia       sp, {sp, lr}
  005d8	e12fff1e	 bx          lr
  005dc		 |$LN16@PKD_IntrTh|
  005dc		 |$LN17@PKD_IntrTh|
  005dc	00000000	 DCD         |??_C@_1CE@ICCCMJPG@?$AA?9?$AAP?$AAK?$AAD?$AA_?$AAI?$AAn?$AAt?$AAr?$AAT?$AAh?$AAr?$AAe?$AAa?$AAd?$AA?$AN?$AA?6?$AA?$AA@|
  005e0		 |$LN18@PKD_IntrTh|
  005e0	00000000	 DCD         |dpCurSettings|
  005e4		 |$LN19@PKD_IntrTh|
  005e4	00000000	 DCD         |??_C@_1CO@IHCFLGPB@?$AAP?$AAo?$AAw?$AAe?$AAr?$AA?5?$AAK?$AAe?$AAy?$AA?5?$AAp?$AAr?$AAe?$AAs?$AAs?$AAe?$AAd?$AA?$CB?$AA?$CB?$AA?$CB?$AA?$AN?$AA?6?$AA?$AA@|
  005e8		 |$M43851|

			 ENDP  ; |PKD_IntrThread|

	EXPORT	|DllMain|
	IMPORT	|DisableThreadLibraryCalls|
	IMPORT	|RegisterDbgZones|

  00040			 AREA	 |.pdata|, PDATA
|$T43863| DCD	|$LN8@DllMain|
	DCD	0x40001404
; Function compile flags: /Odtp

  005e8			 AREA	 |.text|, CODE, ARM

  005e8		 |DllMain| PROC

; 362  : {

  005e8		 |$LN8@DllMain|
  005e8	e1a0c00d	 mov         r12, sp
  005ec	e92d0007	 stmdb       sp!, {r0 - r2}
  005f0	e92d5000	 stmdb       sp!, {r12, lr}
  005f4	e24dd004	 sub         sp, sp, #4
  005f8		 |$M43860|

; 363  :     UNREFERENCED_PARAMETER(pReserved);
; 364  :     switch (reason)

  005f8	e59d3010	 ldr         r3, [sp, #0x10]
  005fc	e3530001	 cmp         r3, #1
  00600	0a000000	 beq         |$LN1@DllMain|
  00604	ea000004	 b           |$LN2@DllMain|
  00608		 |$LN1@DllMain|

; 365  :     {
; 366  :     case DLL_PROCESS_ATTACH:
; 367  :         RETAILREGISTERZONES((HMODULE)hDLL);

  00608	e59f1024	 ldr         r1, [pc, #0x24]
  0060c	e59d000c	 ldr         r0, [sp, #0xC]
  00610	eb000000	 bl          RegisterDbgZones

; 368  :         DisableThreadLibraryCalls((HMODULE)hDLL);

  00614	e59d000c	 ldr         r0, [sp, #0xC]
  00618	eb000000	 bl          DisableThreadLibraryCalls
  0061c		 |$LN2@DllMain|

; 369  :         break;
; 370  :     }
; 371  :     return TRUE;

  0061c	e3a03001	 mov         r3, #1
  00620	e58d3000	 str         r3, [sp]

; 372  : }

  00624	e59d0000	 ldr         r0, [sp]
  00628	e28dd004	 add         sp, sp, #4
  0062c	e89d6000	 ldmia       sp, {sp, lr}
  00630	e12fff1e	 bx          lr
  00634		 |$LN9@DllMain|
  00634		 |$LN10@DllMain|
  00634	00000000	 DCD         |dpCurSettings|
  00638		 |$M43861|

			 ENDP  ; |DllMain|

	END
