; Listing generated by Microsoft (R) Optimizing Compiler Version 14.01.60511.01 

	TTL	C:\WINCE600\PLATFORM\COMMON\SRC\SOC\OMAP5912_MS_V1\OAL\PROFILER\profiler.c
	CODE32

  00000			 AREA	 |.drectve|, DRECTVE
	DCB	"-defaultlib:LIBCMT "
	DCB	"-defaultlib:OLDNAMES "

	EXPORT	|g_oalProfilerIrq| [ DATA ]
	EXPORT	|g_oalProfilerEnabled| [ DATA ]

  00000			 AREA	 |.bss|, NOINIT
|g_oalProfilerEnabled| % 0x4

  00000			 AREA	 |.data|, DATA
|g_oalProfilerIrq| DCD 0xffffffff

  00000			 AREA	 |.rdata|, DATA, READONLY
|EdbgVendorIds| DCW 0x0
	DCW	0x0
	DCD	0x4033
	DCB	0x1
	DCB	"AD", 0x0
	DCW	0x1050
	DCW	0x940
	DCD	0x4005
	DCB	0x1
	DCB	"LS", 0x0
	DCW	0x1050
	DCW	0x940
	DCD	0x2078
	DCB	0x1
	DCB	"LS", 0x0
	DCW	0x10ec
	DCW	0x8029
	DCD	0xc0f0
	DCB	0x1
	DCB	"KS", 0x0
	DCW	0x10ec
	DCW	0x8129
	DCD	0x0
	DCB	0x4
	DCB	"RT", 0x0
	DCW	0x10ec
	DCW	0x8139
	DCD	0x900b
	DCB	0x4
	DCB	"RT", 0x0
	DCW	0x10ec
	DCW	0x8139
	DCD	0xd0c9
	DCB	0x4
	DCB	"RT", 0x0
	DCW	0x10ec
	DCW	0x8139
	DCD	0xe04c
	DCB	0x4
	DCB	"RT", 0x0
	DCW	0x1186
	DCW	0x1300
	DCD	0x50ba
	DCB	0x4
	DCB	"DL", 0x0
	DCW	0x100b
	DCW	0x20
	DCD	0xa0cc
	DCB	0x5
	DCB	"NG", 0x0
	DCW	0x10b7
	DCW	0x9050
	DCD	0x6008
	DCB	0x6
	DCB	"3C", 0x0
	DCW	0x10b7
	DCW	0x9200
	DCD	0x476
	DCB	0x6
	DCB	"3C", 0x0
	EXPORT	|OEMProfileTimerEnable|
	EXPORT	|??_C@_1DC@ONFHCFK@?$AA?9?$AAO?$AAE?$AAM?$AAP?$AAr?$AAo?$AAf?$AAi?$AAl?$AAe?$AAT?$AAi?$AAm?$AAe?$AAr?$AAE?$AAn?$AAa?$AAb?$AAl?$AAe?$AA?$AN?$AA?6?$AA?$AA@| [ DATA ] ; `string'
	EXPORT	|??_C@_1DK@OJEFEGCL@?$AA?$CL?$AAO?$AAE?$AAM?$AAP?$AAr?$AAo?$AAf?$AAi?$AAl?$AAe?$AAT?$AAi?$AAm?$AAe?$AAr?$AAE?$AAn?$AAa?$AAb?$AAl?$AAe?$AA?$CI?$AA?$CF?$AAd?$AA?$CJ?$AA?$AN?$AA?6?$AA?$AA@| [ DATA ] ; `string'
	IMPORT	|OALIntrEnableIrqs|
	IMPORT	|OALPAtoVA|
	IMPORT	|INTERRUPTS_ENABLE|
	IMPORT	|NKDbgPrintfW|
; File c:\wince600\platform\common\src\soc\omap5912_ms_v1\oal\profiler\profiler.c

  00000			 AREA	 |.pdata|, PDATA
|$T43978| DCD	|$LN6@OEMProfile|
	DCD	0x40002a01

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1DC@ONFHCFK@?$AA?9?$AAO?$AAE?$AAM?$AAP?$AAr?$AAo?$AAf?$AAi?$AAl?$AAe?$AAT?$AAi?$AAm?$AAe?$AAr?$AAE?$AAn?$AAa?$AAb?$AAl?$AAe?$AA?$AN?$AA?6?$AA?$AA@| DCB "-"
	DCB	0x0, "O", 0x0, "E", 0x0, "M", 0x0, "P", 0x0, "r", 0x0, "o"
	DCB	0x0, "f", 0x0, "i", 0x0, "l", 0x0, "e", 0x0, "T", 0x0, "i"
	DCB	0x0, "m", 0x0, "e", 0x0, "r", 0x0, "E", 0x0, "n", 0x0, "a"
	DCB	0x0, "b", 0x0, "l", 0x0, "e", 0x0, 0xd, 0x0, 0xa, 0x0, 0x0
	DCB	0x0					; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1DK@OJEFEGCL@?$AA?$CL?$AAO?$AAE?$AAM?$AAP?$AAr?$AAo?$AAf?$AAi?$AAl?$AAe?$AAT?$AAi?$AAm?$AAe?$AAr?$AAE?$AAn?$AAa?$AAb?$AAl?$AAe?$AA?$CI?$AA?$CF?$AAd?$AA?$CJ?$AA?$AN?$AA?6?$AA?$AA@| DCB "+"
	DCB	0x0, "O", 0x0, "E", 0x0, "M", 0x0, "P", 0x0, "r", 0x0, "o"
	DCB	0x0, "f", 0x0, "i", 0x0, "l", 0x0, "e", 0x0, "T", 0x0, "i"
	DCB	0x0, "m", 0x0, "e", 0x0, "r", 0x0, "E", 0x0, "n", 0x0, "a"
	DCB	0x0, "b", 0x0, "l", 0x0, "e", 0x0, "(", 0x0, "%", 0x0, "d"
	DCB	0x0, ")", 0x0, 0xd, 0x0, 0xa, 0x0, 0x0, 0x0 ; `string'
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |OEMProfileTimerEnable| PROC

; 48   : {

  00000		 |$LN6@OEMProfile|
  00000	e92d40f0	 stmdb       sp!, {r4 - r7, lr}
  00004		 |$M43975|
  00004	e1a06000	 mov         r6, r0

; 49   :     BOOL enabled;
; 50   :     OMAP5912_TIMER_REGS *pTimer;
; 51   :     
; 52   :     OALMSG(TRUE, (L"+OEMProfileTimerEnable(%d)\r\n", interval));

  00008	e59f0094	 ldr         r0, [pc, #0x94]
  0000c	e1a01006	 mov         r1, r6
  00010	eb000000	 bl          NKDbgPrintfW

; 53   :     
; 54   :     // We can't enable timer second time
; 55   :     if (g_oalProfilerEnabled)

  00014	e59f7084	 ldr         r7, [pc, #0x84]
  00018	e5973000	 ldr         r3, [r7]
  0001c	e3530000	 cmp         r3, #0
  00020	1a000019	 bne         |$LN2@OEMProfile|

; 56   :         {
; 57   :         return;
; 58   :         }
; 59   : 
; 60   :     // Inform interrupt module
; 61   :     g_oalProfilerIrq = IRQ_TIMER1;

  00024	e59f5070	 ldr         r5, [pc, #0x70]
  00028	e3a0301a	 mov         r3, #0x1A

; 62   : 
; 63   :     // Following code should not be interrupted
; 64   :     enabled = INTERRUPTS_ENABLE(FALSE);

  0002c	e3a00000	 mov         r0, #0
  00030	e5853000	 str         r3, [r5]
  00034	eb000000	 bl          INTERRUPTS_ENABLE
  00038	e3a03c01	 mov         r3, #1, 24
  0003c	e1a04000	 mov         r4, r0

; 65   : 
; 66   :     // Setup timer 1 for profiling
; 67   :     pTimer = OALPAtoVA(OMAP5912_TIMER1_REGS_PA, FALSE);

  00040	e2430b4f	 sub         r0, r3, #0x4F, 22
  00044	e3a01000	 mov         r1, #0
  00048	eb000000	 bl          OALPAtoVA

; 68   :     OUTREG32(&pTimer->LOAD, (65U * interval)/10U);

  0004c	e59f3044	 ldr         r3, [pc, #0x44]
  00050	e086e306	 add         lr, r6, r6, lsl #6

; 69   :     OUTREG32(&pTimer->CNTL, (TIMER_CNTL_FREE | TIMER_CNTL_PVT_2 | TIMER_CNTL_CLK_EN |
; 70   :                     TIMER_CNTL_AR | TIMER_CNTL_ST));

  00054	e3a01063	 mov         r1, #0x63
  00058	e083239e	 umull       r2, r3, lr, r3

; 71   :     
; 72   :     // Set flag
; 73   :     g_oalProfilerEnabled = TRUE;

  0005c	e3a06001	 mov         r6, #1
  00060	e1a031a3	 mov         r3, r3, lsr #3
  00064	e5803004	 str         r3, [r0, #4]
  00068	e5801000	 str         r1, [r0]

; 74   : 
; 75   :     // Enable interrupts
; 76   :     INTERRUPTS_ENABLE(enabled);

  0006c	e1a00004	 mov         r0, r4
  00070	e5876000	 str         r6, [r7]
  00074	eb000000	 bl          INTERRUPTS_ENABLE

; 77   : 
; 78   :     // Enable profiling interrupt
; 79   :     OALIntrEnableIrqs(1, &g_oalProfilerIrq);

  00078	e1a01005	 mov         r1, r5
  0007c	e3a00001	 mov         r0, #1
  00080	eb000000	 bl          OALIntrEnableIrqs

; 80   : 
; 81   :     OALMSG(TRUE, (L"-OEMProfileTimerEnable\r\n"));

  00084	e59f0008	 ldr         r0, [pc, #8]
  00088	eb000000	 bl          NKDbgPrintfW
  0008c		 |$LN2@OEMProfile|

; 82   : }

  0008c	e8bd40f0	 ldmia       sp!, {r4 - r7, lr}
  00090	e12fff1e	 bx          lr
  00094		 |$LN7@OEMProfile|
  00094		 |$LN8@OEMProfile|
  00094	00000000	 DCD         |??_C@_1DC@ONFHCFK@?$AA?9?$AAO?$AAE?$AAM?$AAP?$AAr?$AAo?$AAf?$AAi?$AAl?$AAe?$AAT?$AAi?$AAm?$AAe?$AAr?$AAE?$AAn?$AAa?$AAb?$AAl?$AAe?$AA?$AN?$AA?6?$AA?$AA@|
  00098		 |$LN9@OEMProfile|
  00098	cccccccd	 DCD         0xcccccccd
  0009c		 |$LN10@OEMProfile|
  0009c	00000000	 DCD         |g_oalProfilerIrq|
  000a0		 |$LN11@OEMProfile|
  000a0	00000000	 DCD         |g_oalProfilerEnabled|
  000a4		 |$LN12@OEMProfile|
  000a4	00000000	 DCD         |??_C@_1DK@OJEFEGCL@?$AA?$CL?$AAO?$AAE?$AAM?$AAP?$AAr?$AAo?$AAf?$AAi?$AAl?$AAe?$AAT?$AAi?$AAm?$AAe?$AAr?$AAE?$AAn?$AAa?$AAb?$AAl?$AAe?$AA?$CI?$AA?$CF?$AAd?$AA?$CJ?$AA?$AN?$AA?6?$AA?$AA@|
  000a8		 |$M43976|

			 ENDP  ; |OEMProfileTimerEnable|

	EXPORT	|OEMProfileTimerDisable|
	EXPORT	|??_C@_1DE@DGCDHBJ@?$AA?9?$AAO?$AAE?$AAM?$AAP?$AAr?$AAo?$AAf?$AAi?$AAl?$AAe?$AAT?$AAi?$AAm?$AAe?$AAr?$AAD?$AAi?$AAs?$AAa?$AAb?$AAl?$AAe?$AA?$AN?$AA?6?$AA?$AA@| [ DATA ] ; `string'
	EXPORT	|??_C@_1DI@ICCHIFPG@?$AA?$CL?$AAO?$AAE?$AAM?$AAP?$AAr?$AAo?$AAf?$AAi?$AAl?$AAe?$AAT?$AAi?$AAm?$AAe?$AAr?$AAD?$AAi?$AAs?$AAa?$AAb?$AAl?$AAe?$AA?$CI?$AA?$CJ?$AA?$AN?$AA?6?$AA?$AA@| [ DATA ] ; `string'
	IMPORT	|OALIntrDisableIrqs|

  00000			 AREA	 |.pdata|, PDATA
|$T43993| DCD	|$LN6@OEMProfile@2|
	DCD	0x40002401

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1DE@DGCDHBJ@?$AA?9?$AAO?$AAE?$AAM?$AAP?$AAr?$AAo?$AAf?$AAi?$AAl?$AAe?$AAT?$AAi?$AAm?$AAe?$AAr?$AAD?$AAi?$AAs?$AAa?$AAb?$AAl?$AAe?$AA?$AN?$AA?6?$AA?$AA@| DCB "-"
	DCB	0x0, "O", 0x0, "E", 0x0, "M", 0x0, "P", 0x0, "r", 0x0, "o"
	DCB	0x0, "f", 0x0, "i", 0x0, "l", 0x0, "e", 0x0, "T", 0x0, "i"
	DCB	0x0, "m", 0x0, "e", 0x0, "r", 0x0, "D", 0x0, "i", 0x0, "s"
	DCB	0x0, "a", 0x0, "b", 0x0, "l", 0x0, "e", 0x0, 0xd, 0x0, 0xa
	DCB	0x0, 0x0, 0x0				; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1DI@ICCHIFPG@?$AA?$CL?$AAO?$AAE?$AAM?$AAP?$AAr?$AAo?$AAf?$AAi?$AAl?$AAe?$AAT?$AAi?$AAm?$AAe?$AAr?$AAD?$AAi?$AAs?$AAa?$AAb?$AAl?$AAe?$AA?$CI?$AA?$CJ?$AA?$AN?$AA?6?$AA?$AA@| DCB "+"
	DCB	0x0, "O", 0x0, "E", 0x0, "M", 0x0, "P", 0x0, "r", 0x0, "o"
	DCB	0x0, "f", 0x0, "i", 0x0, "l", 0x0, "e", 0x0, "T", 0x0, "i"
	DCB	0x0, "m", 0x0, "e", 0x0, "r", 0x0, "D", 0x0, "i", 0x0, "s"
	DCB	0x0, "a", 0x0, "b", 0x0, "l", 0x0, "e", 0x0, "(", 0x0, ")"
	DCB	0x0, 0xd, 0x0, 0xa, 0x0, 0x0, 0x0	; `string'
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |OEMProfileTimerDisable| PROC

; 93   : {

  00000		 |$LN6@OEMProfile@2|
  00000	e92d4030	 stmdb       sp!, {r4, r5, lr}
  00004		 |$M43990|

; 94   :     BOOL enabled;
; 95   :     OMAP5912_TIMER_REGS *pTimer;
; 96   : 
; 97   :     OALMSG(TRUE, (L"+OEMProfileTimerDisable()\r\n"));

  00004	e59f0080	 ldr         r0, [pc, #0x80]
  00008	eb000000	 bl          NKDbgPrintfW

; 98   : 
; 99   :     // No disable without enable
; 100  :     if (!g_oalProfilerEnabled)

  0000c	e59f5074	 ldr         r5, [pc, #0x74]
  00010	e5953000	 ldr         r3, [r5]
  00014	e3530000	 cmp         r3, #0
  00018	0a000014	 beq         |$cleanUp$43945|
  0001c	e3a03c01	 mov         r3, #1, 24

; 101  :         {
; 102  :         goto cleanUp;
; 103  :         }
; 104  : 
; 105  :     // Stop timer 1
; 106  :     pTimer = OALPAtoVA(OMAP5912_TIMER1_REGS_PA, FALSE);

  00020	e2430b4f	 sub         r0, r3, #0x4F, 22
  00024	e3a01000	 mov         r1, #0
  00028	eb000000	 bl          OALPAtoVA
  0002c	e1a02000	 mov         r2, r0

; 107  :     CLRREG32(&pTimer->CNTL, TIMER_CNTL_ST);

  00030	e5923000	 ldr         r3, [r2]

; 108  :     
; 109  :     // Following code should not be interrupted
; 110  :     enabled = INTERRUPTS_ENABLE(FALSE);

  00034	e3a00000	 mov         r0, #0
  00038	e3c33001	 bic         r3, r3, #1
  0003c	e5823000	 str         r3, [r2]
  00040	eb000000	 bl          INTERRUPTS_ENABLE

; 111  : 
; 112  :     // Inform interrupt module
; 113  :     g_oalProfilerIrq = OAL_INTR_IRQ_UNDEFINED;

  00044	e59f3038	 ldr         r3, [pc, #0x38]
  00048	e1a04000	 mov         r4, r0
  0004c	e3e02000	 mvn         r2, #0

; 114  : 
; 115  :     // Disable the profile timer interrupt
; 116  :     OALIntrDisableIrqs(1, &g_oalProfilerIrq);

  00050	e1a01003	 mov         r1, r3
  00054	e3a00001	 mov         r0, #1
  00058	e5832000	 str         r2, [r3]
  0005c	eb000000	 bl          OALIntrDisableIrqs

; 117  : 
; 118  :     // Reset flag
; 119  :     g_oalProfilerEnabled = FALSE;

  00060	e3a03000	 mov         r3, #0

; 120  : 
; 121  :     // Enable interrupts
; 122  :     INTERRUPTS_ENABLE(enabled);

  00064	e1a00004	 mov         r0, r4
  00068	e5853000	 str         r3, [r5]
  0006c	eb000000	 bl          INTERRUPTS_ENABLE
  00070		 |$cleanUp$43945|

; 123  : 
; 124  : cleanUp:
; 125  :     OALMSG(TRUE, (L"-OEMProfileTimerDisable\r\n"));

  00070	e59f0008	 ldr         r0, [pc, #8]
  00074	eb000000	 bl          NKDbgPrintfW

; 126  : }

  00078	e8bd4030	 ldmia       sp!, {r4, r5, lr}
  0007c	e12fff1e	 bx          lr
  00080		 |$LN7@OEMProfile@2|
  00080		 |$LN8@OEMProfile@2|
  00080	00000000	 DCD         |??_C@_1DE@DGCDHBJ@?$AA?9?$AAO?$AAE?$AAM?$AAP?$AAr?$AAo?$AAf?$AAi?$AAl?$AAe?$AAT?$AAi?$AAm?$AAe?$AAr?$AAD?$AAi?$AAs?$AAa?$AAb?$AAl?$AAe?$AA?$AN?$AA?6?$AA?$AA@|
  00084		 |$LN9@OEMProfile@2|
  00084	00000000	 DCD         |g_oalProfilerIrq|
  00088		 |$LN10@OEMProfile@2|
  00088	00000000	 DCD         |g_oalProfilerEnabled|
  0008c		 |$LN11@OEMProfile@2|
  0008c	00000000	 DCD         |??_C@_1DI@ICCHIFPG@?$AA?$CL?$AAO?$AAE?$AAM?$AAP?$AAr?$AAo?$AAf?$AAi?$AAl?$AAe?$AAT?$AAi?$AAm?$AAe?$AAr?$AAD?$AAi?$AAs?$AAa?$AAb?$AAl?$AAe?$AA?$CI?$AA?$CJ?$AA?$AN?$AA?6?$AA?$AA@|
  00090		 |$M43991|

			 ENDP  ; |OEMProfileTimerDisable|

	END
