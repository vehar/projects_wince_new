; Listing generated by Microsoft (R) Optimizing Compiler Version 14.01.60511.01 

	TTL	C:\WINCE600\PLATFORM\COMMON\SRC\SOC\OMAP2420_MS_V1\BACKLIGHT\backlight.c
	CODE32

  00000			 AREA	 |.drectve|, DRECTVE
	DCB	"-defaultlib:LIBCMT "
	DCB	"-defaultlib:OLDNAMES "

	EXPORT	|dpCurSettings| [ DATA ]

  00000			 AREA	 |.data|, DATA
	 COMMON	|DEVICE_IFC_I2C_GUID|, 0x10

|dpCurSettings| DCB "B", 0x0, "a", 0x0, "c", 0x0, "k", 0x0, "l", 0x0, "i", 0x0
	DCB	"g", 0x0, "h", 0x0, "t", 0x0, 0x0, 0x0
	%	44
	DCB	"E", 0x0, "r", 0x0, "r", 0x0, "o", 0x0, "r", 0x0, "s", 0x0
	DCB	0x0, 0x0
	%	50
	DCB	"W", 0x0, "a", 0x0, "r", 0x0, "n", 0x0, "i", 0x0, "n", 0x0
	DCB	"g", 0x0, "s", 0x0, 0x0, 0x0
	%	46
	DCB	"F", 0x0, "u", 0x0, "n", 0x0, "c", 0x0, "t", 0x0, "i", 0x0
	DCB	"o", 0x0, "n", 0x0, 0x0, 0x0
	%	46
	DCB	"I", 0x0, "n", 0x0, "i", 0x0, "t", 0x0, 0x0, 0x0
	%	54
	DCB	"I", 0x0, "n", 0x0, "f", 0x0, "o", 0x0, 0x0, 0x0
	%	54
	DCB	"I", 0x0, "O", 0x0, "C", 0x0, "T", 0x0, "L", 0x0, 0x0, 0x0
	%	52
	DCB	"I", 0x0, "2", 0x0, "C", 0x0, " ", 0x0, "S", 0x0, "e", 0x0
	DCB	"t", 0x0, "u", 0x0, "p", 0x0, 0x0, 0x0
	%	44
	DCB	"P", 0x0, "o", 0x0, "w", 0x0, "e", 0x0, "r", 0x0, 0x0, 0x0
	%	52
	DCB	"U", 0x0, "n", 0x0, "d", 0x0, "e", 0x0, "f", 0x0, "i", 0x0
	DCB	"n", 0x0, "e", 0x0, "d", 0x0, 0x0, 0x0
	%	44
	DCB	"U", 0x0, "n", 0x0, "d", 0x0, "e", 0x0, "f", 0x0, "i", 0x0
	DCB	"n", 0x0, "e", 0x0, "d", 0x0, 0x0, 0x0
	%	44
	DCB	"U", 0x0, "n", 0x0, "d", 0x0, "e", 0x0, "f", 0x0, "i", 0x0
	DCB	"n", 0x0, "e", 0x0, "d", 0x0, 0x0, 0x0
	%	44
	DCB	"U", 0x0, "n", 0x0, "d", 0x0, "e", 0x0, "f", 0x0, "i", 0x0
	DCB	"n", 0x0, "e", 0x0, "d", 0x0, 0x0, 0x0
	%	44
	DCB	"U", 0x0, "n", 0x0, "d", 0x0, "e", 0x0, "f", 0x0, "i", 0x0
	DCB	"n", 0x0, "e", 0x0, "d", 0x0, 0x0, 0x0
	%	44
	DCB	"U", 0x0, "n", 0x0, "d", 0x0, "e", 0x0, "f", 0x0, "i", 0x0
	DCB	"n", 0x0, "e", 0x0, "d", 0x0, 0x0, 0x0
	%	44
	DCB	"U", 0x0, "n", 0x0, "d", 0x0, "e", 0x0, "f", 0x0, "i", 0x0
	DCB	"n", 0x0, "e", 0x0, "d", 0x0, 0x0, 0x0
	%	44
	DCB	"U", 0x0, "n", 0x0, "d", 0x0, "e", 0x0, "f", 0x0, "i", 0x0
	DCB	"n", 0x0, "e", 0x0, "d", 0x0, 0x0, 0x0
	%	44
	DCD	0xc000
	EXPORT	|I2CClose|
	EXPORT	|??_C@_1DK@PNHLBHAK@?$AA?9?$AAB?$AAK?$AAL?$AA_?$AAS?$AAe?$AAt?$AAS?$AAt?$AAa?$AAt?$AAe?$AA?$CI?$AAr?$AAe?$AAt?$AAV?$AAa?$AAl?$AA?5?$AA?$DN?$AA?5?$AA?$CF?$AAd?$AA?$CJ?$AA?$AN?$AA?6?$AA?$AA@| [ DATA ] ; `string'
	EXPORT	|??_C@_1KA@MPLFDLNP@?$AAB?$AAK?$AAL?$AA_?$AAS?$AAe?$AAt?$AAS?$AAt?$AAa?$AAt?$AAe?$AA?$CI?$AA?$CJ?$AA?5?$AA?9?$AA?5?$AAE?$AAR?$AAR?$AAO?$AAR?$AA?3?$AA?5?$AAI?$AA2?$AAC?$AA?5?$AAW?$AAr?$AAi?$AAt@| [ DATA ] ; `string'
	EXPORT	|??_C@_1JA@PLHEIGGA@?$AAB?$AAK?$AAL?$AA_?$AAS?$AAe?$AAt?$AAS?$AAt?$AAa?$AAt?$AAe?$AA?$CI?$AA?$CJ?$AA?5?$AA?9?$AA?5?$AAE?$AAR?$AAR?$AAO?$AAR?$AA?3?$AA?5?$AAI?$AA2?$AAC?$AA?5?$AAR?$AAe?$AAa?$AAd@| [ DATA ] ; `string'
	EXPORT	|I2CTransact|
	EXPORT	|??_C@_1HG@BIJIJNNB@?$AAE?$AAR?$AAR?$AAO?$AAR?$AA?3?$AA?5?$AAB?$AAK?$AAL?$AA_?$AAS?$AAe?$AAt?$AAS?$AAt?$AAa?$AAt?$AAe?$AA?3?$AA?5?$AAF?$AAa?$AAi?$AAl?$AAe?$AAd?$AA?5?$AAt?$AAo?$AA?5?$AAs@| [ DATA ] ; `string'
	EXPORT	|I2CSetSlaveAddress|
	EXPORT	|??_C@_1FM@MGGGNJLF@?$AAE?$AAR?$AAR?$AAO?$AAR?$AA?3?$AA?5?$AAB?$AAK?$AAL?$AA_?$AAS?$AAe?$AAt?$AAS?$AAt?$AAa?$AAt?$AAe?$AA?3?$AA?5?$AAF?$AAa?$AAi?$AAl?$AAe?$AAd?$AA?5?$AAo?$AAp?$AAe?$AAn@| [ DATA ] ; `string'
	EXPORT	|I2COpen|
	EXPORT	|??_C@_1M@LCEEOPDH@?$AAI?$AA2?$AAC?$AA1?$AA?3?$AA?$AA@| [ DATA ] ; `string'
	EXPORT	|??_C@_1CI@LFDILJDJ@?$AA?$CL?$AAB?$AAK?$AAL?$AA_?$AAS?$AAe?$AAt?$AAS?$AAt?$AAa?$AAt?$AAe?$AA?$CI?$AA?$CF?$AAd?$AA?$CJ?$AA?$AN?$AA?6?$AA?$AA@| [ DATA ] ; `string'
	EXPORT	|__$ArrayPad$| [ DATA ]
	EXPORT	|BKL_SetState|
	IMPORT	|memset|
	IMPORT	|NKDbgPrintfW|
	IMPORT	|__security_cookie|
	IMPORT	|__GSHandlerCheck|
	IMPORT	|__security_check_cookie|

  00000			 AREA	 |.pdata|, PDATA
|$T43071| DCD	|$LN26@BKL_SetSta|
	DCD	0xc000b304
; File c:\wince600\platform\common\src\soc\omap2420_ms_v1\backlight\backlight.c

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1DK@PNHLBHAK@?$AA?9?$AAB?$AAK?$AAL?$AA_?$AAS?$AAe?$AAt?$AAS?$AAt?$AAa?$AAt?$AAe?$AA?$CI?$AAr?$AAe?$AAt?$AAV?$AAa?$AAl?$AA?5?$AA?$DN?$AA?5?$AA?$CF?$AAd?$AA?$CJ?$AA?$AN?$AA?6?$AA?$AA@| DCB "-"
	DCB	0x0, "B", 0x0, "K", 0x0, "L", 0x0, "_", 0x0, "S", 0x0, "e"
	DCB	0x0, "t", 0x0, "S", 0x0, "t", 0x0, "a", 0x0, "t", 0x0, "e"
	DCB	0x0, "(", 0x0, "r", 0x0, "e", 0x0, "t", 0x0, "V", 0x0, "a"
	DCB	0x0, "l", 0x0, " ", 0x0, "=", 0x0, " ", 0x0, "%", 0x0, "d"
	DCB	0x0, ")", 0x0, 0xd, 0x0, 0xa, 0x0, 0x0, 0x0 ; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1KA@MPLFDLNP@?$AAB?$AAK?$AAL?$AA_?$AAS?$AAe?$AAt?$AAS?$AAt?$AAa?$AAt?$AAe?$AA?$CI?$AA?$CJ?$AA?5?$AA?9?$AA?5?$AAE?$AAR?$AAR?$AAO?$AAR?$AA?3?$AA?5?$AAI?$AA2?$AAC?$AA?5?$AAW?$AAr?$AAi?$AAt@| DCB "B"
	DCB	0x0, "K", 0x0, "L", 0x0, "_", 0x0, "S", 0x0, "e", 0x0, "t"
	DCB	0x0, "S", 0x0, "t", 0x0, "a", 0x0, "t", 0x0, "e", 0x0, "("
	DCB	0x0, ")", 0x0, " ", 0x0, "-", 0x0, " ", 0x0, "E", 0x0, "R"
	DCB	0x0, "R", 0x0, "O", 0x0, "R", 0x0, ":", 0x0, " ", 0x0, "I"
	DCB	0x0, "2", 0x0, "C", 0x0, " ", 0x0, "W", 0x0, "r", 0x0, "i"
	DCB	0x0, "t", 0x0, "e", 0x0, "/", 0x0, "V", 0x0, "e", 0x0, "r"
	DCB	0x0, "i", 0x0, "f", 0x0, "y", 0x0, " ", 0x0, "T", 0x0, "r"
	DCB	0x0, "a", 0x0, "n", 0x0, "s", 0x0, "a", 0x0, "c", 0x0, "t"
	DCB	0x0, "i", 0x0, "o", 0x0, "n", 0x0, " ", 0x0, "F", 0x0, "a"
	DCB	0x0, "i", 0x0, "l", 0x0, "e", 0x0, "d", 0x0, " ", 0x0, "w"
	DCB	0x0, "i", 0x0, "t", 0x0, "h", 0x0, " ", 0x0, "E", 0x0, "r"
	DCB	0x0, "r", 0x0, "o", 0x0, "r", 0x0, " ", 0x0, "0", 0x0, "x"
	DCB	0x0, "%", 0x0, "0", 0x0, "8", 0x0, "X", 0x0, 0xd, 0x0, 0xa
	DCB	0x0, 0x0, 0x0				; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1JA@PLHEIGGA@?$AAB?$AAK?$AAL?$AA_?$AAS?$AAe?$AAt?$AAS?$AAt?$AAa?$AAt?$AAe?$AA?$CI?$AA?$CJ?$AA?5?$AA?9?$AA?5?$AAE?$AAR?$AAR?$AAO?$AAR?$AA?3?$AA?5?$AAI?$AA2?$AAC?$AA?5?$AAR?$AAe?$AAa?$AAd@| DCB "B"
	DCB	0x0, "K", 0x0, "L", 0x0, "_", 0x0, "S", 0x0, "e", 0x0, "t"
	DCB	0x0, "S", 0x0, "t", 0x0, "a", 0x0, "t", 0x0, "e", 0x0, "("
	DCB	0x0, ")", 0x0, " ", 0x0, "-", 0x0, " ", 0x0, "E", 0x0, "R"
	DCB	0x0, "R", 0x0, "O", 0x0, "R", 0x0, ":", 0x0, " ", 0x0, "I"
	DCB	0x0, "2", 0x0, "C", 0x0, " ", 0x0, "R", 0x0, "e", 0x0, "a"
	DCB	0x0, "d", 0x0, " ", 0x0, "T", 0x0, "r", 0x0, "a", 0x0, "n"
	DCB	0x0, "s", 0x0, "a", 0x0, "c", 0x0, "t", 0x0, "i", 0x0, "o"
	DCB	0x0, "n", 0x0, " ", 0x0, "F", 0x0, "a", 0x0, "i", 0x0, "l"
	DCB	0x0, "e", 0x0, "d", 0x0, " ", 0x0, "w", 0x0, "i", 0x0, "t"
	DCB	0x0, "h", 0x0, " ", 0x0, "E", 0x0, "r", 0x0, "r", 0x0, "o"
	DCB	0x0, "r", 0x0, " ", 0x0, "0", 0x0, "x", 0x0, "%", 0x0, "0"
	DCB	0x0, "8", 0x0, "X", 0x0, 0xd, 0x0, 0xa, 0x0, 0x0, 0x0 ; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1HG@BIJIJNNB@?$AAE?$AAR?$AAR?$AAO?$AAR?$AA?3?$AA?5?$AAB?$AAK?$AAL?$AA_?$AAS?$AAe?$AAt?$AAS?$AAt?$AAa?$AAt?$AAe?$AA?3?$AA?5?$AAF?$AAa?$AAi?$AAl?$AAe?$AAd?$AA?5?$AAt?$AAo?$AA?5?$AAs@| DCB "E"
	DCB	0x0, "R", 0x0, "R", 0x0, "O", 0x0, "R", 0x0, ":", 0x0, " "
	DCB	0x0, "B", 0x0, "K", 0x0, "L", 0x0, "_", 0x0, "S", 0x0, "e"
	DCB	0x0, "t", 0x0, "S", 0x0, "t", 0x0, "a", 0x0, "t", 0x0, "e"
	DCB	0x0, ":", 0x0, " ", 0x0, "F", 0x0, "a", 0x0, "i", 0x0, "l"
	DCB	0x0, "e", 0x0, "d", 0x0, " ", 0x0, "t", 0x0, "o", 0x0, " "
	DCB	0x0, "s", 0x0, "e", 0x0, "t", 0x0, " ", 0x0, "b", 0x0, "a"
	DCB	0x0, "c", 0x0, "k", 0x0, "l", 0x0, "i", 0x0, "g", 0x0, "h"
	DCB	0x0, "t", 0x0, " ", 0x0, "I", 0x0, "2", 0x0, "C", 0x0, " "
	DCB	0x0, "a", 0x0, "d", 0x0, "d", 0x0, "r", 0x0, "e", 0x0, "s"
	DCB	0x0, "s", 0x0, 0xd, 0x0, 0xa, 0x0, 0x0, 0x0 ; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1FM@MGGGNJLF@?$AAE?$AAR?$AAR?$AAO?$AAR?$AA?3?$AA?5?$AAB?$AAK?$AAL?$AA_?$AAS?$AAe?$AAt?$AAS?$AAt?$AAa?$AAt?$AAe?$AA?3?$AA?5?$AAF?$AAa?$AAi?$AAl?$AAe?$AAd?$AA?5?$AAo?$AAp?$AAe?$AAn@| DCB "E"
	DCB	0x0, "R", 0x0, "R", 0x0, "O", 0x0, "R", 0x0, ":", 0x0, " "
	DCB	0x0, "B", 0x0, "K", 0x0, "L", 0x0, "_", 0x0, "S", 0x0, "e"
	DCB	0x0, "t", 0x0, "S", 0x0, "t", 0x0, "a", 0x0, "t", 0x0, "e"
	DCB	0x0, ":", 0x0, " ", 0x0, "F", 0x0, "a", 0x0, "i", 0x0, "l"
	DCB	0x0, "e", 0x0, "d", 0x0, " ", 0x0, "o", 0x0, "p", 0x0, "e"
	DCB	0x0, "n", 0x0, " ", 0x0, "I", 0x0, "2", 0x0, "C", 0x0, " "
	DCB	0x0, "d", 0x0, "e", 0x0, "v", 0x0, "i", 0x0, "c", 0x0, "e"
	DCB	0x0, 0xd, 0x0, 0xa, 0x0, 0x0, 0x0	; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1M@LCEEOPDH@?$AAI?$AA2?$AAC?$AA1?$AA?3?$AA?$AA@| DCB "I", 0x0, "2", 0x0
	DCB	"C", 0x0, "1", 0x0, ":", 0x0, 0x0, 0x0	; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1CI@LFDILJDJ@?$AA?$CL?$AAB?$AAK?$AAL?$AA_?$AAS?$AAe?$AAt?$AAS?$AAt?$AAa?$AAt?$AAe?$AA?$CI?$AA?$CF?$AAd?$AA?$CJ?$AA?$AN?$AA?6?$AA?$AA@| DCB "+"
	DCB	0x0, "B", 0x0, "K", 0x0, "L", 0x0, "_", 0x0, "S", 0x0, "e"
	DCB	0x0, "t", 0x0, "S", 0x0, "t", 0x0, "a", 0x0, "t", 0x0, "e"
	DCB	0x0, "(", 0x0, "%", 0x0, "d", 0x0, ")", 0x0, 0xd, 0x0, 0xa
	DCB	0x0, 0x0, 0x0				; `string'

  00000			 AREA	 |.xdata|, DATA
|$T43067| DCD	0xffffffcc
; Function compile flags: /Odtp

  00000			 AREA	 |.text|, CODE, ARM

  00000	00000000	 DCD         |__GSHandlerCheck|
  00004	00000000	 DCD         |$T43067|

  00008		 |BKL_SetState| PROC

; 90   : {

  00008		 |$LN26@BKL_SetSta|
  00008	e1a0c00d	 mov         r12, sp
  0000c	e92d0001	 stmdb       sp!, {r0}
  00010	e92d5000	 stmdb       sp!, {r12, lr}
  00014	e24dde1a	 sub         sp, sp, #0x1A, 28
  00018		 |$M43068|
  00018	e59f32b0	 ldr         r3, [pc, #0x2B0]
  0001c	e5933000	 ldr         r3, [r3]
  00020	e58d3178	 str         r3, [sp, #0x178]

; 91   :     HANDLE hI2C = NULL ;

  00024	e3a03000	 mov         r3, #0
  00028	e58d3000	 str         r3, [sp]

; 92   :     BOOL retVal = FALSE;

  0002c	e3a03000	 mov         r3, #0
  00030	e58d3004	 str         r3, [sp, #4]

; 93   :     I2CTRANS sI2C_Transaction;
; 94   : 
; 95   :     DEBUGMSG(ZONE_FUNCTION, (L"+BKL_SetState(%d)\r\n", bEnable));

  00034	e59f3278	 ldr         r3, [pc, #0x278]
  00038	e5933440	 ldr         r3, [r3, #0x440]
  0003c	e3130004	 tst         r3, #4
  00040	0a000005	 beq         |$LN12@BKL_SetSta|
  00044	e59d11a8	 ldr         r1, [sp, #0x1A8]
  00048	e59f027c	 ldr         r0, [pc, #0x27C]
  0004c	eb000000	 bl          NKDbgPrintfW
  00050	e3a03001	 mov         r3, #1
  00054	e58d3180	 str         r3, [sp, #0x180]
  00058	ea000001	 b           |$LN13@BKL_SetSta|
  0005c		 |$LN12@BKL_SetSta|
  0005c	e3a03000	 mov         r3, #0
  00060	e58d3180	 str         r3, [sp, #0x180]
  00064		 |$LN13@BKL_SetSta|

; 96   : 
; 97   :     // open I2C bus
; 98   :     hI2C = I2COpen(I2C_DEVICE_NAME);

  00064	e59f025c	 ldr         r0, [pc, #0x25C]
  00068	eb000000	 bl          I2COpen
  0006c	e58d0184	 str         r0, [sp, #0x184]
  00070	e59d3184	 ldr         r3, [sp, #0x184]
  00074	e58d3000	 str         r3, [sp]

; 99   : 
; 100  :     if (hI2C == NULL) {

  00078	e59d3000	 ldr         r3, [sp]
  0007c	e3530000	 cmp         r3, #0
  00080	1a00000b	 bne         |$LN9@BKL_SetSta|

; 101  :         DEBUGMSG(ZONE_ERROR, (L"ERROR: BKL_SetState: "
; 102  :             L"Failed open I2C device\r\n"
; 103  :         ));

  00084	e59f3228	 ldr         r3, [pc, #0x228]
  00088	e5933440	 ldr         r3, [r3, #0x440]
  0008c	e3130001	 tst         r3, #1
  00090	0a000004	 beq         |$LN14@BKL_SetSta|
  00094	e59f0228	 ldr         r0, [pc, #0x228]
  00098	eb000000	 bl          NKDbgPrintfW
  0009c	e3a03001	 mov         r3, #1
  000a0	e58d3188	 str         r3, [sp, #0x188]
  000a4	ea000001	 b           |$LN15@BKL_SetSta|
  000a8		 |$LN14@BKL_SetSta|
  000a8	e3a03000	 mov         r3, #0
  000ac	e58d3188	 str         r3, [sp, #0x188]
  000b0		 |$LN15@BKL_SetSta|

; 104  :         goto cleanUp;

  000b0	ea000061	 b           |$cleanUp$42790|
  000b4		 |$LN9@BKL_SetSta|

; 105  :     }
; 106  : 
; 107  :     if (!I2CSetSlaveAddress( hI2C, I2C_BACKLIGHT_ADDRSIZE, I2C_BACKLIGHT_ADDRESS) )

  000b4	e3a02020	 mov         r2, #0x20
  000b8	e3a01007	 mov         r1, #7
  000bc	e59d0000	 ldr         r0, [sp]
  000c0	eb000000	 bl          I2CSetSlaveAddress
  000c4	e58d018c	 str         r0, [sp, #0x18C]
  000c8	e59d318c	 ldr         r3, [sp, #0x18C]
  000cc	e3530000	 cmp         r3, #0
  000d0	1a00000b	 bne         |$LN8@BKL_SetSta|

; 108  :     {
; 109  : 
; 110  :         DEBUGMSG(ZONE_ERROR, (L"ERROR: BKL_SetState: "
; 111  :             L"Failed to set backlight I2C address\r\n"
; 112  :         ));

  000d4	e59f31d8	 ldr         r3, [pc, #0x1D8]
  000d8	e5933440	 ldr         r3, [r3, #0x440]
  000dc	e3130001	 tst         r3, #1
  000e0	0a000004	 beq         |$LN16@BKL_SetSta|
  000e4	e59f01d4	 ldr         r0, [pc, #0x1D4]
  000e8	eb000000	 bl          NKDbgPrintfW
  000ec	e3a03001	 mov         r3, #1
  000f0	e58d3190	 str         r3, [sp, #0x190]
  000f4	ea000001	 b           |$LN17@BKL_SetSta|
  000f8		 |$LN16@BKL_SetSta|
  000f8	e3a03000	 mov         r3, #0
  000fc	e58d3190	 str         r3, [sp, #0x190]
  00100		 |$LN17@BKL_SetSta|

; 113  :         goto cleanUp;

  00100	ea00004d	 b           |$cleanUp$42790|
  00104		 |$LN8@BKL_SetSta|

; 114  :     }
; 115  : 
; 116  :     // Initialize I2C Transaction Structure
; 117  :     ZeroMemory(&sI2C_Transaction, sizeof(sI2C_Transaction));

  00104	e3a02e17	 mov         r2, #0x17, 28
  00108	e3a01000	 mov         r1, #0
  0010c	e28d0008	 add         r0, sp, #8
  00110	eb000000	 bl          memset

; 118  : 
; 119  :     // Set up an I2C Transaction to read the initial values
; 120  :     // of the lines controlled by this I2C Device
; 121  :     sI2C_Transaction.mClk_HL_Divisor  = I2C_CLOCK_DEFAULT;

  00114	e3a0300f	 mov         r3, #0xF
  00118	e58d3010	 str         r3, [sp, #0x10]

; 122  :     sI2C_Transaction.mOpCode[0]       = I2C_OPCODE_READ;

  0011c	e3a03001	 mov         r3, #1
  00120	e58d3014	 str         r3, [sp, #0x14]

; 123  :     sI2C_Transaction.mTransLen[0]     = 1;

  00124	e3a03001	 mov         r3, #1
  00128	e58d3054	 str         r3, [sp, #0x54]

; 124  :     sI2C_Transaction.mBufferOffset[0] = 0;

  0012c	e3a03000	 mov         r3, #0
  00130	e58d3034	 str         r3, [sp, #0x34]

; 125  : 
; 126  :     // Perform the I2C Read
; 127  :     I2CTransact(hI2C, &sI2C_Transaction);

  00134	e28d1008	 add         r1, sp, #8
  00138	e59d0000	 ldr         r0, [sp]
  0013c	eb000000	 bl          I2CTransact

; 128  : 
; 129  :     if (sI2C_Transaction.mErrorCode != 0)

  00140	e59d3074	 ldr         r3, [sp, #0x74]
  00144	e3530000	 cmp         r3, #0
  00148	0a00000c	 beq         |$LN7@BKL_SetSta|

; 130  :     {
; 131  :         DEBUGMSG(ZONE_ERROR, (L"BKL_SetState() - "
; 132  :             L"ERROR: I2C Read Transaction Failed with Error 0x%08X\r\n", sI2C_Transaction.mErrorCode
; 133  :         ));

  0014c	e59f3160	 ldr         r3, [pc, #0x160]
  00150	e5933440	 ldr         r3, [r3, #0x440]
  00154	e3130001	 tst         r3, #1
  00158	0a000005	 beq         |$LN18@BKL_SetSta|
  0015c	e59d1074	 ldr         r1, [sp, #0x74]
  00160	e59f0154	 ldr         r0, [pc, #0x154]
  00164	eb000000	 bl          NKDbgPrintfW
  00168	e3a03001	 mov         r3, #1
  0016c	e58d3194	 str         r3, [sp, #0x194]
  00170	ea000001	 b           |$LN19@BKL_SetSta|
  00174		 |$LN18@BKL_SetSta|
  00174	e3a03000	 mov         r3, #0
  00178	e58d3194	 str         r3, [sp, #0x194]
  0017c		 |$LN19@BKL_SetSta|

; 134  :     }
; 135  :     else

  0017c	ea00002e	 b           |$LN6@BKL_SetSta|
  00180		 |$LN7@BKL_SetSta|

; 136  :     {
; 137  :         // Set or clear the appropriate bit.
; 138  :         if (bEnable)

  00180	e59d31a8	 ldr         r3, [sp, #0x1A8]
  00184	e3530000	 cmp         r3, #0
  00188	0a000004	 beq         |$LN5@BKL_SetSta|

; 139  :         {
; 140  :             sI2C_Transaction.mBuffer[0] |=  (1 << 5);

  0018c	e5dd3078	 ldrb        r3, [sp, #0x78]
  00190	e3833020	 orr         r3, r3, #0x20
  00194	e20330ff	 and         r3, r3, #0xFF
  00198	e5cd3078	 strb        r3, [sp, #0x78]

; 141  :         }
; 142  :         else

  0019c	ea000005	 b           |$LN4@BKL_SetSta|
  001a0		 |$LN5@BKL_SetSta|

; 143  :         {
; 144  :             sI2C_Transaction.mBuffer[0] &= ~(1 << 5);

  001a0	e5dd3078	 ldrb        r3, [sp, #0x78]
  001a4	e1a02003	 mov         r2, r3
  001a8	e3e03020	 mvn         r3, #0x20
  001ac	e0023003	 and         r3, r2, r3
  001b0	e20330ff	 and         r3, r3, #0xFF
  001b4	e5cd3078	 strb        r3, [sp, #0x78]
  001b8		 |$LN4@BKL_SetSta|

; 145  :         }
; 146  : 
; 147  :         // Set up an I2C Transaction to write the new value
; 148  :         // and verify that it was written correctly.
; 149  :         sI2C_Transaction.mOpCode[0]       = I2C_OPCODE_WRITE;

  001b8	e3a03002	 mov         r3, #2
  001bc	e58d3014	 str         r3, [sp, #0x14]

; 150  :         sI2C_Transaction.mTransLen[0]     = 1;

  001c0	e3a03001	 mov         r3, #1
  001c4	e58d3054	 str         r3, [sp, #0x54]

; 151  :         sI2C_Transaction.mBufferOffset[0] = 0;

  001c8	e3a03000	 mov         r3, #0
  001cc	e58d3034	 str         r3, [sp, #0x34]

; 152  :         sI2C_Transaction.mOpCode[1]       = I2C_OPCODE_READ;

  001d0	e3a03001	 mov         r3, #1
  001d4	e58d3018	 str         r3, [sp, #0x18]

; 153  :         sI2C_Transaction.mTransLen[1]     = 1;

  001d8	e3a03001	 mov         r3, #1
  001dc	e58d3058	 str         r3, [sp, #0x58]

; 154  :         sI2C_Transaction.mBufferOffset[1] = 0;

  001e0	e3a03000	 mov         r3, #0
  001e4	e58d3038	 str         r3, [sp, #0x38]

; 155  : 
; 156  :         // Perform the Write and Verification Read
; 157  :         I2CTransact(hI2C, &sI2C_Transaction);

  001e8	e28d1008	 add         r1, sp, #8
  001ec	e59d0000	 ldr         r0, [sp]
  001f0	eb000000	 bl          I2CTransact

; 158  : 
; 159  :         if (sI2C_Transaction.mErrorCode != 0)

  001f4	e59d3074	 ldr         r3, [sp, #0x74]
  001f8	e3530000	 cmp         r3, #0
  001fc	0a00000c	 beq         |$LN3@BKL_SetSta|

; 160  :         {
; 161  :             DEBUGMSG(ZONE_ERROR, (L"BKL_SetState() - "
; 162  :                 L"ERROR: I2C Write/Verify Transaction Failed with Error 0x%08X\r\n", sI2C_Transaction.mErrorCode
; 163  :             ));

  00200	e59f30ac	 ldr         r3, [pc, #0xAC]
  00204	e5933440	 ldr         r3, [r3, #0x440]
  00208	e3130001	 tst         r3, #1
  0020c	0a000005	 beq         |$LN20@BKL_SetSta|
  00210	e59d1074	 ldr         r1, [sp, #0x74]
  00214	e59f009c	 ldr         r0, [pc, #0x9C]
  00218	eb000000	 bl          NKDbgPrintfW
  0021c	e3a03001	 mov         r3, #1
  00220	e58d3198	 str         r3, [sp, #0x198]
  00224	ea000001	 b           |$LN21@BKL_SetSta|
  00228		 |$LN20@BKL_SetSta|
  00228	e3a03000	 mov         r3, #0
  0022c	e58d3198	 str         r3, [sp, #0x198]
  00230		 |$LN21@BKL_SetSta|

; 164  :         }
; 165  :         else

  00230	ea000001	 b           |$LN2@BKL_SetSta|
  00234		 |$LN3@BKL_SetSta|

; 166  :         {
; 167  :             retVal = TRUE;

  00234	e3a03001	 mov         r3, #1
  00238	e58d3004	 str         r3, [sp, #4]
  0023c		 |$LN2@BKL_SetSta|
  0023c		 |$LN6@BKL_SetSta|
  0023c		 |$cleanUp$42790|

; 168  :         }
; 169  :     }
; 170  : 
; 171  : cleanUp:
; 172  :     DEBUGMSG(ZONE_I2C&&ZONE_FUNCTION, (L"-BKL_SetState(retVal = %d)\r\n", retVal));

  0023c	e59f3070	 ldr         r3, [pc, #0x70]
  00240	e5933440	 ldr         r3, [r3, #0x440]
  00244	e3130040	 tst         r3, #0x40
  00248	0a000009	 beq         |$LN22@BKL_SetSta|
  0024c	e59f3060	 ldr         r3, [pc, #0x60]
  00250	e5933440	 ldr         r3, [r3, #0x440]
  00254	e3130004	 tst         r3, #4
  00258	0a000005	 beq         |$LN22@BKL_SetSta|
  0025c	e59d1004	 ldr         r1, [sp, #4]
  00260	e59f0048	 ldr         r0, [pc, #0x48]
  00264	eb000000	 bl          NKDbgPrintfW
  00268	e3a03001	 mov         r3, #1
  0026c	e58d319c	 str         r3, [sp, #0x19C]
  00270	ea000001	 b           |$LN23@BKL_SetSta|
  00274		 |$LN22@BKL_SetSta|
  00274	e3a03000	 mov         r3, #0
  00278	e58d319c	 str         r3, [sp, #0x19C]
  0027c		 |$LN23@BKL_SetSta|

; 173  : 
; 174  :     if (hI2C)

  0027c	e59d3000	 ldr         r3, [sp]
  00280	e3530000	 cmp         r3, #0
  00284	0a000001	 beq         |$LN1@BKL_SetSta|

; 175  :         I2CClose(hI2C);

  00288	e59d0000	 ldr         r0, [sp]
  0028c	eb000000	 bl          I2CClose
  00290		 |$LN1@BKL_SetSta|

; 176  : 
; 177  :     return retVal;

  00290	e59d0178	 ldr         r0, [sp, #0x178]
  00294	eb000000	 bl          __security_check_cookie
  00298	e59d3004	 ldr         r3, [sp, #4]
  0029c	e58d317c	 str         r3, [sp, #0x17C]

; 178  : }

  002a0	e59d017c	 ldr         r0, [sp, #0x17C]
  002a4	e28dde1a	 add         sp, sp, #0x1A, 28
  002a8	e89d6000	 ldmia       sp, {sp, lr}
  002ac	e12fff1e	 bx          lr
  002b0		 |$LN27@BKL_SetSta|
  002b0		 |$LN28@BKL_SetSta|
  002b0	00000000	 DCD         |??_C@_1DK@PNHLBHAK@?$AA?9?$AAB?$AAK?$AAL?$AA_?$AAS?$AAe?$AAt?$AAS?$AAt?$AAa?$AAt?$AAe?$AA?$CI?$AAr?$AAe?$AAt?$AAV?$AAa?$AAl?$AA?5?$AA?$DN?$AA?5?$AA?$CF?$AAd?$AA?$CJ?$AA?$AN?$AA?6?$AA?$AA@|
  002b4		 |$LN29@BKL_SetSta|
  002b4	00000000	 DCD         |dpCurSettings|
  002b8		 |$LN30@BKL_SetSta|
  002b8	00000000	 DCD         |??_C@_1KA@MPLFDLNP@?$AAB?$AAK?$AAL?$AA_?$AAS?$AAe?$AAt?$AAS?$AAt?$AAa?$AAt?$AAe?$AA?$CI?$AA?$CJ?$AA?5?$AA?9?$AA?5?$AAE?$AAR?$AAR?$AAO?$AAR?$AA?3?$AA?5?$AAI?$AA2?$AAC?$AA?5?$AAW?$AAr?$AAi?$AAt@|
  002bc		 |$LN31@BKL_SetSta|
  002bc	00000000	 DCD         |??_C@_1JA@PLHEIGGA@?$AAB?$AAK?$AAL?$AA_?$AAS?$AAe?$AAt?$AAS?$AAt?$AAa?$AAt?$AAe?$AA?$CI?$AA?$CJ?$AA?5?$AA?9?$AA?5?$AAE?$AAR?$AAR?$AAO?$AAR?$AA?3?$AA?5?$AAI?$AA2?$AAC?$AA?5?$AAR?$AAe?$AAa?$AAd@|
  002c0		 |$LN32@BKL_SetSta|
  002c0	00000000	 DCD         |??_C@_1HG@BIJIJNNB@?$AAE?$AAR?$AAR?$AAO?$AAR?$AA?3?$AA?5?$AAB?$AAK?$AAL?$AA_?$AAS?$AAe?$AAt?$AAS?$AAt?$AAa?$AAt?$AAe?$AA?3?$AA?5?$AAF?$AAa?$AAi?$AAl?$AAe?$AAd?$AA?5?$AAt?$AAo?$AA?5?$AAs@|
  002c4		 |$LN33@BKL_SetSta|
  002c4	00000000	 DCD         |??_C@_1FM@MGGGNJLF@?$AAE?$AAR?$AAR?$AAO?$AAR?$AA?3?$AA?5?$AAB?$AAK?$AAL?$AA_?$AAS?$AAe?$AAt?$AAS?$AAt?$AAa?$AAt?$AAe?$AA?3?$AA?5?$AAF?$AAa?$AAi?$AAl?$AAe?$AAd?$AA?5?$AAo?$AAp?$AAe?$AAn@|
  002c8		 |$LN34@BKL_SetSta|
  002c8	00000000	 DCD         |??_C@_1M@LCEEOPDH@?$AAI?$AA2?$AAC?$AA1?$AA?3?$AA?$AA@|
  002cc		 |$LN35@BKL_SetSta|
  002cc	00000000	 DCD         |??_C@_1CI@LFDILJDJ@?$AA?$CL?$AAB?$AAK?$AAL?$AA_?$AAS?$AAe?$AAt?$AAS?$AAt?$AAa?$AAt?$AAe?$AA?$CI?$AA?$CF?$AAd?$AA?$CJ?$AA?$AN?$AA?6?$AA?$AA@|
  002d0		 |$LN36@BKL_SetSta|
  002d0	00000000	 DCD         |__security_cookie|
  002d4		 |$M43069|

			 ENDP  ; |BKL_SetState|

	IMPORT	|LocalFree|
	IMPORT	|DeviceIoControl|
	IMPORT	|CloseHandle|
	IMPORT	|LocalAlloc|
	IMPORT	|CreateFileW|
; File c:\wince600\platform\common\src\soc\omap2420_ms_v1\inc\i2c.h

  00000			 AREA	 |.pdata|, PDATA
|$T43094| DCD	|$LN8@I2COpen|
	DCD	0x40004804
; Function compile flags: /Odtp

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |I2COpen| PROC

; 86   : {

  00000		 |$LN8@I2COpen|
  00000	e1a0c00d	 mov         r12, sp
  00004	e92d0001	 stmdb       sp!, {r0}
  00008	e92d5000	 stmdb       sp!, {r12, lr}
  0000c	e24dd044	 sub         sp, sp, #0x44
  00010		 |$M43091|

; 87   :     HANDLE hDevice;
; 88   :     DEVICE_CONTEXT_I2C *pContext = NULL;

  00010	e3a03000	 mov         r3, #0
  00014	e58d3014	 str         r3, [sp, #0x14]

; 89   : 
; 90   :     hDevice = CreateFile(devicename, 0, 0, NULL, 0, 0, NULL);

  00018	e3a03000	 mov         r3, #0
  0001c	e58d3008	 str         r3, [sp, #8]
  00020	e3a03000	 mov         r3, #0
  00024	e58d3004	 str         r3, [sp, #4]
  00028	e3a03000	 mov         r3, #0
  0002c	e58d3000	 str         r3, [sp]
  00030	e3a03000	 mov         r3, #0
  00034	e3a02000	 mov         r2, #0
  00038	e3a01000	 mov         r1, #0
  0003c	e59d004c	 ldr         r0, [sp, #0x4C]
  00040	eb000000	 bl          CreateFileW
  00044	e58d0038	 str         r0, [sp, #0x38]
  00048	e59d3038	 ldr         r3, [sp, #0x38]
  0004c	e58d3010	 str         r3, [sp, #0x10]

; 91   :     if (hDevice == INVALID_HANDLE_VALUE) goto clean;

  00050	e59d3010	 ldr         r3, [sp, #0x10]
  00054	e3730001	 cmn         r3, #1
  00058	1a000000	 bne         |$LN3@I2COpen|
  0005c	ea000028	 b           |$clean$42723|
  00060		 |$LN3@I2COpen|

; 92   : 
; 93   :     // Allocate memory for our handler...
; 94   :     if ((pContext = (DEVICE_CONTEXT_I2C *)LocalAlloc(
; 95   :         LPTR, sizeof(DEVICE_CONTEXT_I2C)
; 96   :     )) == NULL) {

  00060	e3a01010	 mov         r1, #0x10
  00064	e3a00040	 mov         r0, #0x40
  00068	eb000000	 bl          LocalAlloc
  0006c	e58d003c	 str         r0, [sp, #0x3C]
  00070	e59d303c	 ldr         r3, [sp, #0x3C]
  00074	e58d3014	 str         r3, [sp, #0x14]
  00078	e59d3014	 ldr         r3, [sp, #0x14]
  0007c	e3530000	 cmp         r3, #0
  00080	1a000002	 bne         |$LN2@I2COpen|

; 97   :         CloseHandle(hDevice);

  00084	e59d0010	 ldr         r0, [sp, #0x10]
  00088	eb000000	 bl          CloseHandle

; 98   :         goto clean;

  0008c	ea00001c	 b           |$clean$42723|
  00090		 |$LN2@I2COpen|

; 99   :     }
; 100  : 
; 101  :     // Get function pointers, fail when IOCTL isn't supported...
; 102  :     if (!DeviceIoControl(
; 103  :         hDevice, IOCTL_DDK_GET_DRIVER_IFC, (VOID*)&DEVICE_IFC_I2C_GUID,
; 104  :         sizeof(DEVICE_IFC_I2C_GUID), &pContext->ifc, sizeof(DEVICE_IFC_I2C),
; 105  :         NULL, NULL
; 106  :     )) {

  00090	e3a03000	 mov         r3, #0
  00094	e58d300c	 str         r3, [sp, #0xC]
  00098	e3a03000	 mov         r3, #0
  0009c	e58d3008	 str         r3, [sp, #8]
  000a0	e3a0300c	 mov         r3, #0xC
  000a4	e58d3004	 str         r3, [sp, #4]
  000a8	e59d3014	 ldr         r3, [sp, #0x14]
  000ac	e58d3000	 str         r3, [sp]
  000b0	e3a03010	 mov         r3, #0x10
  000b4	e59f2060	 ldr         r2, [pc, #0x60]
  000b8	e3a01822	 mov         r1, #0x22, 16
  000bc	e3811b01	 orr         r1, r1, #1, 22
  000c0	e59d0010	 ldr         r0, [sp, #0x10]
  000c4	eb000000	 bl          DeviceIoControl
  000c8	e58d0040	 str         r0, [sp, #0x40]
  000cc	e59d3040	 ldr         r3, [sp, #0x40]
  000d0	e3530000	 cmp         r3, #0
  000d4	1a000006	 bne         |$LN1@I2COpen|

; 107  :         CloseHandle(hDevice);

  000d8	e59d0010	 ldr         r0, [sp, #0x10]
  000dc	eb000000	 bl          CloseHandle

; 108  :         LocalFree(pContext);

  000e0	e59d0014	 ldr         r0, [sp, #0x14]
  000e4	eb000000	 bl          LocalFree

; 109  :         pContext = NULL;

  000e8	e3a03000	 mov         r3, #0
  000ec	e58d3014	 str         r3, [sp, #0x14]

; 110  :         goto clean;

  000f0	ea000003	 b           |$clean$42723|
  000f4		 |$LN1@I2COpen|

; 111  :     }
; 112  : 
; 113  :     // Save device handle
; 114  :     pContext->hDevice = hDevice;

  000f4	e59d3014	 ldr         r3, [sp, #0x14]
  000f8	e283200c	 add         r2, r3, #0xC
  000fc	e59d3010	 ldr         r3, [sp, #0x10]
  00100	e5823000	 str         r3, [r2]
  00104		 |$clean$42723|

; 115  : 
; 116  : clean:
; 117  :     return pContext;

  00104	e59d3014	 ldr         r3, [sp, #0x14]
  00108	e58d3034	 str         r3, [sp, #0x34]

; 118  : }

  0010c	e59d0034	 ldr         r0, [sp, #0x34]
  00110	e28dd044	 add         sp, sp, #0x44
  00114	e89d6000	 ldmia       sp, {sp, lr}
  00118	e12fff1e	 bx          lr
  0011c		 |$LN9@I2COpen|
  0011c		 |$LN10@I2COpen|
  0011c	00000000	 DCD         |DEVICE_IFC_I2C_GUID|
  00120		 |$M43092|

			 ENDP  ; |I2COpen|


  00000			 AREA	 |.pdata|, PDATA
|$T43103| DCD	|$LN7@I2CClose|
	DCD	0x40001a04
; Function compile flags: /Odtp

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |I2CClose| PROC

; 121  : {

  00000		 |$LN7@I2CClose|
  00000	e1a0c00d	 mov         r12, sp
  00004	e92d0001	 stmdb       sp!, {r0}
  00008	e92d5000	 stmdb       sp!, {r12, lr}
  0000c	e24dd004	 sub         sp, sp, #4
  00010		 |$M43100|

; 122  :     DEVICE_CONTEXT_I2C *pContext = (DEVICE_CONTEXT_I2C *)hContext;

  00010	e59d300c	 ldr         r3, [sp, #0xC]
  00014	e58d3000	 str         r3, [sp]

; 123  : 
; 124  :     if ( (pContext != NULL) && (pContext->hDevice != INVALID_HANDLE_VALUE) )

  00018	e59d3000	 ldr         r3, [sp]
  0001c	e3530000	 cmp         r3, #0
  00020	0a000008	 beq         |$LN2@I2CClose|
  00024	e59d3000	 ldr         r3, [sp]
  00028	e283300c	 add         r3, r3, #0xC
  0002c	e5933000	 ldr         r3, [r3]
  00030	e3730001	 cmn         r3, #1
  00034	0a000003	 beq         |$LN2@I2CClose|

; 125  :         CloseHandle(pContext->hDevice);

  00038	e59d3000	 ldr         r3, [sp]
  0003c	e283300c	 add         r3, r3, #0xC
  00040	e5930000	 ldr         r0, [r3]
  00044	eb000000	 bl          CloseHandle
  00048		 |$LN2@I2CClose|

; 126  : 
; 127  :     if (pContext != NULL)

  00048	e59d3000	 ldr         r3, [sp]
  0004c	e3530000	 cmp         r3, #0
  00050	0a000001	 beq         |$LN1@I2CClose|

; 128  :         LocalFree(pContext);

  00054	e59d0000	 ldr         r0, [sp]
  00058	eb000000	 bl          LocalFree
  0005c		 |$LN1@I2CClose|

; 129  : }

  0005c	e28dd004	 add         sp, sp, #4
  00060	e89d6000	 ldmia       sp, {sp, lr}
  00064	e12fff1e	 bx          lr
  00068		 |$M43101|

			 ENDP  ; |I2CClose|


  00000			 AREA	 |.pdata|, PDATA
|$T43111| DCD	|$LN5@I2CSetSlav|
	DCD	0x40001604
; Function compile flags: /Odtp

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |I2CSetSlaveAddress| PROC

; 132  : {

  00000		 |$LN5@I2CSetSlav|
  00000	e1a0c00d	 mov         r12, sp
  00004	e92d0007	 stmdb       sp!, {r0 - r2}
  00008	e92d5000	 stmdb       sp!, {r12, lr}
  0000c	e24dd00c	 sub         sp, sp, #0xC
  00010		 |$M43108|

; 133  :     DEVICE_CONTEXT_I2C *pContext = (DEVICE_CONTEXT_I2C *)hContext;

  00010	e59d3014	 ldr         r3, [sp, #0x14]
  00014	e58d3000	 str         r3, [sp]

; 134  :     return pContext->ifc.pfnSetSlaveAddress(pContext->ifc.context, size, address);

  00018	e59d201c	 ldr         r2, [sp, #0x1C]
  0001c	e59d1018	 ldr         r1, [sp, #0x18]
  00020	e59d3000	 ldr         r3, [sp]
  00024	e5930000	 ldr         r0, [r3]
  00028	e59d3000	 ldr         r3, [sp]
  0002c	e2833004	 add         r3, r3, #4
  00030	e5933000	 ldr         r3, [r3]
  00034	e1a0e00f	 mov         lr, pc
  00038	e12fff13	 bx          r3
  0003c	e58d0008	 str         r0, [sp, #8]
  00040	e59d3008	 ldr         r3, [sp, #8]
  00044	e58d3004	 str         r3, [sp, #4]

; 135  : }

  00048	e59d0004	 ldr         r0, [sp, #4]
  0004c	e28dd00c	 add         sp, sp, #0xC
  00050	e89d6000	 ldmia       sp, {sp, lr}
  00054	e12fff1e	 bx          lr
  00058		 |$M43109|

			 ENDP  ; |I2CSetSlaveAddress|


  00000			 AREA	 |.pdata|, PDATA
|$T43119| DCD	|$LN5@I2CTransac|
	DCD	0x40001504
; Function compile flags: /Odtp

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |I2CTransact| PROC

; 138  : {

  00000		 |$LN5@I2CTransac|
  00000	e1a0c00d	 mov         r12, sp
  00004	e92d0003	 stmdb       sp!, {r0, r1}
  00008	e92d5000	 stmdb       sp!, {r12, lr}
  0000c	e24dd00c	 sub         sp, sp, #0xC
  00010		 |$M43116|

; 139  :     DEVICE_CONTEXT_I2C *pContext = (DEVICE_CONTEXT_I2C *)hContext;

  00010	e59d3014	 ldr         r3, [sp, #0x14]
  00014	e58d3000	 str         r3, [sp]

; 140  :     return pContext->ifc.pfnTransact(pContext->ifc.context, pTrans);

  00018	e59d1018	 ldr         r1, [sp, #0x18]
  0001c	e59d3000	 ldr         r3, [sp]
  00020	e5930000	 ldr         r0, [r3]
  00024	e59d3000	 ldr         r3, [sp]
  00028	e2833008	 add         r3, r3, #8
  0002c	e5933000	 ldr         r3, [r3]
  00030	e1a0e00f	 mov         lr, pc
  00034	e12fff13	 bx          r3
  00038	e58d0008	 str         r0, [sp, #8]
  0003c	e59d3008	 ldr         r3, [sp, #8]
  00040	e58d3004	 str         r3, [sp, #4]

; 141  : }

  00044	e59d0004	 ldr         r0, [sp, #4]
  00048	e28dd00c	 add         sp, sp, #0xC
  0004c	e89d6000	 ldmia       sp, {sp, lr}
  00050	e12fff1e	 bx          lr
  00054		 |$M43117|

			 ENDP  ; |I2CTransact|

	EXPORT	|??_C@_1CK@MKIICIHI@?$AA?9?$AAB?$AAK?$AAL?$AA_?$AAI?$AAn?$AAi?$AAt?$AA?$CI?$AAr?$AAc?$AA?5?$AA?$DN?$AA?5?$AA?$CF?$AAd?$AA?$CJ?$AA?$AN?$AA?6?$AA?$AA@| [ DATA ] ; `string'
	EXPORT	|BKL_Deinit|
	EXPORT	|??_C@_1HA@LFMHFBGH@?$AAE?$AAR?$AAR?$AAO?$AAR?$AA?3?$AA?5?$AAB?$AAK?$AAL?$AA_?$AAI?$AAn?$AAi?$AAt?$AA?3?$AA?5?$AAF?$AAa?$AAi?$AAl?$AAe?$AAd?$AA?5?$AAa?$AAl?$AAl?$AAo?$AAc?$AAa?$AAt?$AAe@| [ DATA ] ; `string'
	EXPORT	|??_C@_1DA@JDGBHJLP@?$AA?$CL?$AAB?$AAK?$AAL?$AA_?$AAI?$AAn?$AAi?$AAt?$AA?$CI?$AA?$CF?$AAs?$AA?0?$AA?5?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx?$AA?$CJ?$AA?$AN?$AA?6?$AA?$AA@| [ DATA ] ; `string'
	EXPORT	|BKL_Init|

  00008			 AREA	 |.pdata|, PDATA
|$T43133| DCD	|$LN13@BKL_Init|
	DCD	0x40005104
; File c:\wince600\platform\common\src\soc\omap2420_ms_v1\backlight\backlight.c

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1CK@MKIICIHI@?$AA?9?$AAB?$AAK?$AAL?$AA_?$AAI?$AAn?$AAi?$AAt?$AA?$CI?$AAr?$AAc?$AA?5?$AA?$DN?$AA?5?$AA?$CF?$AAd?$AA?$CJ?$AA?$AN?$AA?6?$AA?$AA@| DCB "-"
	DCB	0x0, "B", 0x0, "K", 0x0, "L", 0x0, "_", 0x0, "I", 0x0, "n"
	DCB	0x0, "i", 0x0, "t", 0x0, "(", 0x0, "r", 0x0, "c", 0x0, " "
	DCB	0x0, "=", 0x0, " ", 0x0, "%", 0x0, "d", 0x0, ")", 0x0, 0xd
	DCB	0x0, 0xa, 0x0, 0x0, 0x0			; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1HA@LFMHFBGH@?$AAE?$AAR?$AAR?$AAO?$AAR?$AA?3?$AA?5?$AAB?$AAK?$AAL?$AA_?$AAI?$AAn?$AAi?$AAt?$AA?3?$AA?5?$AAF?$AAa?$AAi?$AAl?$AAe?$AAd?$AA?5?$AAa?$AAl?$AAl?$AAo?$AAc?$AAa?$AAt?$AAe@| DCB "E"
	DCB	0x0, "R", 0x0, "R", 0x0, "O", 0x0, "R", 0x0, ":", 0x0, " "
	DCB	0x0, "B", 0x0, "K", 0x0, "L", 0x0, "_", 0x0, "I", 0x0, "n"
	DCB	0x0, "i", 0x0, "t", 0x0, ":", 0x0, " ", 0x0, "F", 0x0, "a"
	DCB	0x0, "i", 0x0, "l", 0x0, "e", 0x0, "d", 0x0, " ", 0x0, "a"
	DCB	0x0, "l", 0x0, "l", 0x0, "o", 0x0, "c", 0x0, "a", 0x0, "t"
	DCB	0x0, "e", 0x0, " ", 0x0, "B", 0x0, "K", 0x0, "L", 0x0, " "
	DCB	0x0, "d", 0x0, "e", 0x0, "v", 0x0, "i", 0x0, "c", 0x0, "e"
	DCB	0x0, " ", 0x0, "s", 0x0, "t", 0x0, "r", 0x0, "u", 0x0, "c"
	DCB	0x0, "t", 0x0, "u", 0x0, "r", 0x0, "e", 0x0, 0xd, 0x0, 0xa
	DCB	0x0, 0x0, 0x0				; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1DA@JDGBHJLP@?$AA?$CL?$AAB?$AAK?$AAL?$AA_?$AAI?$AAn?$AAi?$AAt?$AA?$CI?$AA?$CF?$AAs?$AA?0?$AA?5?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx?$AA?$CJ?$AA?$AN?$AA?6?$AA?$AA@| DCB "+"
	DCB	0x0, "B", 0x0, "K", 0x0, "L", 0x0, "_", 0x0, "I", 0x0, "n"
	DCB	0x0, "i", 0x0, "t", 0x0, "(", 0x0, "%", 0x0, "s", 0x0, ","
	DCB	0x0, " ", 0x0, "0", 0x0, "x", 0x0, "%", 0x0, "0", 0x0, "8"
	DCB	0x0, "x", 0x0, ")", 0x0, 0xd, 0x0, 0xa, 0x0, 0x0, 0x0 ; `string'
; Function compile flags: /Odtp

  002d4			 AREA	 |.text|, CODE, ARM

  002d4		 |BKL_Init| PROC

; 189  : {

  002d4		 |$LN13@BKL_Init|
  002d4	e1a0c00d	 mov         r12, sp
  002d8	e92d0003	 stmdb       sp!, {r0, r1}
  002dc	e92d5000	 stmdb       sp!, {r12, lr}
  002e0	e24dd01c	 sub         sp, sp, #0x1C
  002e4		 |$M43130|

; 190  :     DWORD rc = (DWORD)NULL;

  002e4	e3a03000	 mov         r3, #0
  002e8	e58d3004	 str         r3, [sp, #4]

; 191  :     BKL_DEVICE *pDevice = NULL;

  002ec	e3a03000	 mov         r3, #0
  002f0	e58d3000	 str         r3, [sp]

; 192  :     DEBUGMSG(ZONE_FUNCTION, (
; 193  :         L"+BKL_Init(%s, 0x%08x)\r\n", szContext, pBusContext
; 194  :     ));

  002f4	e59f310c	 ldr         r3, [pc, #0x10C]
  002f8	e5933440	 ldr         r3, [r3, #0x440]
  002fc	e3130004	 tst         r3, #4
  00300	0a000006	 beq         |$LN5@BKL_Init|
  00304	e59d2028	 ldr         r2, [sp, #0x28]
  00308	e59d1024	 ldr         r1, [sp, #0x24]
  0030c	e59f0100	 ldr         r0, [pc, #0x100]
  00310	eb000000	 bl          NKDbgPrintfW
  00314	e3a03001	 mov         r3, #1
  00318	e58d300c	 str         r3, [sp, #0xC]
  0031c	ea000001	 b           |$LN6@BKL_Init|
  00320		 |$LN5@BKL_Init|
  00320	e3a03000	 mov         r3, #0
  00324	e58d300c	 str         r3, [sp, #0xC]
  00328		 |$LN6@BKL_Init|

; 195  : 
; 196  :     // Create device structure
; 197  :     pDevice = (BKL_DEVICE *)LocalAlloc(LPTR, sizeof(BKL_DEVICE));

  00328	e3a0100c	 mov         r1, #0xC
  0032c	e3a00040	 mov         r0, #0x40
  00330	eb000000	 bl          LocalAlloc
  00334	e58d0010	 str         r0, [sp, #0x10]
  00338	e59d3010	 ldr         r3, [sp, #0x10]
  0033c	e58d3000	 str         r3, [sp]

; 198  :     if (pDevice == NULL) {

  00340	e59d3000	 ldr         r3, [sp]
  00344	e3530000	 cmp         r3, #0
  00348	1a00000b	 bne         |$LN2@BKL_Init|

; 199  :         DEBUGMSG(ZONE_ERROR, (L"ERROR: BKL_Init: "
; 200  :             L"Failed allocate BKL device structure\r\n"
; 201  :         ));

  0034c	e59f30b4	 ldr         r3, [pc, #0xB4]
  00350	e5933440	 ldr         r3, [r3, #0x440]
  00354	e3130001	 tst         r3, #1
  00358	0a000004	 beq         |$LN7@BKL_Init|
  0035c	e59f00ac	 ldr         r0, [pc, #0xAC]
  00360	eb000000	 bl          NKDbgPrintfW
  00364	e3a03001	 mov         r3, #1
  00368	e58d3014	 str         r3, [sp, #0x14]
  0036c	ea000001	 b           |$LN8@BKL_Init|
  00370		 |$LN7@BKL_Init|
  00370	e3a03000	 mov         r3, #0
  00374	e58d3014	 str         r3, [sp, #0x14]
  00378		 |$LN8@BKL_Init|

; 202  :         goto cleanUp;

  00378	ea00000a	 b           |$cleanUp$42826|
  0037c		 |$LN2@BKL_Init|

; 203  :     }
; 204  : 
; 205  :     // Set cookie
; 206  :     pDevice->cookie = BKL_DEVICE_COOKIE;

  0037c	e59d2000	 ldr         r2, [sp]
  00380	e59f3084	 ldr         r3, [pc, #0x84]
  00384	e5823000	 str         r3, [r2]

; 207  :     pDevice->ps = D0;

  00388	e59d3000	 ldr         r3, [sp]
  0038c	e2832008	 add         r2, r3, #8
  00390	e3a03000	 mov         r3, #0
  00394	e5823000	 str         r3, [r2]

; 208  : 
; 209  :     // Switch LCD backlight on
; 210  :     BKL_SetState(TRUE);

  00398	e3a00001	 mov         r0, #1
  0039c	eb000000	 bl          BKL_SetState

; 211  : 
; 212  :     // Return non-null value
; 213  :     rc = (DWORD)pDevice;

  003a0	e59d3000	 ldr         r3, [sp]
  003a4	e58d3004	 str         r3, [sp, #4]
  003a8		 |$cleanUp$42826|

; 214  : 
; 215  : cleanUp:
; 216  :     if (rc == 0) BKL_Deinit((DWORD)pDevice);

  003a8	e59d3004	 ldr         r3, [sp, #4]
  003ac	e3530000	 cmp         r3, #0
  003b0	1a000001	 bne         |$LN1@BKL_Init|
  003b4	e59d0000	 ldr         r0, [sp]
  003b8	eb000000	 bl          BKL_Deinit
  003bc		 |$LN1@BKL_Init|

; 217  :     DEBUGMSG(ZONE_FUNCTION, (L"-BKL_Init(rc = %d)\r\n", rc));

  003bc	e59f3044	 ldr         r3, [pc, #0x44]
  003c0	e5933440	 ldr         r3, [r3, #0x440]
  003c4	e3130004	 tst         r3, #4
  003c8	0a000005	 beq         |$LN9@BKL_Init|
  003cc	e59d1004	 ldr         r1, [sp, #4]
  003d0	e59f002c	 ldr         r0, [pc, #0x2C]
  003d4	eb000000	 bl          NKDbgPrintfW
  003d8	e3a03001	 mov         r3, #1
  003dc	e58d3018	 str         r3, [sp, #0x18]
  003e0	ea000001	 b           |$LN10@BKL_Init|
  003e4		 |$LN9@BKL_Init|
  003e4	e3a03000	 mov         r3, #0
  003e8	e58d3018	 str         r3, [sp, #0x18]
  003ec		 |$LN10@BKL_Init|

; 218  :     return rc;

  003ec	e59d3004	 ldr         r3, [sp, #4]
  003f0	e58d3008	 str         r3, [sp, #8]

; 219  : }

  003f4	e59d0008	 ldr         r0, [sp, #8]
  003f8	e28dd01c	 add         sp, sp, #0x1C
  003fc	e89d6000	 ldmia       sp, {sp, lr}
  00400	e12fff1e	 bx          lr
  00404		 |$LN14@BKL_Init|
  00404		 |$LN15@BKL_Init|
  00404	00000000	 DCD         |??_C@_1CK@MKIICIHI@?$AA?9?$AAB?$AAK?$AAL?$AA_?$AAI?$AAn?$AAi?$AAt?$AA?$CI?$AAr?$AAc?$AA?5?$AA?$DN?$AA?5?$AA?$CF?$AAd?$AA?$CJ?$AA?$AN?$AA?6?$AA?$AA@|
  00408		 |$LN16@BKL_Init|
  00408	00000000	 DCD         |dpCurSettings|
  0040c		 |$LN17@BKL_Init|
  0040c	626b6c44	 DCD         0x626b6c44
  00410		 |$LN18@BKL_Init|
  00410	00000000	 DCD         |??_C@_1HA@LFMHFBGH@?$AAE?$AAR?$AAR?$AAO?$AAR?$AA?3?$AA?5?$AAB?$AAK?$AAL?$AA_?$AAI?$AAn?$AAi?$AAt?$AA?3?$AA?5?$AAF?$AAa?$AAi?$AAl?$AAe?$AAd?$AA?5?$AAa?$AAl?$AAl?$AAo?$AAc?$AAa?$AAt?$AAe@|
  00414		 |$LN19@BKL_Init|
  00414	00000000	 DCD         |??_C@_1DA@JDGBHJLP@?$AA?$CL?$AAB?$AAK?$AAL?$AA_?$AAI?$AAn?$AAi?$AAt?$AA?$CI?$AA?$CF?$AAs?$AA?0?$AA?5?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx?$AA?$CJ?$AA?$AN?$AA?6?$AA?$AA@|
  00418		 |$M43131|

			 ENDP  ; |BKL_Init|

	EXPORT	|??_C@_1CO@FAPHMGMA@?$AA?9?$AAB?$AAK?$AAL?$AA_?$AAD?$AAe?$AAi?$AAn?$AAi?$AAt?$AA?$CI?$AAr?$AAc?$AA?5?$AA?$DN?$AA?5?$AA?$CF?$AAd?$AA?$CJ?$AA?$AN?$AA?6?$AA?$AA@| [ DATA ] ; `string'
	EXPORT	|??_C@_1IO@KJJKGPLB@?$AAE?$AAR?$AAR?$AAO?$AAR?$AA?3?$AA?5?$AAB?$AAK?$AAL?$AA_?$AAD?$AAe?$AAi?$AAn?$AAi?$AAt?$AA?3?$AA?5?$AAD?$AAe?$AAi?$AAn?$AAi?$AAt?$AA?5?$AAw?$AAi?$AAt?$AAh?$AA?5?$AAa@| [ DATA ] ; `string'
	EXPORT	|??_C@_1GC@OMOGMPLK@?$AAE?$AAR?$AAR?$AAO?$AAR?$AA?3?$AA?5?$AAB?$AAK?$AAL?$AA_?$AAD?$AAe?$AAi?$AAn?$AAi?$AAt?$AA?3?$AA?5?$AAI?$AAn?$AAc?$AAo?$AAr?$AAr?$AAe?$AAc?$AAt?$AA?5?$AAc?$AAo?$AAn@| [ DATA ] ; `string'
	EXPORT	|??_C@_1CM@MHIOCNGL@?$AA?$CL?$AAB?$AAK?$AAL?$AA_?$AAD?$AAe?$AAi?$AAn?$AAi?$AAt?$AA?$CI?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx?$AA?$CJ?$AA?$AN?$AA?6?$AA?$AA@| [ DATA ] ; `string'

  00010			 AREA	 |.pdata|, PDATA
|$T43153| DCD	|$LN16@BKL_Deinit|
	DCD	0x40005804

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1CO@FAPHMGMA@?$AA?9?$AAB?$AAK?$AAL?$AA_?$AAD?$AAe?$AAi?$AAn?$AAi?$AAt?$AA?$CI?$AAr?$AAc?$AA?5?$AA?$DN?$AA?5?$AA?$CF?$AAd?$AA?$CJ?$AA?$AN?$AA?6?$AA?$AA@| DCB "-"
	DCB	0x0, "B", 0x0, "K", 0x0, "L", 0x0, "_", 0x0, "D", 0x0, "e"
	DCB	0x0, "i", 0x0, "n", 0x0, "i", 0x0, "t", 0x0, "(", 0x0, "r"
	DCB	0x0, "c", 0x0, " ", 0x0, "=", 0x0, " ", 0x0, "%", 0x0, "d"
	DCB	0x0, ")", 0x0, 0xd, 0x0, 0xa, 0x0, 0x0, 0x0 ; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1IO@KJJKGPLB@?$AAE?$AAR?$AAR?$AAO?$AAR?$AA?3?$AA?5?$AAB?$AAK?$AAL?$AA_?$AAD?$AAe?$AAi?$AAn?$AAi?$AAt?$AA?3?$AA?5?$AAD?$AAe?$AAi?$AAn?$AAi?$AAt?$AA?5?$AAw?$AAi?$AAt?$AAh?$AA?5?$AAa@| DCB "E"
	DCB	0x0, "R", 0x0, "R", 0x0, "O", 0x0, "R", 0x0, ":", 0x0, " "
	DCB	0x0, "B", 0x0, "K", 0x0, "L", 0x0, "_", 0x0, "D", 0x0, "e"
	DCB	0x0, "i", 0x0, "n", 0x0, "i", 0x0, "t", 0x0, ":", 0x0, " "
	DCB	0x0, "D", 0x0, "e", 0x0, "i", 0x0, "n", 0x0, "i", 0x0, "t"
	DCB	0x0, " ", 0x0, "w", 0x0, "i", 0x0, "t", 0x0, "h", 0x0, " "
	DCB	0x0, "a", 0x0, "c", 0x0, "t", 0x0, "i", 0x0, "v", 0x0, "e"
	DCB	0x0, " ", 0x0, "i", 0x0, "n", 0x0, "s", 0x0, "t", 0x0, "a"
	DCB	0x0, "n", 0x0, "c", 0x0, "e", 0x0, " ", 0x0, "(", 0x0, "%"
	DCB	0x0, "d", 0x0, " ", 0x0, "i", 0x0, "n", 0x0, "s", 0x0, "t"
	DCB	0x0, "a", 0x0, "n", 0x0, "c", 0x0, "e", 0x0, "s", 0x0, " "
	DCB	0x0, "a", 0x0, "c", 0x0, "t", 0x0, "i", 0x0, "v", 0x0, "e"
	DCB	0x0, ")", 0x0, 0xd, 0x0, 0xa, 0x0, 0x0, 0x0 ; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1GC@OMOGMPLK@?$AAE?$AAR?$AAR?$AAO?$AAR?$AA?3?$AA?5?$AAB?$AAK?$AAL?$AA_?$AAD?$AAe?$AAi?$AAn?$AAi?$AAt?$AA?3?$AA?5?$AAI?$AAn?$AAc?$AAo?$AAr?$AAr?$AAe?$AAc?$AAt?$AA?5?$AAc?$AAo?$AAn@| DCB "E"
	DCB	0x0, "R", 0x0, "R", 0x0, "O", 0x0, "R", 0x0, ":", 0x0, " "
	DCB	0x0, "B", 0x0, "K", 0x0, "L", 0x0, "_", 0x0, "D", 0x0, "e"
	DCB	0x0, "i", 0x0, "n", 0x0, "i", 0x0, "t", 0x0, ":", 0x0, " "
	DCB	0x0, "I", 0x0, "n", 0x0, "c", 0x0, "o", 0x0, "r", 0x0, "r"
	DCB	0x0, "e", 0x0, "c", 0x0, "t", 0x0, " ", 0x0, "c", 0x0, "o"
	DCB	0x0, "n", 0x0, "t", 0x0, "e", 0x0, "x", 0x0, "t", 0x0, " "
	DCB	0x0, "p", 0x0, "a", 0x0, "r", 0x0, "a", 0x0, "m", 0x0, "e"
	DCB	0x0, "t", 0x0, "e", 0x0, "r", 0x0, 0xd, 0x0, 0xa, 0x0, 0x0
	DCB	0x0					; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1CM@MHIOCNGL@?$AA?$CL?$AAB?$AAK?$AAL?$AA_?$AAD?$AAe?$AAi?$AAn?$AAi?$AAt?$AA?$CI?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx?$AA?$CJ?$AA?$AN?$AA?6?$AA?$AA@| DCB "+"
	DCB	0x0, "B", 0x0, "K", 0x0, "L", 0x0, "_", 0x0, "D", 0x0, "e"
	DCB	0x0, "i", 0x0, "n", 0x0, "i", 0x0, "t", 0x0, "(", 0x0, "0"
	DCB	0x0, "x", 0x0, "%", 0x0, "0", 0x0, "8", 0x0, "x", 0x0, ")"
	DCB	0x0, 0xd, 0x0, 0xa, 0x0, 0x0, 0x0	; `string'
; Function compile flags: /Odtp

  00418			 AREA	 |.text|, CODE, ARM

  00418		 |BKL_Deinit| PROC

; 228  : {

  00418		 |$LN16@BKL_Deinit|
  00418	e1a0c00d	 mov         r12, sp
  0041c	e92d0001	 stmdb       sp!, {r0}
  00420	e92d5000	 stmdb       sp!, {r12, lr}
  00424	e24dd01c	 sub         sp, sp, #0x1C
  00428		 |$M43150|

; 229  :     BOOL rc = FALSE;

  00428	e3a03000	 mov         r3, #0
  0042c	e58d3004	 str         r3, [sp, #4]

; 230  :     BKL_DEVICE *pDevice = (BKL_DEVICE*)context;

  00430	e59d3024	 ldr         r3, [sp, #0x24]
  00434	e58d3000	 str         r3, [sp]

; 231  : 
; 232  :     DEBUGMSG(ZONE_FUNCTION, (L"+BKL_Deinit(0x%08x)\r\n", context));

  00438	e59f3124	 ldr         r3, [pc, #0x124]
  0043c	e5933440	 ldr         r3, [r3, #0x440]
  00440	e3130004	 tst         r3, #4
  00444	0a000005	 beq         |$LN6@BKL_Deinit|
  00448	e59d1024	 ldr         r1, [sp, #0x24]
  0044c	e59f0120	 ldr         r0, [pc, #0x120]
  00450	eb000000	 bl          NKDbgPrintfW
  00454	e3a03001	 mov         r3, #1
  00458	e58d300c	 str         r3, [sp, #0xC]
  0045c	ea000001	 b           |$LN7@BKL_Deinit|
  00460		 |$LN6@BKL_Deinit|
  00460	e3a03000	 mov         r3, #0
  00464	e58d300c	 str         r3, [sp, #0xC]
  00468		 |$LN7@BKL_Deinit|

; 233  : 
; 234  :     // Check if we get correct context
; 235  :     if (pDevice == NULL || pDevice->cookie != BKL_DEVICE_COOKIE) {

  00468	e59d3000	 ldr         r3, [sp]
  0046c	e3530000	 cmp         r3, #0
  00470	0a000004	 beq         |$LN2@BKL_Deinit|
  00474	e59d3000	 ldr         r3, [sp]
  00478	e5932000	 ldr         r2, [r3]
  0047c	e59f30ec	 ldr         r3, [pc, #0xEC]
  00480	e1520003	 cmp         r2, r3
  00484	0a00000b	 beq         |$LN3@BKL_Deinit|
  00488		 |$LN2@BKL_Deinit|

; 236  :         DEBUGMSG (ZONE_ERROR, (L"ERROR: BKL_Deinit: "
; 237  :             L"Incorrect context parameter\r\n"
; 238  :         ));

  00488	e59f30d4	 ldr         r3, [pc, #0xD4]
  0048c	e5933440	 ldr         r3, [r3, #0x440]
  00490	e3130001	 tst         r3, #1
  00494	0a000004	 beq         |$LN8@BKL_Deinit|
  00498	e59f00cc	 ldr         r0, [pc, #0xCC]
  0049c	eb000000	 bl          NKDbgPrintfW
  004a0	e3a03001	 mov         r3, #1
  004a4	e58d3010	 str         r3, [sp, #0x10]
  004a8	ea000001	 b           |$LN9@BKL_Deinit|
  004ac		 |$LN8@BKL_Deinit|
  004ac	e3a03000	 mov         r3, #0
  004b0	e58d3010	 str         r3, [sp, #0x10]
  004b4		 |$LN9@BKL_Deinit|

; 239  :         goto cleanUp;

  004b4	ea000017	 b           |$cleanUp$42845|
  004b8		 |$LN3@BKL_Deinit|

; 240  :     }
; 241  : 
; 242  :     // Check for open instances
; 243  :     if (pDevice->instances > 0) {

  004b8	e59d3000	 ldr         r3, [sp]
  004bc	e2833004	 add         r3, r3, #4
  004c0	e5933000	 ldr         r3, [r3]
  004c4	e3530000	 cmp         r3, #0
  004c8	da00000e	 ble         |$LN1@BKL_Deinit|

; 244  :         DEBUGMSG (ZONE_ERROR, (L"ERROR: BKL_Deinit: "
; 245  :             L"Deinit with active instance (%d instances active)\r\n",
; 246  :             pDevice->instances
; 247  :         ));

  004cc	e59f3090	 ldr         r3, [pc, #0x90]
  004d0	e5933440	 ldr         r3, [r3, #0x440]
  004d4	e3130001	 tst         r3, #1
  004d8	0a000007	 beq         |$LN10@BKL_Deinit|
  004dc	e59d3000	 ldr         r3, [sp]
  004e0	e2833004	 add         r3, r3, #4
  004e4	e5931000	 ldr         r1, [r3]
  004e8	e59f0078	 ldr         r0, [pc, #0x78]
  004ec	eb000000	 bl          NKDbgPrintfW
  004f0	e3a03001	 mov         r3, #1
  004f4	e58d3014	 str         r3, [sp, #0x14]
  004f8	ea000001	 b           |$LN11@BKL_Deinit|
  004fc		 |$LN10@BKL_Deinit|
  004fc	e3a03000	 mov         r3, #0
  00500	e58d3014	 str         r3, [sp, #0x14]
  00504		 |$LN11@BKL_Deinit|

; 248  :         goto cleanUp;

  00504	ea000003	 b           |$cleanUp$42845|
  00508		 |$LN1@BKL_Deinit|

; 249  :     }
; 250  : 
; 251  :     // Free device structure
; 252  :     LocalFree(pDevice);

  00508	e59d0000	 ldr         r0, [sp]
  0050c	eb000000	 bl          LocalFree

; 253  : 
; 254  :     // Done
; 255  :     rc = TRUE;

  00510	e3a03001	 mov         r3, #1
  00514	e58d3004	 str         r3, [sp, #4]
  00518		 |$cleanUp$42845|

; 256  : 
; 257  : cleanUp:
; 258  :     DEBUGMSG(ZONE_FUNCTION, (L"-BKL_Deinit(rc = %d)\r\n", rc));

  00518	e59f3044	 ldr         r3, [pc, #0x44]
  0051c	e5933440	 ldr         r3, [r3, #0x440]
  00520	e3130004	 tst         r3, #4
  00524	0a000005	 beq         |$LN12@BKL_Deinit|
  00528	e59d1004	 ldr         r1, [sp, #4]
  0052c	e59f002c	 ldr         r0, [pc, #0x2C]
  00530	eb000000	 bl          NKDbgPrintfW
  00534	e3a03001	 mov         r3, #1
  00538	e58d3018	 str         r3, [sp, #0x18]
  0053c	ea000001	 b           |$LN13@BKL_Deinit|
  00540		 |$LN12@BKL_Deinit|
  00540	e3a03000	 mov         r3, #0
  00544	e58d3018	 str         r3, [sp, #0x18]
  00548		 |$LN13@BKL_Deinit|

; 259  :     return rc;

  00548	e59d3004	 ldr         r3, [sp, #4]
  0054c	e58d3008	 str         r3, [sp, #8]

; 260  : }

  00550	e59d0008	 ldr         r0, [sp, #8]
  00554	e28dd01c	 add         sp, sp, #0x1C
  00558	e89d6000	 ldmia       sp, {sp, lr}
  0055c	e12fff1e	 bx          lr
  00560		 |$LN17@BKL_Deinit|
  00560		 |$LN18@BKL_Deinit|
  00560	00000000	 DCD         |??_C@_1CO@FAPHMGMA@?$AA?9?$AAB?$AAK?$AAL?$AA_?$AAD?$AAe?$AAi?$AAn?$AAi?$AAt?$AA?$CI?$AAr?$AAc?$AA?5?$AA?$DN?$AA?5?$AA?$CF?$AAd?$AA?$CJ?$AA?$AN?$AA?6?$AA?$AA@|
  00564		 |$LN19@BKL_Deinit|
  00564	00000000	 DCD         |dpCurSettings|
  00568		 |$LN20@BKL_Deinit|
  00568	00000000	 DCD         |??_C@_1IO@KJJKGPLB@?$AAE?$AAR?$AAR?$AAO?$AAR?$AA?3?$AA?5?$AAB?$AAK?$AAL?$AA_?$AAD?$AAe?$AAi?$AAn?$AAi?$AAt?$AA?3?$AA?5?$AAD?$AAe?$AAi?$AAn?$AAi?$AAt?$AA?5?$AAw?$AAi?$AAt?$AAh?$AA?5?$AAa@|
  0056c		 |$LN21@BKL_Deinit|
  0056c	00000000	 DCD         |??_C@_1GC@OMOGMPLK@?$AAE?$AAR?$AAR?$AAO?$AAR?$AA?3?$AA?5?$AAB?$AAK?$AAL?$AA_?$AAD?$AAe?$AAi?$AAn?$AAi?$AAt?$AA?3?$AA?5?$AAI?$AAn?$AAc?$AAo?$AAr?$AAr?$AAe?$AAc?$AAt?$AA?5?$AAc?$AAo?$AAn@|
  00570		 |$LN22@BKL_Deinit|
  00570	626b6c44	 DCD         0x626b6c44
  00574		 |$LN23@BKL_Deinit|
  00574	00000000	 DCD         |??_C@_1CM@MHIOCNGL@?$AA?$CL?$AAB?$AAK?$AAL?$AA_?$AAD?$AAe?$AAi?$AAn?$AAi?$AAt?$AA?$CI?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx?$AA?$CJ?$AA?$AN?$AA?6?$AA?$AA@|
  00578		 |$M43151|

			 ENDP  ; |BKL_Deinit|

	EXPORT	|??_C@_1DC@KPHEHAIM@?$AA?9?$AAB?$AAK?$AAL?$AA_?$AAO?$AAp?$AAe?$AAn?$AA?$CI?$AAr?$AAc?$AA?5?$AA?$DN?$AA?5?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx?$AA?$CJ?$AA?$AN?$AA?6?$AA?$AA@| [ DATA ] ; `string'
	EXPORT	|??_C@_1FK@FNONLNGN@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAD?$AAE?$AAB?$AAU?$AAG?$AAC?$AAH?$AAK?$AA?5?$AAf?$AAa?$AAi?$AAl?$AAe?$AAd?$AA?5?$AAi?$AAn?$AA?5?$AAf?$AAi?$AAl?$AAe?$AA?5?$AA?$CF?$AAs?$AA?5?$AAa@| [ DATA ] ; `string'
	EXPORT	|??_C@_1BA@LEPJIIOK@?$AAU?$AAn?$AAk?$AAn?$AAo?$AAw?$AAn?$AA?$AA@| [ DATA ] ; `string'
	EXPORT	|??_C@_1JG@GDDKIEBE@?$AAC?$AA?3?$AA?2?$AAW?$AAI?$AAN?$AAC?$AAE?$AA6?$AA0?$AA0?$AA?2?$AAP?$AAL?$AAA?$AAT?$AAF?$AAO?$AAR?$AAM?$AA?2?$AAC?$AAO?$AAM?$AAM?$AAO?$AAN?$AA?2?$AAS?$AAR?$AAC?$AA?2@| [ DATA ] ; `string'
	EXPORT	|??_C@_1HE@PMPHLGBF@?$AAE?$AAR?$AAR?$AAO?$AAR?$AA?3?$AA?5?$AAB?$AAK?$AAL?$AA_?$AAO?$AAp?$AAe?$AAn?$AA?3?$AA?5?$AAF?$AAa?$AAi?$AAl?$AAe?$AAd?$AA?5?$AAa?$AAl?$AAl?$AAo?$AAc?$AAa?$AAt?$AAe@| [ DATA ] ; `string'
	EXPORT	|??_C@_1FO@BPONKDFA@?$AAE?$AAR?$AAR?$AAO?$AAR?$AA?3?$AA?5?$AAB?$AAK?$AAL?$AA_?$AAO?$AAp?$AAe?$AAn?$AA?3?$AA?5?$AAI?$AAn?$AAc?$AAo?$AAr?$AAr?$AAe?$AAc?$AAt?$AA?5?$AAc?$AAo?$AAn?$AAt?$AAe@| [ DATA ] ; `string'
	EXPORT	|??_C@_1EG@MPENFDPD@?$AA?$CL?$AAB?$AAK?$AAL?$AA_?$AAO?$AAp?$AAe?$AAn?$AA?$CI?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx?$AA?0?$AA?5?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx?$AA?0?$AA?5?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx@| [ DATA ] ; `string'
	EXPORT	|BKL_Open|
	IMPORT	|InterlockedIncrement|

  00018			 AREA	 |.pdata|, PDATA
|$T43176| DCD	|$LN18@BKL_Open|
	DCD	0x40007a04

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1DC@KPHEHAIM@?$AA?9?$AAB?$AAK?$AAL?$AA_?$AAO?$AAp?$AAe?$AAn?$AA?$CI?$AAr?$AAc?$AA?5?$AA?$DN?$AA?5?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx?$AA?$CJ?$AA?$AN?$AA?6?$AA?$AA@| DCB "-"
	DCB	0x0, "B", 0x0, "K", 0x0, "L", 0x0, "_", 0x0, "O", 0x0, "p"
	DCB	0x0, "e", 0x0, "n", 0x0, "(", 0x0, "r", 0x0, "c", 0x0, " "
	DCB	0x0, "=", 0x0, " ", 0x0, "0", 0x0, "x", 0x0, "%", 0x0, "0"
	DCB	0x0, "8", 0x0, "x", 0x0, ")", 0x0, 0xd, 0x0, 0xa, 0x0, 0x0
	DCB	0x0					; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1FK@FNONLNGN@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAD?$AAE?$AAB?$AAU?$AAG?$AAC?$AAH?$AAK?$AA?5?$AAf?$AAa?$AAi?$AAl?$AAe?$AAd?$AA?5?$AAi?$AAn?$AA?5?$AAf?$AAi?$AAl?$AAe?$AA?5?$AA?$CF?$AAs?$AA?5?$AAa@| DCB "%"
	DCB	0x0, "s", 0x0, ":", 0x0, " ", 0x0, "D", 0x0, "E", 0x0, "B"
	DCB	0x0, "U", 0x0, "G", 0x0, "C", 0x0, "H", 0x0, "K", 0x0, " "
	DCB	0x0, "f", 0x0, "a", 0x0, "i", 0x0, "l", 0x0, "e", 0x0, "d"
	DCB	0x0, " ", 0x0, "i", 0x0, "n", 0x0, " ", 0x0, "f", 0x0, "i"
	DCB	0x0, "l", 0x0, "e", 0x0, " ", 0x0, "%", 0x0, "s", 0x0, " "
	DCB	0x0, "a", 0x0, "t", 0x0, " ", 0x0, "l", 0x0, "i", 0x0, "n"
	DCB	0x0, "e", 0x0, " ", 0x0, "%", 0x0, "d", 0x0, " ", 0x0, 0xd
	DCB	0x0, 0xa, 0x0, 0x0, 0x0			; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1BA@LEPJIIOK@?$AAU?$AAn?$AAk?$AAn?$AAo?$AAw?$AAn?$AA?$AA@| DCB "U", 0x0
	DCB	"n", 0x0, "k", 0x0, "n", 0x0, "o", 0x0, "w", 0x0, "n", 0x0
	DCB	0x0, 0x0				; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1JG@GDDKIEBE@?$AAC?$AA?3?$AA?2?$AAW?$AAI?$AAN?$AAC?$AAE?$AA6?$AA0?$AA0?$AA?2?$AAP?$AAL?$AAA?$AAT?$AAF?$AAO?$AAR?$AAM?$AA?2?$AAC?$AAO?$AAM?$AAM?$AAO?$AAN?$AA?2?$AAS?$AAR?$AAC?$AA?2@| DCB "C"
	DCB	0x0, ":", 0x0, "\\", 0x0, "W", 0x0, "I", 0x0, "N", 0x0, "C"
	DCB	0x0, "E", 0x0, "6", 0x0, "0", 0x0, "0", 0x0, "\\", 0x0, "P"
	DCB	0x0, "L", 0x0, "A", 0x0, "T", 0x0, "F", 0x0, "O", 0x0, "R"
	DCB	0x0, "M", 0x0, "\\", 0x0, "C", 0x0, "O", 0x0, "M", 0x0, "M"
	DCB	0x0, "O", 0x0, "N", 0x0, "\\", 0x0, "S", 0x0, "R", 0x0, "C"
	DCB	0x0, "\\", 0x0, "S", 0x0, "O", 0x0, "C", 0x0, "\\", 0x0, "O"
	DCB	0x0, "M", 0x0, "A", 0x0, "P", 0x0, "2", 0x0, "4", 0x0, "2"
	DCB	0x0, "0", 0x0, "_", 0x0, "M", 0x0, "S", 0x0, "_", 0x0, "V"
	DCB	0x0, "1", 0x0, "\\", 0x0, "B", 0x0, "A", 0x0, "C", 0x0, "K"
	DCB	0x0, "L", 0x0, "I", 0x0, "G", 0x0, "H", 0x0, "T", 0x0, "\\"
	DCB	0x0, ".", 0x0, "\\", 0x0, "b", 0x0, "a", 0x0, "c", 0x0, "k"
	DCB	0x0, "l", 0x0, "i", 0x0, "g", 0x0, "h", 0x0, "t", 0x0, "."
	DCB	0x0, "c", 0x0, 0x0, 0x0			; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1HE@PMPHLGBF@?$AAE?$AAR?$AAR?$AAO?$AAR?$AA?3?$AA?5?$AAB?$AAK?$AAL?$AA_?$AAO?$AAp?$AAe?$AAn?$AA?3?$AA?5?$AAF?$AAa?$AAi?$AAl?$AAe?$AAd?$AA?5?$AAa?$AAl?$AAl?$AAo?$AAc?$AAa?$AAt?$AAe@| DCB "E"
	DCB	0x0, "R", 0x0, "R", 0x0, "O", 0x0, "R", 0x0, ":", 0x0, " "
	DCB	0x0, "B", 0x0, "K", 0x0, "L", 0x0, "_", 0x0, "O", 0x0, "p"
	DCB	0x0, "e", 0x0, "n", 0x0, ":", 0x0, " ", 0x0, "F", 0x0, "a"
	DCB	0x0, "i", 0x0, "l", 0x0, "e", 0x0, "d", 0x0, " ", 0x0, "a"
	DCB	0x0, "l", 0x0, "l", 0x0, "o", 0x0, "c", 0x0, "a", 0x0, "t"
	DCB	0x0, "e", 0x0, " ", 0x0, "B", 0x0, "K", 0x0, "L", 0x0, " "
	DCB	0x0, "i", 0x0, "n", 0x0, "s", 0x0, "t", 0x0, "a", 0x0, "n"
	DCB	0x0, "c", 0x0, "e", 0x0, " ", 0x0, "s", 0x0, "t", 0x0, "r"
	DCB	0x0, "u", 0x0, "c", 0x0, "t", 0x0, "u", 0x0, "r", 0x0, "e"
	DCB	0x0, 0xd, 0x0, 0xa, 0x0, 0x0, 0x0	; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1FO@BPONKDFA@?$AAE?$AAR?$AAR?$AAO?$AAR?$AA?3?$AA?5?$AAB?$AAK?$AAL?$AA_?$AAO?$AAp?$AAe?$AAn?$AA?3?$AA?5?$AAI?$AAn?$AAc?$AAo?$AAr?$AAr?$AAe?$AAc?$AAt?$AA?5?$AAc?$AAo?$AAn?$AAt?$AAe@| DCB "E"
	DCB	0x0, "R", 0x0, "R", 0x0, "O", 0x0, "R", 0x0, ":", 0x0, " "
	DCB	0x0, "B", 0x0, "K", 0x0, "L", 0x0, "_", 0x0, "O", 0x0, "p"
	DCB	0x0, "e", 0x0, "n", 0x0, ":", 0x0, " ", 0x0, "I", 0x0, "n"
	DCB	0x0, "c", 0x0, "o", 0x0, "r", 0x0, "r", 0x0, "e", 0x0, "c"
	DCB	0x0, "t", 0x0, " ", 0x0, "c", 0x0, "o", 0x0, "n", 0x0, "t"
	DCB	0x0, "e", 0x0, "x", 0x0, "t", 0x0, " ", 0x0, "p", 0x0, "a"
	DCB	0x0, "r", 0x0, "a", 0x0, "m", 0x0, "e", 0x0, "t", 0x0, "e"
	DCB	0x0, "r", 0x0, 0xd, 0x0, 0xa, 0x0, 0x0, 0x0 ; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1EG@MPENFDPD@?$AA?$CL?$AAB?$AAK?$AAL?$AA_?$AAO?$AAp?$AAe?$AAn?$AA?$CI?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx?$AA?0?$AA?5?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx?$AA?0?$AA?5?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx@| DCB "+"
	DCB	0x0, "B", 0x0, "K", 0x0, "L", 0x0, "_", 0x0, "O", 0x0, "p"
	DCB	0x0, "e", 0x0, "n", 0x0, "(", 0x0, "0", 0x0, "x", 0x0, "%"
	DCB	0x0, "0", 0x0, "8", 0x0, "x", 0x0, ",", 0x0, " ", 0x0, "0"
	DCB	0x0, "x", 0x0, "%", 0x0, "0", 0x0, "8", 0x0, "x", 0x0, ","
	DCB	0x0, " ", 0x0, "0", 0x0, "x", 0x0, "%", 0x0, "0", 0x0, "8"
	DCB	0x0, "x", 0x0, 0xd, 0x0, 0xa, 0x0, 0x0, 0x0 ; `string'
; Function compile flags: /Odtp

  00578			 AREA	 |.text|, CODE, ARM

  00578		 |BKL_Open| PROC

; 269  : {

  00578		 |$LN18@BKL_Open|
  00578	e1a0c00d	 mov         r12, sp
  0057c	e92d0007	 stmdb       sp!, {r0 - r2}
  00580	e92d5000	 stmdb       sp!, {r12, lr}
  00584	e24dd028	 sub         sp, sp, #0x28
  00588		 |$M43173|

; 270  :     DWORD rc = (DWORD)NULL;

  00588	e3a03000	 mov         r3, #0
  0058c	e58d3004	 str         r3, [sp, #4]

; 271  :     BKL_DEVICE *pDevice = (BKL_DEVICE*)context;

  00590	e59d3030	 ldr         r3, [sp, #0x30]
  00594	e58d3000	 str         r3, [sp]

; 272  :     BKL_INSTANCE *pInstance = NULL;

  00598	e3a03000	 mov         r3, #0
  0059c	e58d3008	 str         r3, [sp, #8]

; 273  : 
; 274  :     DEBUGMSG(ZONE_FUNCTION, (
; 275  :         L"+BKL_Open(0x%08x, 0x%08x, 0x%08x\r\n", context, accessCode, shareMode
; 276  :     ));

  005a0	e59f3194	 ldr         r3, [pc, #0x194]
  005a4	e5933440	 ldr         r3, [r3, #0x440]
  005a8	e3130004	 tst         r3, #4
  005ac	0a000007	 beq         |$LN6@BKL_Open|
  005b0	e59d3038	 ldr         r3, [sp, #0x38]
  005b4	e59d2034	 ldr         r2, [sp, #0x34]
  005b8	e59d1030	 ldr         r1, [sp, #0x30]
  005bc	e59f0198	 ldr         r0, [pc, #0x198]
  005c0	eb000000	 bl          NKDbgPrintfW
  005c4	e3a03001	 mov         r3, #1
  005c8	e58d3010	 str         r3, [sp, #0x10]
  005cc	ea000001	 b           |$LN7@BKL_Open|
  005d0		 |$LN6@BKL_Open|
  005d0	e3a03000	 mov         r3, #0
  005d4	e58d3010	 str         r3, [sp, #0x10]
  005d8		 |$LN7@BKL_Open|

; 277  : 
; 278  :     // Check if we get correct context
; 279  :     if (pDevice == NULL || pDevice->cookie != BKL_DEVICE_COOKIE) {

  005d8	e59d3000	 ldr         r3, [sp]
  005dc	e3530000	 cmp         r3, #0
  005e0	0a000004	 beq         |$LN2@BKL_Open|
  005e4	e59d3000	 ldr         r3, [sp]
  005e8	e5932000	 ldr         r2, [r3]
  005ec	e59f3164	 ldr         r3, [pc, #0x164]
  005f0	e1520003	 cmp         r2, r3
  005f4	0a00000b	 beq         |$LN3@BKL_Open|
  005f8		 |$LN2@BKL_Open|

; 280  :         DEBUGMSG (ZONE_ERROR, (L"ERROR: BKL_Open: "
; 281  :             L"Incorrect context parameter\r\n"
; 282  :         ));

  005f8	e59f313c	 ldr         r3, [pc, #0x13C]
  005fc	e5933440	 ldr         r3, [r3, #0x440]
  00600	e3130001	 tst         r3, #1
  00604	0a000004	 beq         |$LN8@BKL_Open|
  00608	e59f0144	 ldr         r0, [pc, #0x144]
  0060c	eb000000	 bl          NKDbgPrintfW
  00610	e3a03001	 mov         r3, #1
  00614	e58d3014	 str         r3, [sp, #0x14]
  00618	ea000001	 b           |$LN9@BKL_Open|
  0061c		 |$LN8@BKL_Open|
  0061c	e3a03000	 mov         r3, #0
  00620	e58d3014	 str         r3, [sp, #0x14]
  00624		 |$LN9@BKL_Open|

; 283  :         goto cleanUp;

  00624	ea000031	 b           |$cleanUp$42873|
  00628		 |$LN3@BKL_Open|

; 284  :     }
; 285  : 
; 286  :     // Create device structure
; 287  :     pInstance = (BKL_INSTANCE*)LocalAlloc(LPTR, sizeof(BKL_INSTANCE));

  00628	e3a01008	 mov         r1, #8
  0062c	e3a00040	 mov         r0, #0x40
  00630	eb000000	 bl          LocalAlloc
  00634	e58d0018	 str         r0, [sp, #0x18]
  00638	e59d3018	 ldr         r3, [sp, #0x18]
  0063c	e58d3008	 str         r3, [sp, #8]

; 288  :     if (pInstance == NULL) {

  00640	e59d3008	 ldr         r3, [sp, #8]
  00644	e3530000	 cmp         r3, #0
  00648	1a00000b	 bne         |$LN1@BKL_Open|

; 289  :         DEBUGMSG(ZONE_ERROR, (L"ERROR: BKL_Open: "
; 290  :             L"Failed allocate BKL instance structure\r\n"
; 291  :         ));

  0064c	e59f30e8	 ldr         r3, [pc, #0xE8]
  00650	e5933440	 ldr         r3, [r3, #0x440]
  00654	e3130001	 tst         r3, #1
  00658	0a000004	 beq         |$LN10@BKL_Open|
  0065c	e59f00ec	 ldr         r0, [pc, #0xEC]
  00660	eb000000	 bl          NKDbgPrintfW
  00664	e3a03001	 mov         r3, #1
  00668	e58d301c	 str         r3, [sp, #0x1C]
  0066c	ea000001	 b           |$LN11@BKL_Open|
  00670		 |$LN10@BKL_Open|
  00670	e3a03000	 mov         r3, #0
  00674	e58d301c	 str         r3, [sp, #0x1C]
  00678		 |$LN11@BKL_Open|

; 292  :         goto cleanUp;

  00678	ea00001c	 b           |$cleanUp$42873|
  0067c		 |$LN1@BKL_Open|

; 293  :     }
; 294  : 
; 295  :     // Set cookie
; 296  :     pInstance->cookie = BKL_INSTANCE_COOKIE;

  0067c	e59d2008	 ldr         r2, [sp, #8]
  00680	e59f30c4	 ldr         r3, [pc, #0xC4]
  00684	e5823000	 str         r3, [r2]

; 297  : 
; 298  :     // Save device reference
; 299  :     pInstance->pDevice = pDevice;

  00688	e59d3008	 ldr         r3, [sp, #8]
  0068c	e2832004	 add         r2, r3, #4
  00690	e59d3000	 ldr         r3, [sp]
  00694	e5823000	 str         r3, [r2]

; 300  : 
; 301  :     // Increment number of open instances
; 302  :     InterlockedIncrement(&pDevice->instances);

  00698	e59d3000	 ldr         r3, [sp]
  0069c	e2830004	 add         r0, r3, #4
  006a0	eb000000	 bl          InterlockedIncrement

; 303  : 
; 304  :     // sanity check number of instances
; 305  :     ASSERT(pDevice->instances > 0);

  006a4	e59d3000	 ldr         r3, [sp]
  006a8	e2833004	 add         r3, r3, #4
  006ac	e5933000	 ldr         r3, [r3]
  006b0	e3530000	 cmp         r3, #0
  006b4	da000002	 ble         |$LN12@BKL_Open|
  006b8	e3a03001	 mov         r3, #1
  006bc	e58d3020	 str         r3, [sp, #0x20]
  006c0	ea000008	 b           |$LN13@BKL_Open|
  006c4		 |$LN12@BKL_Open|
  006c4	e3a03c01	 mov         r3, #1, 24
  006c8	e3833031	 orr         r3, r3, #0x31
  006cc	e59f2074	 ldr         r2, [pc, #0x74]
  006d0	e59f106c	 ldr         r1, [pc, #0x6C]
  006d4	e59f0064	 ldr         r0, [pc, #0x64]
  006d8	eb000000	 bl          NKDbgPrintfW
  006dc	e6000010	 __debugbreak_ce
  006e0	e3a03000	 mov         r3, #0
  006e4	e58d3020	 str         r3, [sp, #0x20]
  006e8		 |$LN13@BKL_Open|

; 306  : 
; 307  :     // Done...
; 308  :     rc = (DWORD)pInstance;

  006e8	e59d3008	 ldr         r3, [sp, #8]
  006ec	e58d3004	 str         r3, [sp, #4]
  006f0		 |$cleanUp$42873|

; 309  : 
; 310  : cleanUp:
; 311  :     DEBUGMSG(ZONE_FUNCTION, (L"-BKL_Open(rc = 0x%08x)\r\n", rc));

  006f0	e59f3044	 ldr         r3, [pc, #0x44]
  006f4	e5933440	 ldr         r3, [r3, #0x440]
  006f8	e3130004	 tst         r3, #4
  006fc	0a000005	 beq         |$LN14@BKL_Open|
  00700	e59d1004	 ldr         r1, [sp, #4]
  00704	e59f002c	 ldr         r0, [pc, #0x2C]
  00708	eb000000	 bl          NKDbgPrintfW
  0070c	e3a03001	 mov         r3, #1
  00710	e58d3024	 str         r3, [sp, #0x24]
  00714	ea000001	 b           |$LN15@BKL_Open|
  00718		 |$LN14@BKL_Open|
  00718	e3a03000	 mov         r3, #0
  0071c	e58d3024	 str         r3, [sp, #0x24]
  00720		 |$LN15@BKL_Open|

; 312  :     return rc;

  00720	e59d3004	 ldr         r3, [sp, #4]
  00724	e58d300c	 str         r3, [sp, #0xC]

; 313  : }

  00728	e59d000c	 ldr         r0, [sp, #0xC]
  0072c	e28dd028	 add         sp, sp, #0x28
  00730	e89d6000	 ldmia       sp, {sp, lr}
  00734	e12fff1e	 bx          lr
  00738		 |$LN19@BKL_Open|
  00738		 |$LN20@BKL_Open|
  00738	00000000	 DCD         |??_C@_1DC@KPHEHAIM@?$AA?9?$AAB?$AAK?$AAL?$AA_?$AAO?$AAp?$AAe?$AAn?$AA?$CI?$AAr?$AAc?$AA?5?$AA?$DN?$AA?5?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx?$AA?$CJ?$AA?$AN?$AA?6?$AA?$AA@|
  0073c		 |$LN21@BKL_Open|
  0073c	00000000	 DCD         |dpCurSettings|
  00740		 |$LN22@BKL_Open|
  00740	00000000	 DCD         |??_C@_1FK@FNONLNGN@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAD?$AAE?$AAB?$AAU?$AAG?$AAC?$AAH?$AAK?$AA?5?$AAf?$AAa?$AAi?$AAl?$AAe?$AAd?$AA?5?$AAi?$AAn?$AA?5?$AAf?$AAi?$AAl?$AAe?$AA?5?$AA?$CF?$AAs?$AA?5?$AAa@|
  00744		 |$LN23@BKL_Open|
  00744	00000000	 DCD         |??_C@_1BA@LEPJIIOK@?$AAU?$AAn?$AAk?$AAn?$AAo?$AAw?$AAn?$AA?$AA@|
  00748		 |$LN24@BKL_Open|
  00748	00000000	 DCD         |??_C@_1JG@GDDKIEBE@?$AAC?$AA?3?$AA?2?$AAW?$AAI?$AAN?$AAC?$AAE?$AA6?$AA0?$AA0?$AA?2?$AAP?$AAL?$AAA?$AAT?$AAF?$AAO?$AAR?$AAM?$AA?2?$AAC?$AAO?$AAM?$AAM?$AAO?$AAN?$AA?2?$AAS?$AAR?$AAC?$AA?2@|
  0074c		 |$LN25@BKL_Open|
  0074c	626b6c49	 DCD         0x626b6c49
  00750		 |$LN26@BKL_Open|
  00750	00000000	 DCD         |??_C@_1HE@PMPHLGBF@?$AAE?$AAR?$AAR?$AAO?$AAR?$AA?3?$AA?5?$AAB?$AAK?$AAL?$AA_?$AAO?$AAp?$AAe?$AAn?$AA?3?$AA?5?$AAF?$AAa?$AAi?$AAl?$AAe?$AAd?$AA?5?$AAa?$AAl?$AAl?$AAo?$AAc?$AAa?$AAt?$AAe@|
  00754		 |$LN27@BKL_Open|
  00754	00000000	 DCD         |??_C@_1FO@BPONKDFA@?$AAE?$AAR?$AAR?$AAO?$AAR?$AA?3?$AA?5?$AAB?$AAK?$AAL?$AA_?$AAO?$AAp?$AAe?$AAn?$AA?3?$AA?5?$AAI?$AAn?$AAc?$AAo?$AAr?$AAr?$AAe?$AAc?$AAt?$AA?5?$AAc?$AAo?$AAn?$AAt?$AAe@|
  00758		 |$LN28@BKL_Open|
  00758	626b6c44	 DCD         0x626b6c44
  0075c		 |$LN29@BKL_Open|
  0075c	00000000	 DCD         |??_C@_1EG@MPENFDPD@?$AA?$CL?$AAB?$AAK?$AAL?$AA_?$AAO?$AAp?$AAe?$AAn?$AA?$CI?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx?$AA?0?$AA?5?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx?$AA?0?$AA?5?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx@|
  00760		 |$M43174|

			 ENDP  ; |BKL_Open|

	EXPORT	|??_C@_1CM@ICAPIOHD@?$AA?9?$AAB?$AAK?$AAL?$AA_?$AAC?$AAl?$AAo?$AAs?$AAe?$AA?$CI?$AAr?$AAc?$AA?5?$AA?$DN?$AA?5?$AA?$CF?$AAd?$AA?$CJ?$AA?$AN?$AA?6?$AA?$AA@| [ DATA ] ; `string'
	EXPORT	|??_C@_1FK@JPPGHMCG@?$AAE?$AAR?$AAR?$AAO?$AAR?$AA?3?$AA?5?$AAB?$AAK?$AAL?$AA_?$AAR?$AAe?$AAa?$AAd?$AA?3?$AA?5?$AAI?$AAn?$AAc?$AAo?$AAr?$AAr?$AAe?$AAc?$AAt?$AA?5?$AAc?$AAo?$AAn?$AAt?$AAe@| [ DATA ] ; `string'
	EXPORT	|??_C@_1CK@IJIDNLJG@?$AA?$CL?$AAB?$AAK?$AAL?$AA_?$AAC?$AAl?$AAo?$AAs?$AAe?$AA?$CI?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx?$AA?$CJ?$AA?$AN?$AA?6?$AA?$AA@| [ DATA ] ; `string'
	EXPORT	|BKL_Close|
	IMPORT	|InterlockedDecrement|

  00020			 AREA	 |.pdata|, PDATA
|$T43201| DCD	|$LN15@BKL_Close|
	DCD	0x40005e04

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1CM@ICAPIOHD@?$AA?9?$AAB?$AAK?$AAL?$AA_?$AAC?$AAl?$AAo?$AAs?$AAe?$AA?$CI?$AAr?$AAc?$AA?5?$AA?$DN?$AA?5?$AA?$CF?$AAd?$AA?$CJ?$AA?$AN?$AA?6?$AA?$AA@| DCB "-"
	DCB	0x0, "B", 0x0, "K", 0x0, "L", 0x0, "_", 0x0, "C", 0x0, "l"
	DCB	0x0, "o", 0x0, "s", 0x0, "e", 0x0, "(", 0x0, "r", 0x0, "c"
	DCB	0x0, " ", 0x0, "=", 0x0, " ", 0x0, "%", 0x0, "d", 0x0, ")"
	DCB	0x0, 0xd, 0x0, 0xa, 0x0, 0x0, 0x0	; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1FK@JPPGHMCG@?$AAE?$AAR?$AAR?$AAO?$AAR?$AA?3?$AA?5?$AAB?$AAK?$AAL?$AA_?$AAR?$AAe?$AAa?$AAd?$AA?3?$AA?5?$AAI?$AAn?$AAc?$AAo?$AAr?$AAr?$AAe?$AAc?$AAt?$AA?5?$AAc?$AAo?$AAn?$AAt?$AAe@| DCB "E"
	DCB	0x0, "R", 0x0, "R", 0x0, "O", 0x0, "R", 0x0, ":", 0x0, " "
	DCB	0x0, "B", 0x0, "K", 0x0, "L", 0x0, "_", 0x0, "R", 0x0, "e"
	DCB	0x0, "a", 0x0, "d", 0x0, ":", 0x0, " ", 0x0, "I", 0x0, "n"
	DCB	0x0, "c", 0x0, "o", 0x0, "r", 0x0, "r", 0x0, "e", 0x0, "c"
	DCB	0x0, "t", 0x0, " ", 0x0, "c", 0x0, "o", 0x0, "n", 0x0, "t"
	DCB	0x0, "e", 0x0, "x", 0x0, "t", 0x0, " ", 0x0, "p", 0x0, "a"
	DCB	0x0, "r", 0x0, "a", 0x0, "m", 0x0, "e", 0x0, "r", 0x0, 0xd
	DCB	0x0, 0xa, 0x0, 0x0, 0x0			; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1CK@IJIDNLJG@?$AA?$CL?$AAB?$AAK?$AAL?$AA_?$AAC?$AAl?$AAo?$AAs?$AAe?$AA?$CI?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx?$AA?$CJ?$AA?$AN?$AA?6?$AA?$AA@| DCB "+"
	DCB	0x0, "B", 0x0, "K", 0x0, "L", 0x0, "_", 0x0, "C", 0x0, "l"
	DCB	0x0, "o", 0x0, "s", 0x0, "e", 0x0, "(", 0x0, "0", 0x0, "x"
	DCB	0x0, "%", 0x0, "0", 0x0, "8", 0x0, "x", 0x0, ")", 0x0, 0xd
	DCB	0x0, 0xa, 0x0, 0x0, 0x0			; `string'
; Function compile flags: /Odtp

  00760			 AREA	 |.text|, CODE, ARM

  00760		 |BKL_Close| PROC

; 322  : {

  00760		 |$LN15@BKL_Close|
  00760	e1a0c00d	 mov         r12, sp
  00764	e92d0001	 stmdb       sp!, {r0}
  00768	e92d5000	 stmdb       sp!, {r12, lr}
  0076c	e24dd020	 sub         sp, sp, #0x20
  00770		 |$M43198|

; 323  :     BOOL rc = FALSE;

  00770	e3a03000	 mov         r3, #0
  00774	e58d3004	 str         r3, [sp, #4]

; 324  :     BKL_DEVICE *pDevice;
; 325  :     BKL_INSTANCE *pInstance = (BKL_INSTANCE*)context;

  00778	e59d3028	 ldr         r3, [sp, #0x28]
  0077c	e58d3008	 str         r3, [sp, #8]

; 326  : 
; 327  :     DEBUGMSG(ZONE_FUNCTION, (L"+BKL_Close(0x%08x)\r\n", context));

  00780	e59f3134	 ldr         r3, [pc, #0x134]
  00784	e5933440	 ldr         r3, [r3, #0x440]
  00788	e3130004	 tst         r3, #4
  0078c	0a000005	 beq         |$LN5@BKL_Close|
  00790	e59d1028	 ldr         r1, [sp, #0x28]
  00794	e59f0138	 ldr         r0, [pc, #0x138]
  00798	eb000000	 bl          NKDbgPrintfW
  0079c	e3a03001	 mov         r3, #1
  007a0	e58d3010	 str         r3, [sp, #0x10]
  007a4	ea000001	 b           |$LN6@BKL_Close|
  007a8		 |$LN5@BKL_Close|
  007a8	e3a03000	 mov         r3, #0
  007ac	e58d3010	 str         r3, [sp, #0x10]
  007b0		 |$LN6@BKL_Close|

; 328  : 
; 329  :     // Check if we get correct context
; 330  :     if (pInstance == NULL || pInstance->cookie != BKL_INSTANCE_COOKIE) {

  007b0	e59d3008	 ldr         r3, [sp, #8]
  007b4	e3530000	 cmp         r3, #0
  007b8	0a000004	 beq         |$LN1@BKL_Close|
  007bc	e59d3008	 ldr         r3, [sp, #8]
  007c0	e5932000	 ldr         r2, [r3]
  007c4	e59f3104	 ldr         r3, [pc, #0x104]
  007c8	e1520003	 cmp         r2, r3
  007cc	0a00000b	 beq         |$LN2@BKL_Close|
  007d0		 |$LN1@BKL_Close|

; 331  :         DEBUGMSG (ZONE_ERROR, (L"ERROR: BKL_Read: "
; 332  :             L"Incorrect context paramer\r\n"
; 333  :         ));

  007d0	e59f30e4	 ldr         r3, [pc, #0xE4]
  007d4	e5933440	 ldr         r3, [r3, #0x440]
  007d8	e3130001	 tst         r3, #1
  007dc	0a000004	 beq         |$LN7@BKL_Close|
  007e0	e59f00e4	 ldr         r0, [pc, #0xE4]
  007e4	eb000000	 bl          NKDbgPrintfW
  007e8	e3a03001	 mov         r3, #1
  007ec	e58d3014	 str         r3, [sp, #0x14]
  007f0	ea000001	 b           |$LN8@BKL_Close|
  007f4		 |$LN7@BKL_Close|
  007f4	e3a03000	 mov         r3, #0
  007f8	e58d3014	 str         r3, [sp, #0x14]
  007fc		 |$LN8@BKL_Close|

; 334  :         goto cleanUp;

  007fc	ea00001b	 b           |$cleanUp$42903|
  00800		 |$LN2@BKL_Close|

; 335  :     }
; 336  : 
; 337  :     // Get device context
; 338  :     pDevice = pInstance->pDevice;

  00800	e59d3008	 ldr         r3, [sp, #8]
  00804	e2833004	 add         r3, r3, #4
  00808	e5933000	 ldr         r3, [r3]
  0080c	e58d3000	 str         r3, [sp]

; 339  : 
; 340  :     // sanity check number of instances
; 341  :     ASSERT(pDevice->instances > 0);

  00810	e59d3000	 ldr         r3, [sp]
  00814	e2833004	 add         r3, r3, #4
  00818	e5933000	 ldr         r3, [r3]
  0081c	e3530000	 cmp         r3, #0
  00820	da000002	 ble         |$LN9@BKL_Close|
  00824	e3a03001	 mov         r3, #1
  00828	e58d3018	 str         r3, [sp, #0x18]
  0082c	ea000008	 b           |$LN10@BKL_Close|
  00830		 |$LN9@BKL_Close|
  00830	e3a03c01	 mov         r3, #1, 24
  00834	e3833055	 orr         r3, r3, #0x55
  00838	e59f2088	 ldr         r2, [pc, #0x88]
  0083c	e59f1080	 ldr         r1, [pc, #0x80]
  00840	e59f0078	 ldr         r0, [pc, #0x78]
  00844	eb000000	 bl          NKDbgPrintfW
  00848	e6000010	 __debugbreak_ce
  0084c	e3a03000	 mov         r3, #0
  00850	e58d3018	 str         r3, [sp, #0x18]
  00854		 |$LN10@BKL_Close|

; 342  : 
; 343  :     // Decrement number of open instances
; 344  :     InterlockedDecrement(&pDevice->instances);

  00854	e59d3000	 ldr         r3, [sp]
  00858	e2830004	 add         r0, r3, #4
  0085c	eb000000	 bl          InterlockedDecrement

; 345  : 
; 346  :     // Free instance structure
; 347  :     LocalFree(pInstance);

  00860	e59d0008	 ldr         r0, [sp, #8]
  00864	eb000000	 bl          LocalFree

; 348  : 
; 349  :     // Done...
; 350  :     rc = TRUE;

  00868	e3a03001	 mov         r3, #1
  0086c	e58d3004	 str         r3, [sp, #4]
  00870		 |$cleanUp$42903|

; 351  : 
; 352  : cleanUp:
; 353  :     DEBUGMSG(ZONE_FUNCTION, (L"-BKL_Close(rc = %d)\r\n", rc));

  00870	e59f3044	 ldr         r3, [pc, #0x44]
  00874	e5933440	 ldr         r3, [r3, #0x440]
  00878	e3130004	 tst         r3, #4
  0087c	0a000005	 beq         |$LN11@BKL_Close|
  00880	e59d1004	 ldr         r1, [sp, #4]
  00884	e59f002c	 ldr         r0, [pc, #0x2C]
  00888	eb000000	 bl          NKDbgPrintfW
  0088c	e3a03001	 mov         r3, #1
  00890	e58d301c	 str         r3, [sp, #0x1C]
  00894	ea000001	 b           |$LN12@BKL_Close|
  00898		 |$LN11@BKL_Close|
  00898	e3a03000	 mov         r3, #0
  0089c	e58d301c	 str         r3, [sp, #0x1C]
  008a0		 |$LN12@BKL_Close|

; 354  :     return rc;

  008a0	e59d3004	 ldr         r3, [sp, #4]
  008a4	e58d300c	 str         r3, [sp, #0xC]

; 355  : }

  008a8	e59d000c	 ldr         r0, [sp, #0xC]
  008ac	e28dd020	 add         sp, sp, #0x20
  008b0	e89d6000	 ldmia       sp, {sp, lr}
  008b4	e12fff1e	 bx          lr
  008b8		 |$LN16@BKL_Close|
  008b8		 |$LN17@BKL_Close|
  008b8	00000000	 DCD         |??_C@_1CM@ICAPIOHD@?$AA?9?$AAB?$AAK?$AAL?$AA_?$AAC?$AAl?$AAo?$AAs?$AAe?$AA?$CI?$AAr?$AAc?$AA?5?$AA?$DN?$AA?5?$AA?$CF?$AAd?$AA?$CJ?$AA?$AN?$AA?6?$AA?$AA@|
  008bc		 |$LN18@BKL_Close|
  008bc	00000000	 DCD         |dpCurSettings|
  008c0		 |$LN19@BKL_Close|
  008c0	00000000	 DCD         |??_C@_1FK@FNONLNGN@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAD?$AAE?$AAB?$AAU?$AAG?$AAC?$AAH?$AAK?$AA?5?$AAf?$AAa?$AAi?$AAl?$AAe?$AAd?$AA?5?$AAi?$AAn?$AA?5?$AAf?$AAi?$AAl?$AAe?$AA?5?$AA?$CF?$AAs?$AA?5?$AAa@|
  008c4		 |$LN20@BKL_Close|
  008c4	00000000	 DCD         |??_C@_1BA@LEPJIIOK@?$AAU?$AAn?$AAk?$AAn?$AAo?$AAw?$AAn?$AA?$AA@|
  008c8		 |$LN21@BKL_Close|
  008c8	00000000	 DCD         |??_C@_1JG@GDDKIEBE@?$AAC?$AA?3?$AA?2?$AAW?$AAI?$AAN?$AAC?$AAE?$AA6?$AA0?$AA0?$AA?2?$AAP?$AAL?$AAA?$AAT?$AAF?$AAO?$AAR?$AAM?$AA?2?$AAC?$AAO?$AAM?$AAM?$AAO?$AAN?$AA?2?$AAS?$AAR?$AAC?$AA?2@|
  008cc		 |$LN22@BKL_Close|
  008cc	00000000	 DCD         |??_C@_1FK@JPPGHMCG@?$AAE?$AAR?$AAR?$AAO?$AAR?$AA?3?$AA?5?$AAB?$AAK?$AAL?$AA_?$AAR?$AAe?$AAa?$AAd?$AA?3?$AA?5?$AAI?$AAn?$AAc?$AAo?$AAr?$AAr?$AAe?$AAc?$AAt?$AA?5?$AAc?$AAo?$AAn?$AAt?$AAe@|
  008d0		 |$LN23@BKL_Close|
  008d0	626b6c49	 DCD         0x626b6c49
  008d4		 |$LN24@BKL_Close|
  008d4	00000000	 DCD         |??_C@_1CK@IJIDNLJG@?$AA?$CL?$AAB?$AAK?$AAL?$AA_?$AAC?$AAl?$AAo?$AAs?$AAe?$AA?$CI?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx?$AA?$CJ?$AA?$AN?$AA?6?$AA?$AA@|
  008d8		 |$M43199|

			 ENDP  ; |BKL_Close|

	EXPORT	|??_C@_1DE@HAFEFJDK@?$AA?9?$AAB?$AAK?$AAL?$AA_?$AAI?$AAO?$AAC?$AAo?$AAn?$AAt?$AAr?$AAo?$AAl?$AA?$CI?$AAr?$AAc?$AA?5?$AA?$DN?$AA?5?$AA?$CF?$AAd?$AA?$CJ?$AA?$AN?$AA?6?$AA?$AA@| [ DATA ] ; `string'
	EXPORT	|??_C@_1EA@NCFJLIMJ@?$AA?9?$AAB?$AAK?$AAL?$AA_?$AAI?$AAO?$AAC?$AAo?$AAn?$AAt?$AAr?$AAo?$AAl?$AA?3?$AA?5?$AAB?$AAa?$AAc?$AAk?$AAl?$AAi?$AAg?$AAh?$AAt?$AA?5?$AAO?$AAF?$AAF?$AA?$AN?$AA?6?$AA?$AA@| [ DATA ] ; `string'
	EXPORT	|??_C@_1DO@DCCBDONP@?$AA?9?$AAB?$AAK?$AAL?$AA_?$AAI?$AAO?$AAC?$AAo?$AAn?$AAt?$AAr?$AAo?$AAl?$AA?3?$AA?5?$AAB?$AAa?$AAc?$AAk?$AAl?$AAi?$AAg?$AAh?$AAt?$AA?5?$AAO?$AAN?$AA?$AN?$AA?6?$AA?$AA@| [ DATA ] ; `string'
	EXPORT	|??_C@_1GG@HCPHEIJG@?$AAE?$AAR?$AAR?$AAO?$AAR?$AA?3?$AA?5?$AAB?$AAK?$AAL?$AA_?$AAI?$AAO?$AAC?$AAo?$AAn?$AAt?$AAr?$AAo?$AAl?$AA?3?$AA?5?$AAI?$AAn?$AAv?$AAa?$AAl?$AAi?$AAd?$AA?5?$AAp?$AAo@| [ DATA ] ; `string'
	EXPORT	|??_C@_1EA@CHCKJLFF@?$AAB?$AAa?$AAc?$AAk?$AAl?$AAi?$AAg?$AAh?$AAt?$AA?3?$AA?5?$AAI?$AAO?$AAC?$AAT?$AAL?$AA_?$AAP?$AAO?$AAW?$AAE?$AAR?$AA_?$AAS?$AAE?$AAT?$AA?5?$AA?$CF?$AAd?$AA?$AN?$AA?6?$AA?$AA@| [ DATA ] ; `string'
	EXPORT	|??_C@_1GE@PCNLOPCB@?$AAE?$AAR?$AAR?$AAO?$AAR?$AA?3?$AA?5?$AAB?$AAK?$AAL?$AA_?$AAI?$AAO?$AAC?$AAo?$AAn?$AAt?$AAr?$AAo?$AAl?$AA?3?$AA?5?$AAI?$AAn?$AAc?$AAo?$AAr?$AAr?$AAe?$AAc?$AAt?$AA?5@| [ DATA ] ; `string'
	EXPORT	|??_C@_1IC@GOOOJCFO@?$AA?$CL?$AAB?$AAK?$AAL?$AA_?$AAI?$AAO?$AAC?$AAo?$AAn?$AAt?$AAr?$AAo?$AAl?$AA?$CI?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx?$AA?0?$AA?5?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx?$AA?0?$AA?5?$AA0@| [ DATA ] ; `string'
	EXPORT	|BKL_IOControl|
	IMPORT	|CeSafeCopyMemory|
	IMPORT	|SetLastError|

  00028			 AREA	 |.pdata|, PDATA
|$T43249| DCD	|$LN59@BKL_IOCont|
	DCD	0x40012204

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1DE@HAFEFJDK@?$AA?9?$AAB?$AAK?$AAL?$AA_?$AAI?$AAO?$AAC?$AAo?$AAn?$AAt?$AAr?$AAo?$AAl?$AA?$CI?$AAr?$AAc?$AA?5?$AA?$DN?$AA?5?$AA?$CF?$AAd?$AA?$CJ?$AA?$AN?$AA?6?$AA?$AA@| DCB "-"
	DCB	0x0, "B", 0x0, "K", 0x0, "L", 0x0, "_", 0x0, "I", 0x0, "O"
	DCB	0x0, "C", 0x0, "o", 0x0, "n", 0x0, "t", 0x0, "r", 0x0, "o"
	DCB	0x0, "l", 0x0, "(", 0x0, "r", 0x0, "c", 0x0, " ", 0x0, "="
	DCB	0x0, " ", 0x0, "%", 0x0, "d", 0x0, ")", 0x0, 0xd, 0x0, 0xa
	DCB	0x0, 0x0, 0x0				; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1EA@NCFJLIMJ@?$AA?9?$AAB?$AAK?$AAL?$AA_?$AAI?$AAO?$AAC?$AAo?$AAn?$AAt?$AAr?$AAo?$AAl?$AA?3?$AA?5?$AAB?$AAa?$AAc?$AAk?$AAl?$AAi?$AAg?$AAh?$AAt?$AA?5?$AAO?$AAF?$AAF?$AA?$AN?$AA?6?$AA?$AA@| DCB "-"
	DCB	0x0, "B", 0x0, "K", 0x0, "L", 0x0, "_", 0x0, "I", 0x0, "O"
	DCB	0x0, "C", 0x0, "o", 0x0, "n", 0x0, "t", 0x0, "r", 0x0, "o"
	DCB	0x0, "l", 0x0, ":", 0x0, " ", 0x0, "B", 0x0, "a", 0x0, "c"
	DCB	0x0, "k", 0x0, "l", 0x0, "i", 0x0, "g", 0x0, "h", 0x0, "t"
	DCB	0x0, " ", 0x0, "O", 0x0, "F", 0x0, "F", 0x0, 0xd, 0x0, 0xa
	DCB	0x0, 0x0, 0x0				; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1DO@DCCBDONP@?$AA?9?$AAB?$AAK?$AAL?$AA_?$AAI?$AAO?$AAC?$AAo?$AAn?$AAt?$AAr?$AAo?$AAl?$AA?3?$AA?5?$AAB?$AAa?$AAc?$AAk?$AAl?$AAi?$AAg?$AAh?$AAt?$AA?5?$AAO?$AAN?$AA?$AN?$AA?6?$AA?$AA@| DCB "-"
	DCB	0x0, "B", 0x0, "K", 0x0, "L", 0x0, "_", 0x0, "I", 0x0, "O"
	DCB	0x0, "C", 0x0, "o", 0x0, "n", 0x0, "t", 0x0, "r", 0x0, "o"
	DCB	0x0, "l", 0x0, ":", 0x0, " ", 0x0, "B", 0x0, "a", 0x0, "c"
	DCB	0x0, "k", 0x0, "l", 0x0, "i", 0x0, "g", 0x0, "h", 0x0, "t"
	DCB	0x0, " ", 0x0, "O", 0x0, "N", 0x0, 0xd, 0x0, 0xa, 0x0, 0x0
	DCB	0x0					; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1GG@HCPHEIJG@?$AAE?$AAR?$AAR?$AAO?$AAR?$AA?3?$AA?5?$AAB?$AAK?$AAL?$AA_?$AAI?$AAO?$AAC?$AAo?$AAn?$AAt?$AAr?$AAo?$AAl?$AA?3?$AA?5?$AAI?$AAn?$AAv?$AAa?$AAl?$AAi?$AAd?$AA?5?$AAp?$AAo@| DCB "E"
	DCB	0x0, "R", 0x0, "R", 0x0, "O", 0x0, "R", 0x0, ":", 0x0, " "
	DCB	0x0, "B", 0x0, "K", 0x0, "L", 0x0, "_", 0x0, "I", 0x0, "O"
	DCB	0x0, "C", 0x0, "o", 0x0, "n", 0x0, "t", 0x0, "r", 0x0, "o"
	DCB	0x0, "l", 0x0, ":", 0x0, " ", 0x0, "I", 0x0, "n", 0x0, "v"
	DCB	0x0, "a", 0x0, "l", 0x0, "i", 0x0, "d", 0x0, " ", 0x0, "p"
	DCB	0x0, "o", 0x0, "w", 0x0, "e", 0x0, "r", 0x0, " ", 0x0, "s"
	DCB	0x0, "t", 0x0, "a", 0x0, "t", 0x0, "e", 0x0, " ", 0x0, "0"
	DCB	0x0, "x", 0x0, "%", 0x0, "0", 0x0, "8", 0x0, "x", 0x0, 0xd
	DCB	0x0, 0xa, 0x0, 0x0, 0x0			; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1EA@CHCKJLFF@?$AAB?$AAa?$AAc?$AAk?$AAl?$AAi?$AAg?$AAh?$AAt?$AA?3?$AA?5?$AAI?$AAO?$AAC?$AAT?$AAL?$AA_?$AAP?$AAO?$AAW?$AAE?$AAR?$AA_?$AAS?$AAE?$AAT?$AA?5?$AA?$CF?$AAd?$AA?$AN?$AA?6?$AA?$AA@| DCB "B"
	DCB	0x0, "a", 0x0, "c", 0x0, "k", 0x0, "l", 0x0, "i", 0x0, "g"
	DCB	0x0, "h", 0x0, "t", 0x0, ":", 0x0, " ", 0x0, "I", 0x0, "O"
	DCB	0x0, "C", 0x0, "T", 0x0, "L", 0x0, "_", 0x0, "P", 0x0, "O"
	DCB	0x0, "W", 0x0, "E", 0x0, "R", 0x0, "_", 0x0, "S", 0x0, "E"
	DCB	0x0, "T", 0x0, " ", 0x0, "%", 0x0, "d", 0x0, 0xd, 0x0, 0xa
	DCB	0x0, 0x0, 0x0				; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1GE@PCNLOPCB@?$AAE?$AAR?$AAR?$AAO?$AAR?$AA?3?$AA?5?$AAB?$AAK?$AAL?$AA_?$AAI?$AAO?$AAC?$AAo?$AAn?$AAt?$AAr?$AAo?$AAl?$AA?3?$AA?5?$AAI?$AAn?$AAc?$AAo?$AAr?$AAr?$AAe?$AAc?$AAt?$AA?5@| DCB "E"
	DCB	0x0, "R", 0x0, "R", 0x0, "O", 0x0, "R", 0x0, ":", 0x0, " "
	DCB	0x0, "B", 0x0, "K", 0x0, "L", 0x0, "_", 0x0, "I", 0x0, "O"
	DCB	0x0, "C", 0x0, "o", 0x0, "n", 0x0, "t", 0x0, "r", 0x0, "o"
	DCB	0x0, "l", 0x0, ":", 0x0, " ", 0x0, "I", 0x0, "n", 0x0, "c"
	DCB	0x0, "o", 0x0, "r", 0x0, "r", 0x0, "e", 0x0, "c", 0x0, "t"
	DCB	0x0, " ", 0x0, "c", 0x0, "o", 0x0, "n", 0x0, "t", 0x0, "e"
	DCB	0x0, "x", 0x0, "t", 0x0, " ", 0x0, "p", 0x0, "a", 0x0, "r"
	DCB	0x0, "a", 0x0, "m", 0x0, "e", 0x0, "r", 0x0, 0xd, 0x0, 0xa
	DCB	0x0, 0x0, 0x0				; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1IC@GOOOJCFO@?$AA?$CL?$AAB?$AAK?$AAL?$AA_?$AAI?$AAO?$AAC?$AAo?$AAn?$AAt?$AAr?$AAo?$AAl?$AA?$CI?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx?$AA?0?$AA?5?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx?$AA?0?$AA?5?$AA0@| DCB "+"
	DCB	0x0, "B", 0x0, "K", 0x0, "L", 0x0, "_", 0x0, "I", 0x0, "O"
	DCB	0x0, "C", 0x0, "o", 0x0, "n", 0x0, "t", 0x0, "r", 0x0, "o"
	DCB	0x0, "l", 0x0, "(", 0x0, "0", 0x0, "x", 0x0, "%", 0x0, "0"
	DCB	0x0, "8", 0x0, "x", 0x0, ",", 0x0, " ", 0x0, "0", 0x0, "x"
	DCB	0x0, "%", 0x0, "0", 0x0, "8", 0x0, "x", 0x0, ",", 0x0, " "
	DCB	0x0, "0", 0x0, "x", 0x0, "%", 0x0, "0", 0x0, "8", 0x0, "x"
	DCB	0x0, ",", 0x0, " ", 0x0, "%", 0x0, "d", 0x0, ",", 0x0, " "
	DCB	0x0, "0", 0x0, "x", 0x0, "%", 0x0, "0", 0x0, "8", 0x0, "x"
	DCB	0x0, ",", 0x0, " ", 0x0, "%", 0x0, "d", 0x0, ",", 0x0, " "
	DCB	0x0, "0", 0x0, "x", 0x0, "%", 0x0, "0", 0x0, "8", 0x0, "x"
	DCB	0x0, ")", 0x0, 0xd, 0x0, 0xa, 0x0, 0x0, 0x0 ; `string'
; Function compile flags: /Odtp

  008d8			 AREA	 |.text|, CODE, ARM

  008d8		 |BKL_IOControl| PROC

; 366  : ) {

  008d8		 |$LN59@BKL_IOCont|
  008d8	e1a0c00d	 mov         r12, sp
  008dc	e92d000f	 stmdb       sp!, {r0 - r3}
  008e0	e92d5000	 stmdb       sp!, {r12, lr}
  008e4	e24dd098	 sub         sp, sp, #0x98
  008e8		 |$M43246|

; 367  :     BOOL rc = FALSE;

  008e8	e3a03000	 mov         r3, #0
  008ec	e58d3018	 str         r3, [sp, #0x18]

; 368  :     BKL_INSTANCE *pInstance = (BKL_INSTANCE*)context;

  008f0	e59d30a0	 ldr         r3, [sp, #0xA0]
  008f4	e58d301c	 str         r3, [sp, #0x1C]

; 369  :     BKL_DEVICE *pDevice;
; 370  :     POWER_CAPABILITIES powerCap;
; 371  :     CEDEVICE_POWER_STATE powerState;
; 372  : 
; 373  : 
; 374  :     DEBUGMSG(ZONE_FUNCTION, (L"+BKL_IOControl(0x%08x, 0x%08x, 0x%08x, %d, 0x%08x, %d, 0x%08x)\r\n",
; 375  :         context, code, pInBuffer, inSize, pOutBuffer, outSize, pOutSize
; 376  :     ));

  008f8	e59f3440	 ldr         r3, [pc, #0x440]
  008fc	e5933440	 ldr         r3, [r3, #0x440]
  00900	e3130004	 tst         r3, #4
  00904	0a00000f	 beq         |$LN28@BKL_IOCont|
  00908	e59d30b8	 ldr         r3, [sp, #0xB8]
  0090c	e58d300c	 str         r3, [sp, #0xC]
  00910	e59d30b4	 ldr         r3, [sp, #0xB4]
  00914	e58d3008	 str         r3, [sp, #8]
  00918	e59d30b0	 ldr         r3, [sp, #0xB0]
  0091c	e58d3004	 str         r3, [sp, #4]
  00920	e59d30ac	 ldr         r3, [sp, #0xAC]
  00924	e58d3000	 str         r3, [sp]
  00928	e59d30a8	 ldr         r3, [sp, #0xA8]
  0092c	e59d20a4	 ldr         r2, [sp, #0xA4]
  00930	e59d10a0	 ldr         r1, [sp, #0xA0]
  00934	e59f0420	 ldr         r0, [pc, #0x420]
  00938	eb000000	 bl          NKDbgPrintfW
  0093c	e3a03001	 mov         r3, #1
  00940	e58d3064	 str         r3, [sp, #0x64]
  00944	ea000001	 b           |$LN29@BKL_IOCont|
  00948		 |$LN28@BKL_IOCont|
  00948	e3a03000	 mov         r3, #0
  0094c	e58d3064	 str         r3, [sp, #0x64]
  00950		 |$LN29@BKL_IOCont|

; 377  : 
; 378  :     // Check if we get correct context
; 379  :     if (pInstance == NULL || pInstance->cookie != BKL_INSTANCE_COOKIE) {

  00950	e59d301c	 ldr         r3, [sp, #0x1C]
  00954	e3530000	 cmp         r3, #0
  00958	0a000004	 beq         |$LN24@BKL_IOCont|
  0095c	e59d301c	 ldr         r3, [sp, #0x1C]
  00960	e5932000	 ldr         r2, [r3]
  00964	e59f33ec	 ldr         r3, [pc, #0x3EC]
  00968	e1520003	 cmp         r2, r3
  0096c	0a00000b	 beq         |$LN25@BKL_IOCont|
  00970		 |$LN24@BKL_IOCont|

; 380  :         DEBUGMSG(ZONE_ERROR, (L"ERROR: BKL_IOControl: "
; 381  :             L"Incorrect context paramer\r\n"
; 382  :         ));

  00970	e59f33c8	 ldr         r3, [pc, #0x3C8]
  00974	e5933440	 ldr         r3, [r3, #0x440]
  00978	e3130001	 tst         r3, #1
  0097c	0a000004	 beq         |$LN30@BKL_IOCont|
  00980	e59f03cc	 ldr         r0, [pc, #0x3CC]
  00984	eb000000	 bl          NKDbgPrintfW
  00988	e3a03001	 mov         r3, #1
  0098c	e58d3068	 str         r3, [sp, #0x68]
  00990	ea000001	 b           |$LN31@BKL_IOCont|
  00994		 |$LN30@BKL_IOCont|
  00994	e3a03000	 mov         r3, #0
  00998	e58d3068	 str         r3, [sp, #0x68]
  0099c		 |$LN31@BKL_IOCont|

; 383  :         goto cleanUp;

  0099c	ea0000d4	 b           |$cleanUp$42937|
  009a0		 |$LN25@BKL_IOCont|

; 384  :     }
; 385  : 
; 386  :     // Device structure
; 387  :     pDevice = pInstance->pDevice;

  009a0	e59d301c	 ldr         r3, [sp, #0x1C]
  009a4	e2833004	 add         r3, r3, #4
  009a8	e5933000	 ldr         r3, [r3]
  009ac	e58d3010	 str         r3, [sp, #0x10]

; 388  : 
; 389  :     switch (code) {

  009b0	e59d30a4	 ldr         r3, [sp, #0xA4]
  009b4	e58d306c	 str         r3, [sp, #0x6C]
  009b8	e59d206c	 ldr         r2, [sp, #0x6C]
  009bc	e3a03832	 mov         r3, #0x32, 16
  009c0	e3833a01	 orr         r3, r3, #1, 20
  009c4	e0423003	 sub         r3, r2, r3
  009c8	e58d306c	 str         r3, [sp, #0x6C]
  009cc	e59d306c	 ldr         r3, [sp, #0x6C]
  009d0	e353000c	 cmp         r3, #0xC
  009d4	8a0000c6	 bhi         |$LN22@BKL_IOCont|
  009d8	e59d206c	 ldr         r2, [sp, #0x6C]
  009dc	e1a03102	 mov         r3, r2, lsl #2
  009e0	e083300f	 add         r3, r3, pc
  009e4	e5933004	 ldr         r3, [r3, #4]
  009e8	e08ff003	 add         pc, pc, r3
  009ec		 |$LN43@BKL_IOCont|
  009ec		 |$LN42@BKL_IOCont|
  009ec		 |$LN44@BKL_IOCont|
  009ec	00000030	 DCD         0x30
  009f0		 |$LN45@BKL_IOCont|
  009f0	00000304	 DCD         0x304
  009f4		 |$LN46@BKL_IOCont|
  009f4	00000304	 DCD         0x304
  009f8		 |$LN47@BKL_IOCont|
  009f8	00000304	 DCD         0x304
  009fc		 |$LN48@BKL_IOCont|
  009fc	0000029c	 DCD         0x29c
  00a00		 |$LN49@BKL_IOCont|
  00a00	00000304	 DCD         0x304
  00a04		 |$LN50@BKL_IOCont|
  00a04	00000304	 DCD         0x304
  00a08		 |$LN51@BKL_IOCont|
  00a08	00000304	 DCD         0x304
  00a0c		 |$LN52@BKL_IOCont|
  00a0c	000000bc	 DCD         0xbc
  00a10		 |$LN53@BKL_IOCont|
  00a10	00000304	 DCD         0x304
  00a14		 |$LN54@BKL_IOCont|
  00a14	00000304	 DCD         0x304
  00a18		 |$LN55@BKL_IOCont|
  00a18	00000304	 DCD         0x304
  00a1c		 |$LN56@BKL_IOCont|
  00a1c	00000290	 DCD         0x290
  00a20		 |$LN21@BKL_IOCont|

; 390  :     // Return device specific power capabilities.
; 391  :     case IOCTL_POWER_CAPABILITIES:
; 392  :         // Check input parameters
; 393  :         if (pOutSize != NULL) *pOutSize = sizeof(POWER_CAPABILITIES);

  00a20	e59d30b8	 ldr         r3, [sp, #0xB8]
  00a24	e3530000	 cmp         r3, #0
  00a28	0a000002	 beq         |$LN20@BKL_IOCont|
  00a2c	e59d20b8	 ldr         r2, [sp, #0xB8]
  00a30	e3a03030	 mov         r3, #0x30
  00a34	e5823000	 str         r3, [r2]
  00a38		 |$LN20@BKL_IOCont|

; 394  :         if (pOutBuffer == NULL || outSize < sizeof(POWER_CAPABILITIES)) {

  00a38	e59d30b0	 ldr         r3, [sp, #0xB0]
  00a3c	e3530000	 cmp         r3, #0
  00a40	0a000002	 beq         |$LN18@BKL_IOCont|
  00a44	e59d30b4	 ldr         r3, [sp, #0xB4]
  00a48	e3530030	 cmp         r3, #0x30
  00a4c	2a000002	 bcs         |$LN19@BKL_IOCont|
  00a50		 |$LN18@BKL_IOCont|

; 395  :             SetLastError(ERROR_INVALID_PARAMETER);

  00a50	e3a00057	 mov         r0, #0x57
  00a54	eb000000	 bl          SetLastError

; 396  :             break;

  00a58	ea0000a5	 b           |$LN22@BKL_IOCont|
  00a5c		 |$LN19@BKL_IOCont|

; 397  :         }
; 398  :         memset(&powerCap, 0, sizeof(powerCap));

  00a5c	e3a02030	 mov         r2, #0x30
  00a60	e3a01000	 mov         r1, #0
  00a64	e28d0020	 add         r0, sp, #0x20
  00a68	eb000000	 bl          memset

; 399  :         powerCap.DeviceDx = DX_MASK(D0) | DX_MASK(D4);

  00a6c	e3a03011	 mov         r3, #0x11
  00a70	e5cd3020	 strb        r3, [sp, #0x20]

; 400  :         if (!CeSafeCopyMemory(pOutBuffer, &powerCap, sizeof(powerCap))) {

  00a74	e3a02030	 mov         r2, #0x30
  00a78	e28d1020	 add         r1, sp, #0x20
  00a7c	e59d00b0	 ldr         r0, [sp, #0xB0]
  00a80	eb000000	 bl          CeSafeCopyMemory
  00a84	e58d0070	 str         r0, [sp, #0x70]
  00a88	e59d3070	 ldr         r3, [sp, #0x70]
  00a8c	e3530000	 cmp         r3, #0
  00a90	1a000002	 bne         |$LN17@BKL_IOCont|

; 401  :             SetLastError(ERROR_INVALID_PARAMETER);

  00a94	e3a00057	 mov         r0, #0x57
  00a98	eb000000	 bl          SetLastError

; 402  :             break;

  00a9c	ea000094	 b           |$LN22@BKL_IOCont|
  00aa0		 |$LN17@BKL_IOCont|

; 403  :         }
; 404  :         rc = TRUE;

  00aa0	e3a03001	 mov         r3, #1
  00aa4	e58d3018	 str         r3, [sp, #0x18]

; 405  :         break;

  00aa8	ea000091	 b           |$LN22@BKL_IOCont|
  00aac		 |$LN16@BKL_IOCont|

; 406  : 
; 407  :     // Request a change from one device power state to another.
; 408  :     case IOCTL_POWER_SET:
; 409  :         DEBUGMSG(ZONE_POWER, (L"Backlight: IOCTL_POWER_SET %d\r\n", *(CEDEVICE_POWER_STATE*)pOutBuffer ));

  00aac	e59f328c	 ldr         r3, [pc, #0x28C]
  00ab0	e5933440	 ldr         r3, [r3, #0x440]
  00ab4	e3130080	 tst         r3, #0x80
  00ab8	0a000006	 beq         |$LN32@BKL_IOCont|
  00abc	e59d30b0	 ldr         r3, [sp, #0xB0]
  00ac0	e5931000	 ldr         r1, [r3]
  00ac4	e59f0284	 ldr         r0, [pc, #0x284]
  00ac8	eb000000	 bl          NKDbgPrintfW
  00acc	e3a03001	 mov         r3, #1
  00ad0	e58d3074	 str         r3, [sp, #0x74]
  00ad4	ea000001	 b           |$LN33@BKL_IOCont|
  00ad8		 |$LN32@BKL_IOCont|
  00ad8	e3a03000	 mov         r3, #0
  00adc	e58d3074	 str         r3, [sp, #0x74]
  00ae0		 |$LN33@BKL_IOCont|

; 410  :         // Check input parameters
; 411  :         if (pOutSize != NULL)

  00ae0	e59d30b8	 ldr         r3, [sp, #0xB8]
  00ae4	e3530000	 cmp         r3, #0
  00ae8	0a000002	 beq         |$LN15@BKL_IOCont|

; 412  :         {
; 413  :             *pOutSize = sizeof(CEDEVICE_POWER_STATE);

  00aec	e59d20b8	 ldr         r2, [sp, #0xB8]
  00af0	e3a03004	 mov         r3, #4
  00af4	e5823000	 str         r3, [r2]
  00af8		 |$LN15@BKL_IOCont|

; 414  :         }
; 415  :         if (pOutBuffer == NULL || outSize < sizeof(CEDEVICE_POWER_STATE) ||
; 416  :             !CeSafeCopyMemory(&powerState, pOutBuffer, sizeof(powerState)) )

  00af8	e59d30b0	 ldr         r3, [sp, #0xB0]
  00afc	e3530000	 cmp         r3, #0
  00b00	0a00000a	 beq         |$LN13@BKL_IOCont|
  00b04	e59d30b4	 ldr         r3, [sp, #0xB4]
  00b08	e3530004	 cmp         r3, #4
  00b0c	3a000007	 bcc         |$LN13@BKL_IOCont|
  00b10	e3a02004	 mov         r2, #4
  00b14	e59d10b0	 ldr         r1, [sp, #0xB0]
  00b18	e28d0014	 add         r0, sp, #0x14
  00b1c	eb000000	 bl          CeSafeCopyMemory
  00b20	e58d0078	 str         r0, [sp, #0x78]
  00b24	e59d3078	 ldr         r3, [sp, #0x78]
  00b28	e3530000	 cmp         r3, #0
  00b2c	1a000002	 bne         |$LN14@BKL_IOCont|
  00b30		 |$LN13@BKL_IOCont|

; 417  :         {
; 418  :             SetLastError(ERROR_INVALID_PARAMETER);

  00b30	e3a00057	 mov         r0, #0x57
  00b34	eb000000	 bl          SetLastError

; 419  :             break;

  00b38	ea00006d	 b           |$LN22@BKL_IOCont|
  00b3c		 |$LN14@BKL_IOCont|

; 420  :         }
; 421  :         // Check for any valid power state.
; 422  :         if (!VALID_DX(powerState))

  00b3c	e59d3014	 ldr         r3, [sp, #0x14]
  00b40	e3730001	 cmn         r3, #1
  00b44	da000002	 ble         |$LN11@BKL_IOCont|
  00b48	e59d3014	 ldr         r3, [sp, #0x14]
  00b4c	e3530005	 cmp         r3, #5
  00b50	ba00000c	 blt         |$LN12@BKL_IOCont|
  00b54		 |$LN11@BKL_IOCont|

; 423  :         {
; 424  :             DEBUGMSG(ZONE_ERROR, (L"ERROR: BKL_IOControl: "
; 425  :                 L"Invalid power state 0x%08x\r\n", powerState));

  00b54	e59f31e4	 ldr         r3, [pc, #0x1E4]
  00b58	e5933440	 ldr         r3, [r3, #0x440]
  00b5c	e3130001	 tst         r3, #1
  00b60	0a000005	 beq         |$LN34@BKL_IOCont|
  00b64	e59d1014	 ldr         r1, [sp, #0x14]
  00b68	e59f01dc	 ldr         r0, [pc, #0x1DC]
  00b6c	eb000000	 bl          NKDbgPrintfW
  00b70	e3a03001	 mov         r3, #1
  00b74	e58d307c	 str         r3, [sp, #0x7C]
  00b78	ea000001	 b           |$LN35@BKL_IOCont|
  00b7c		 |$LN34@BKL_IOCont|
  00b7c	e3a03000	 mov         r3, #0
  00b80	e58d307c	 str         r3, [sp, #0x7C]
  00b84		 |$LN35@BKL_IOCont|

; 426  :             break;

  00b84	ea00005a	 b           |$LN22@BKL_IOCont|
  00b88		 |$LN12@BKL_IOCont|

; 427  :         }
; 428  :         switch (powerState)

  00b88	e59d3014	 ldr         r3, [sp, #0x14]
  00b8c	e58d3080	 str         r3, [sp, #0x80]
  00b90	e59d3080	 ldr         r3, [sp, #0x80]
  00b94	e3530000	 cmp         r3, #0
  00b98	0a000006	 beq         |$LN8@BKL_IOCont|
  00b9c	e59d3080	 ldr         r3, [sp, #0x80]
  00ba0	e3530000	 cmp         r3, #0
  00ba4	da000026	 ble         |$LN9@BKL_IOCont|
  00ba8	e59d3080	 ldr         r3, [sp, #0x80]
  00bac	e3530004	 cmp         r3, #4
  00bb0	da000012	 ble         |$LN7@BKL_IOCont|
  00bb4	ea000022	 b           |$LN9@BKL_IOCont|
  00bb8		 |$LN8@BKL_IOCont|

; 429  :         {
; 430  :         case D0:
; 431  :             DEBUGMSG(ZONE_POWER, (L"-BKL_IOControl: Backlight ON\r\n"));

  00bb8	e59f3180	 ldr         r3, [pc, #0x180]
  00bbc	e5933440	 ldr         r3, [r3, #0x440]
  00bc0	e3130080	 tst         r3, #0x80
  00bc4	0a000004	 beq         |$LN36@BKL_IOCont|
  00bc8	e59f0178	 ldr         r0, [pc, #0x178]
  00bcc	eb000000	 bl          NKDbgPrintfW
  00bd0	e3a03001	 mov         r3, #1
  00bd4	e58d3084	 str         r3, [sp, #0x84]
  00bd8	ea000001	 b           |$LN37@BKL_IOCont|
  00bdc		 |$LN36@BKL_IOCont|
  00bdc	e3a03000	 mov         r3, #0
  00be0	e58d3084	 str         r3, [sp, #0x84]
  00be4		 |$LN37@BKL_IOCont|

; 432  :             // Switch LCD backlight on
; 433  :             BKL_SetState(TRUE);

  00be4	e3a00001	 mov         r0, #1
  00be8	eb000000	 bl          BKL_SetState

; 434  :             pDevice->ps = D0;

  00bec	e59d3010	 ldr         r3, [sp, #0x10]
  00bf0	e2832008	 add         r2, r3, #8
  00bf4	e3a03000	 mov         r3, #0
  00bf8	e5823000	 str         r3, [r2]

; 435  :             break;

  00bfc	ea000010	 b           |$LN9@BKL_IOCont|
  00c00		 |$LN7@BKL_IOCont|

; 436  :          case D1:
; 437  :          case D2:
; 438  :          case D3:
; 439  :          case D4:
; 440  :             DEBUGMSG(ZONE_POWER, (L"-BKL_IOControl: Backlight OFF\r\n"));

  00c00	e59f3138	 ldr         r3, [pc, #0x138]
  00c04	e5933440	 ldr         r3, [r3, #0x440]
  00c08	e3130080	 tst         r3, #0x80
  00c0c	0a000004	 beq         |$LN38@BKL_IOCont|
  00c10	e59f012c	 ldr         r0, [pc, #0x12C]
  00c14	eb000000	 bl          NKDbgPrintfW
  00c18	e3a03001	 mov         r3, #1
  00c1c	e58d3088	 str         r3, [sp, #0x88]
  00c20	ea000001	 b           |$LN39@BKL_IOCont|
  00c24		 |$LN38@BKL_IOCont|
  00c24	e3a03000	 mov         r3, #0
  00c28	e58d3088	 str         r3, [sp, #0x88]
  00c2c		 |$LN39@BKL_IOCont|

; 441  :             // Switch LCD backlight off
; 442  :             BKL_SetState(FALSE);

  00c2c	e3a00000	 mov         r0, #0
  00c30	eb000000	 bl          BKL_SetState

; 443  :             pDevice->ps = D4;

  00c34	e59d3010	 ldr         r3, [sp, #0x10]
  00c38	e2832008	 add         r2, r3, #8
  00c3c	e3a03004	 mov         r3, #4
  00c40	e5823000	 str         r3, [r2]
  00c44		 |$LN9@BKL_IOCont|

; 444  :             break;
; 445  :         }
; 446  :         if (!CeSafeCopyMemory(pOutBuffer, &pDevice->ps, sizeof(pDevice->ps))) {

  00c44	e3a02004	 mov         r2, #4
  00c48	e59d3010	 ldr         r3, [sp, #0x10]
  00c4c	e2831008	 add         r1, r3, #8
  00c50	e59d00b0	 ldr         r0, [sp, #0xB0]
  00c54	eb000000	 bl          CeSafeCopyMemory
  00c58	e58d008c	 str         r0, [sp, #0x8C]
  00c5c	e59d308c	 ldr         r3, [sp, #0x8C]
  00c60	e3530000	 cmp         r3, #0
  00c64	1a000002	 bne         |$LN6@BKL_IOCont|

; 447  :             SetLastError(ERROR_INVALID_PARAMETER);

  00c68	e3a00057	 mov         r0, #0x57
  00c6c	eb000000	 bl          SetLastError

; 448  :             break;

  00c70	ea00001f	 b           |$LN22@BKL_IOCont|
  00c74		 |$LN6@BKL_IOCont|

; 449  :         }
; 450  :         rc = TRUE;

  00c74	e3a03001	 mov         r3, #1
  00c78	e58d3018	 str         r3, [sp, #0x18]

; 451  :         break;

  00c7c	ea00001c	 b           |$LN22@BKL_IOCont|
  00c80		 |$LN5@BKL_IOCont|

; 452  : 
; 453  :     // This is to satisfy the CETK test cases
; 454  :     case IOCTL_POWER_QUERY:
; 455  :         rc = TRUE;

  00c80	e3a03001	 mov         r3, #1
  00c84	e58d3018	 str         r3, [sp, #0x18]

; 456  :         break;

  00c88	ea000019	 b           |$LN22@BKL_IOCont|
  00c8c		 |$LN4@BKL_IOCont|

; 457  : 
; 458  :     // Return the current device power state.
; 459  :     case IOCTL_POWER_GET:
; 460  :         // Check input parameters
; 461  :         if (pOutSize != NULL) *pOutSize = sizeof(CEDEVICE_POWER_STATE);

  00c8c	e59d30b8	 ldr         r3, [sp, #0xB8]
  00c90	e3530000	 cmp         r3, #0
  00c94	0a000002	 beq         |$LN3@BKL_IOCont|
  00c98	e59d20b8	 ldr         r2, [sp, #0xB8]
  00c9c	e3a03004	 mov         r3, #4
  00ca0	e5823000	 str         r3, [r2]
  00ca4		 |$LN3@BKL_IOCont|

; 462  :         if (
; 463  :             pOutBuffer == NULL || outSize < sizeof(CEDEVICE_POWER_STATE) ||
; 464  :             !CeSafeCopyMemory(pOutBuffer, &pDevice->ps, sizeof(pDevice->ps))
; 465  :         ) {

  00ca4	e59d30b0	 ldr         r3, [sp, #0xB0]
  00ca8	e3530000	 cmp         r3, #0
  00cac	0a00000b	 beq         |$LN1@BKL_IOCont|
  00cb0	e59d30b4	 ldr         r3, [sp, #0xB4]
  00cb4	e3530004	 cmp         r3, #4
  00cb8	3a000008	 bcc         |$LN1@BKL_IOCont|
  00cbc	e3a02004	 mov         r2, #4
  00cc0	e59d3010	 ldr         r3, [sp, #0x10]
  00cc4	e2831008	 add         r1, r3, #8
  00cc8	e59d00b0	 ldr         r0, [sp, #0xB0]
  00ccc	eb000000	 bl          CeSafeCopyMemory
  00cd0	e58d0090	 str         r0, [sp, #0x90]
  00cd4	e59d3090	 ldr         r3, [sp, #0x90]
  00cd8	e3530000	 cmp         r3, #0
  00cdc	1a000002	 bne         |$LN2@BKL_IOCont|
  00ce0		 |$LN1@BKL_IOCont|

; 466  :             SetLastError(ERROR_INVALID_PARAMETER);

  00ce0	e3a00057	 mov         r0, #0x57
  00ce4	eb000000	 bl          SetLastError

; 467  :             break;

  00ce8	ea000001	 b           |$LN22@BKL_IOCont|
  00cec		 |$LN2@BKL_IOCont|

; 468  :         }
; 469  :         rc = TRUE;

  00cec	e3a03001	 mov         r3, #1
  00cf0	e58d3018	 str         r3, [sp, #0x18]
  00cf4		 |$LN22@BKL_IOCont|
  00cf4		 |$cleanUp$42937|

; 470  :         break;
; 471  :     }
; 472  : 
; 473  : cleanUp:
; 474  :     DEBUGMSG(ZONE_FUNCTION, (L"-BKL_IOControl(rc = %d)\r\n", rc));

  00cf4	e59f3044	 ldr         r3, [pc, #0x44]
  00cf8	e5933440	 ldr         r3, [r3, #0x440]
  00cfc	e3130004	 tst         r3, #4
  00d00	0a000005	 beq         |$LN40@BKL_IOCont|
  00d04	e59d1018	 ldr         r1, [sp, #0x18]
  00d08	e59f002c	 ldr         r0, [pc, #0x2C]
  00d0c	eb000000	 bl          NKDbgPrintfW
  00d10	e3a03001	 mov         r3, #1
  00d14	e58d3094	 str         r3, [sp, #0x94]
  00d18	ea000001	 b           |$LN41@BKL_IOCont|
  00d1c		 |$LN40@BKL_IOCont|
  00d1c	e3a03000	 mov         r3, #0
  00d20	e58d3094	 str         r3, [sp, #0x94]
  00d24		 |$LN41@BKL_IOCont|

; 475  :     return rc;

  00d24	e59d3018	 ldr         r3, [sp, #0x18]
  00d28	e58d3060	 str         r3, [sp, #0x60]

; 476  : }

  00d2c	e59d0060	 ldr         r0, [sp, #0x60]
  00d30	e28dd098	 add         sp, sp, #0x98
  00d34	e89d6000	 ldmia       sp, {sp, lr}
  00d38	e12fff1e	 bx          lr
  00d3c		 |$LN60@BKL_IOCont|
  00d3c		 |$LN61@BKL_IOCont|
  00d3c	00000000	 DCD         |??_C@_1DE@HAFEFJDK@?$AA?9?$AAB?$AAK?$AAL?$AA_?$AAI?$AAO?$AAC?$AAo?$AAn?$AAt?$AAr?$AAo?$AAl?$AA?$CI?$AAr?$AAc?$AA?5?$AA?$DN?$AA?5?$AA?$CF?$AAd?$AA?$CJ?$AA?$AN?$AA?6?$AA?$AA@|
  00d40		 |$LN62@BKL_IOCont|
  00d40	00000000	 DCD         |dpCurSettings|
  00d44		 |$LN63@BKL_IOCont|
  00d44	00000000	 DCD         |??_C@_1EA@NCFJLIMJ@?$AA?9?$AAB?$AAK?$AAL?$AA_?$AAI?$AAO?$AAC?$AAo?$AAn?$AAt?$AAr?$AAo?$AAl?$AA?3?$AA?5?$AAB?$AAa?$AAc?$AAk?$AAl?$AAi?$AAg?$AAh?$AAt?$AA?5?$AAO?$AAF?$AAF?$AA?$AN?$AA?6?$AA?$AA@|
  00d48		 |$LN64@BKL_IOCont|
  00d48	00000000	 DCD         |??_C@_1DO@DCCBDONP@?$AA?9?$AAB?$AAK?$AAL?$AA_?$AAI?$AAO?$AAC?$AAo?$AAn?$AAt?$AAr?$AAo?$AAl?$AA?3?$AA?5?$AAB?$AAa?$AAc?$AAk?$AAl?$AAi?$AAg?$AAh?$AAt?$AA?5?$AAO?$AAN?$AA?$AN?$AA?6?$AA?$AA@|
  00d4c		 |$LN65@BKL_IOCont|
  00d4c	00000000	 DCD         |??_C@_1GG@HCPHEIJG@?$AAE?$AAR?$AAR?$AAO?$AAR?$AA?3?$AA?5?$AAB?$AAK?$AAL?$AA_?$AAI?$AAO?$AAC?$AAo?$AAn?$AAt?$AAr?$AAo?$AAl?$AA?3?$AA?5?$AAI?$AAn?$AAv?$AAa?$AAl?$AAi?$AAd?$AA?5?$AAp?$AAo@|
  00d50		 |$LN66@BKL_IOCont|
  00d50	00000000	 DCD         |??_C@_1EA@CHCKJLFF@?$AAB?$AAa?$AAc?$AAk?$AAl?$AAi?$AAg?$AAh?$AAt?$AA?3?$AA?5?$AAI?$AAO?$AAC?$AAT?$AAL?$AA_?$AAP?$AAO?$AAW?$AAE?$AAR?$AA_?$AAS?$AAE?$AAT?$AA?5?$AA?$CF?$AAd?$AA?$AN?$AA?6?$AA?$AA@|
  00d54		 |$LN67@BKL_IOCont|
  00d54	00000000	 DCD         |??_C@_1GE@PCNLOPCB@?$AAE?$AAR?$AAR?$AAO?$AAR?$AA?3?$AA?5?$AAB?$AAK?$AAL?$AA_?$AAI?$AAO?$AAC?$AAo?$AAn?$AAt?$AAr?$AAo?$AAl?$AA?3?$AA?5?$AAI?$AAn?$AAc?$AAo?$AAr?$AAr?$AAe?$AAc?$AAt?$AA?5@|
  00d58		 |$LN68@BKL_IOCont|
  00d58	626b6c49	 DCD         0x626b6c49
  00d5c		 |$LN69@BKL_IOCont|
  00d5c	00000000	 DCD         |??_C@_1IC@GOOOJCFO@?$AA?$CL?$AAB?$AAK?$AAL?$AA_?$AAI?$AAO?$AAC?$AAo?$AAn?$AAt?$AAr?$AAo?$AAl?$AA?$CI?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx?$AA?0?$AA?5?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx?$AA?0?$AA?5?$AA0@|
  00d60		 |$M43247|

			 ENDP  ; |BKL_IOControl|

	EXPORT	|DllMain|
	IMPORT	|DisableThreadLibraryCalls|
	IMPORT	|RegisterDbgZones|

  00030			 AREA	 |.pdata|, PDATA
|$T43265| DCD	|$LN8@DllMain|
	DCD	0x40001404
; Function compile flags: /Odtp

  00d60			 AREA	 |.text|, CODE, ARM

  00d60		 |DllMain| PROC

; 485  : {

  00d60		 |$LN8@DllMain|
  00d60	e1a0c00d	 mov         r12, sp
  00d64	e92d0007	 stmdb       sp!, {r0 - r2}
  00d68	e92d5000	 stmdb       sp!, {r12, lr}
  00d6c	e24dd004	 sub         sp, sp, #4
  00d70		 |$M43262|

; 486  :     switch (reason) {

  00d70	e59d3010	 ldr         r3, [sp, #0x10]
  00d74	e3530001	 cmp         r3, #1
  00d78	0a000000	 beq         |$LN1@DllMain|
  00d7c	ea000004	 b           |$LN2@DllMain|
  00d80		 |$LN1@DllMain|

; 487  :     case DLL_PROCESS_ATTACH:
; 488  :         DEBUGREGISTER(hDLL);

  00d80	e59f1024	 ldr         r1, [pc, #0x24]
  00d84	e59d000c	 ldr         r0, [sp, #0xC]
  00d88	eb000000	 bl          RegisterDbgZones

; 489  :         DisableThreadLibraryCalls((HMODULE)hDLL);

  00d8c	e59d000c	 ldr         r0, [sp, #0xC]
  00d90	eb000000	 bl          DisableThreadLibraryCalls
  00d94		 |$LN2@DllMain|

; 490  :         break;
; 491  :     }
; 492  :     return TRUE;

  00d94	e3a03001	 mov         r3, #1
  00d98	e58d3000	 str         r3, [sp]

; 493  : }

  00d9c	e59d0000	 ldr         r0, [sp]
  00da0	e28dd004	 add         sp, sp, #4
  00da4	e89d6000	 ldmia       sp, {sp, lr}
  00da8	e12fff1e	 bx          lr
  00dac		 |$LN9@DllMain|
  00dac		 |$LN10@DllMain|
  00dac	00000000	 DCD         |dpCurSettings|
  00db0		 |$M43263|

			 ENDP  ; |DllMain|

	END
