; Listing generated by Microsoft (R) Optimizing Compiler Version 14.01.60511.01 

	TTL	C:\WINCE600\PLATFORM\COMMON\SRC\SOC\OMAP2420_MS_V1\DMA\PRIVATE\dmadrv.cpp
	CODE32

  00000			 AREA	 |.drectve|, DRECTVE
	DCB	"-defaultlib:LIBCMT "
	DCB	"-defaultlib:OLDNAMES "


  00000			 AREA	 |.bss|, NOINIT
|gpSys|	%	0x4
	EXPORT	|?Lock@DMASystem@@QAAXXZ|		; DMASystem::Lock
	IMPORT	|EnterCriticalSection|
; File c:\wince600\platform\common\src\soc\omap2420_ms_v1\dma\private\dmasys.h

  00000			 AREA	 |.pdata|, PDATA
|$T32614| DCD	|$LN5@Lock|
	DCD	0x40000501
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |?Lock@DMASystem@@QAAXXZ| PROC		; DMASystem::Lock

; 53   :     void Lock(void) { EnterCriticalSection(&mSec); }

  00000		 |$LN5@Lock|
  00000	e52de004	 str         lr, [sp, #-4]!
  00004		 |$M32611|
  00004	e280000c	 add         r0, r0, #0xC
  00008	eb000000	 bl          EnterCriticalSection
  0000c	e49de004	 ldr         lr, [sp], #4
  00010	e12fff1e	 bx          lr
  00014		 |$M32612|

			 ENDP  ; |?Lock@DMASystem@@QAAXXZ|, DMASystem::Lock

	EXPORT	|?Unlock@DMASystem@@QAAXXZ|		; DMASystem::Unlock
	IMPORT	|LeaveCriticalSection|

  00000			 AREA	 |.pdata|, PDATA
|$T32622| DCD	|$LN5@Unlock|
	DCD	0x40000501
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |?Unlock@DMASystem@@QAAXXZ| PROC	; DMASystem::Unlock

; 54   :     void Unlock(void) { LeaveCriticalSection(&mSec); }

  00000		 |$LN5@Unlock|
  00000	e52de004	 str         lr, [sp, #-4]!
  00004		 |$M32619|
  00004	e280000c	 add         r0, r0, #0xC
  00008	eb000000	 bl          LeaveCriticalSection
  0000c	e49de004	 ldr         lr, [sp], #4
  00010	e12fff1e	 bx          lr
  00014		 |$M32620|

			 ENDP  ; |?Unlock@DMASystem@@QAAXXZ|, DMASystem::Unlock

	EXPORT	|DMA_Init|
	IMPORT	|SetLastError|
	IMPORT	|?Init@DMASystem@@QAAIXZ|		; DMASystem::Init
	IMPORT	|?Create@DMASystem@@SAPAV1@PBG@Z|	; DMASystem::Create
	IMPORT	|__C_specific_handler|

  00000			 AREA	 |.pdata|, PDATA
|$T32656| DCD	|$LN25@DMA_Init|
	DCD	0xc0002804

  00000			 AREA	 |.pdata|, PDATA
|$T32658| DCD	|$LN8@DMA_Init|
	DCD	0x40000401

  00000			 AREA	 |.xdata|, DATA
|$T32654| DCD	0x1
	DCD	|$LN12@DMA_Init|
	DCD	|$LN13@DMA_Init|
	DCD	|$LN8@DMA_Init|
	DCD	|$LN9@DMA_Init|
; Function compile flags: /Ogspy
; File c:\wince600\platform\common\src\soc\omap2420_ms_v1\dma\private\dmadrv.cpp

  00000			 AREA	 |.text|, CODE, ARM

  00000	00000000	 DCD         |__C_specific_handler|
  00004	00000000	 DCD         |$T32654|

  00008		 |DMA_Init| PROC

; 33   : {

  00008		 |$LN25@DMA_Init|
  00008	e1a0c00d	 mov         r12, sp
  0000c	e92d5830	 stmdb       sp!, {r4, r5, r11, r12, lr}
  00010	e28db014	 add         r11, sp, #0x14
  00014	e24dd008	 sub         sp, sp, #8
  00018		 |$LN23@DMA_Init|

; 34   :     if (gpSys)

  00018	e59f4094	 ldr         r4, [pc, #0x94]
  0001c	e5943000	 ldr         r3, [r4]
  00020	e3530000	 cmp         r3, #0
  00024	13a0310a	 movne       r3, #0xA, 2

; 35   :         return DMADRVERR_ALREADYINIT;

  00028	13830712	 orrne       r0, r3, #0x12, 14

; 34   :     if (gpSys)

  0002c	1a00001a	 bne         |$LN5@DMA_Init|

; 36   :     /* szContext has active key in registry */
; 37   :     DMASystem * pSys = DMASystem::Create(szContext);

  00030	eb000000	 bl          |?Create@DMASystem@@SAPAV1@PBG@Z|
  00034	e1b03000	 movs        r3, r0

; 38   :     if (!pSys)

  00038	1a000001	 bne         |$LN3@DMA_Init|
  0003c		 |$LN22@DMA_Init|

; 39   :         return 0;

  0003c	e3a00000	 mov         r0, #0
  00040	ea000015	 b           |$LN5@DMA_Init|
  00044		 |$LN3@DMA_Init|

; 40   :     gpSys = pSys;
; 41   :     gpSys->Lock();

  00044	e283000c	 add         r0, r3, #0xC
  00048	e5843000	 str         r3, [r4]
  0004c	eb000000	 bl          EnterCriticalSection
  00050		 |$LN12@DMA_Init|

; 42   :     uint err;
; 43   :     __try {
; 44   :         err = gpSys->Init();

  00050	e5940000	 ldr         r0, [r4]
  00054	eb000000	 bl          |?Init@DMASystem@@QAAIXZ|
  00058	e1a05000	 mov         r5, r0
  0005c	e50b501c	 str         r5, [r11, #-0x1C]
  00060		 |$LN13@DMA_Init|

; 45   :     }

  00060	ea000003	 b           |$LN14@DMA_Init|
  00064		 |$LN9@DMA_Init|

; 46   :     __except (EXCEPTION_EXECUTE_HANDLER)

  00064	e3a0310e	 mov         r3, #0xE, 2

; 47   :     {
; 48   :         err = DMADRVERR_EXCEPTION;

  00068	e3835712	 orr         r5, r3, #0x12, 14
  0006c	e50b501c	 str         r5, [r11, #-0x1C]
  00070	e59f403c	 ldr         r4, [pc, #0x3C]
  00074		 |$LN14@DMA_Init|

; 49   :     }
; 50   :     gpSys->Unlock();

  00074	e5943000	 ldr         r3, [r4]
  00078	e283000c	 add         r0, r3, #0xC
  0007c	eb000000	 bl          LeaveCriticalSection

; 51   :     SetLastError(err);

  00080	e1a00005	 mov         r0, r5
  00084	eb000000	 bl          SetLastError

; 52   :     if (err)

  00088	e3550000	 cmp         r5, #0

; 53   :         return 0;

  0008c	1affffea	 bne         |$LN22@DMA_Init|

; 54   :     return (DWORD)gpSys;

  00090	e5940000	 ldr         r0, [r4]
  00094	ea000000	 b           |$LN5@DMA_Init|
  00098		 |$LN21@DMA_Init|
  00098	e51b0018	 ldr         r0, [r11, #-0x18]
  0009c		 |$LN5@DMA_Init|

; 55   : }

  0009c	e24bd014	 sub         sp, r11, #0x14
  000a0	e89d6830	 ldmia       sp, {r4, r5, r11, sp, lr}
  000a4	e12fff1e	 bx          lr

			 ENDP  ; |DMA_Init|

  000a8		 |$LN8@DMA_Init|
  000a8		 |$LN24@DMA_Init|

; 46   :     __except (EXCEPTION_EXECUTE_HANDLER)

  000a8	e52de004	 str         lr, [sp, #-4]!
  000ac		 |$LN11@DMA_Init|
  000ac		 |$LN27@DMA_Init|
  000ac	e3a00001	 mov         r0, #1
  000b0		 |$LN10@DMA_Init|
  000b0	e49df004	 ldr         pc, [sp], #4
  000b4		 |$LN29@DMA_Init|
  000b4		 |$LN30@DMA_Init|
  000b4	00000000	 DCD         |gpSys|
  000b8		 |$LN28@DMA_Init|
  000b8		 |$LN26@DMA_Init|
	EXPORT	|??_GDMASystem@@QAAPAXI@Z|		; DMASystem::`scalar deleting destructor'
	IMPORT	|??3@YAXPAX@Z|				; operator delete
	IMPORT	|??1DMASystem@@QAA@XZ|			; DMASystem::~DMASystem

  00000			 AREA	 |.pdata|, PDATA
|$T32675| DCD	|$LN6@scalar|
	DCD	0x40000a01
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |??_GDMASystem@@QAAPAXI@Z| PROC	; DMASystem::`scalar deleting destructor'
  00000		 |$LN6@scalar|
  00000	e92d4030	 stmdb       sp!, {r4, r5, lr}
  00004		 |$M32672|
  00004	e1a04001	 mov         r4, r1
  00008	e1a05000	 mov         r5, r0
  0000c	eb000000	 bl          |??1DMASystem@@QAA@XZ|
  00010	e3140001	 tst         r4, #1
  00014	11a00005	 movne       r0, r5
  00018	1b000000	 blne        |??3@YAXPAX@Z|
  0001c	e1a00005	 mov         r0, r5
  00020	e8bd4030	 ldmia       sp!, {r4, r5, lr}
  00024	e12fff1e	 bx          lr
  00028		 |$M32673|

			 ENDP  ; |??_GDMASystem@@QAAPAXI@Z|, DMASystem::`scalar deleting destructor'

	EXPORT	|DMA_Open|
	IMPORT	|?Open@DMASystem@@QAAIKKPAK@Z|		; DMASystem::Open
; File c:\wince600\platform\common\src\soc\omap2420_ms_v1\dma\private\dmasys.h

  00000			 AREA	 |.pdata|, PDATA
|$T32708| DCD	|$LN23@DMA_Open|
	DCD	0xc0002c04

  00000			 AREA	 |.pdata|, PDATA
|$T32710| DCD	|$LN7@DMA_Open|
	DCD	0x40000401

  00000			 AREA	 |.xdata|, DATA
|$T32706| DCD	0x1
	DCD	|$LN11@DMA_Open|
	DCD	|$LN12@DMA_Open|
	DCD	|$LN7@DMA_Open|
	DCD	|$LN8@DMA_Open|
; Function compile flags: /Ogspy
; File c:\wince600\platform\common\src\soc\omap2420_ms_v1\dma\private\dmadrv.cpp

  00000			 AREA	 |.text|, CODE, ARM

  00000	00000000	 DCD         |__C_specific_handler|
  00004	00000000	 DCD         |$T32706|

  00008		 |DMA_Open| PROC

; 86   : {

  00008		 |$LN23@DMA_Open|
  00008	e1a0c00d	 mov         r12, sp
  0000c	e92d5870	 stmdb       sp!, {r4 - r6, r11, r12, lr}
  00010	e28db018	 add         r11, sp, #0x18
  00014	e24dd008	 sub         sp, sp, #8
  00018		 |$LN21@DMA_Open|
  00018	e1a04002	 mov         r4, r2
  0001c	e1a06001	 mov         r6, r1

; 87   :     if ((!gpSys) || (context!=(DWORD)gpSys))

  00020	e59f509c	 ldr         r5, [pc, #0x9C]
  00024	e5953000	 ldr         r3, [r5]
  00028	e3530000	 cmp         r3, #0
  0002c	0a00001a	 beq         |$LN2@DMA_Open|
  00030	e1500003	 cmp         r0, r3
  00034	1a000018	 bne         |$LN2@DMA_Open|

; 91   :     }
; 92   :     gpSys->Lock();

  00038	e283000c	 add         r0, r3, #0xC
  0003c	eb000000	 bl          EnterCriticalSection

; 93   :     uint err;
; 94   :     DWORD dwOpenContext = 0;

  00040	e3a03000	 mov         r3, #0
  00044	e50b3020	 str         r3, [r11, #-0x20]
  00048		 |$LN11@DMA_Open|

; 95   :     __try {
; 96   :         err = gpSys->Open(accessCode,shareMode,&dwOpenContext);

  00048	e5950000	 ldr         r0, [r5]
  0004c	e24b3020	 sub         r3, r11, #0x20
  00050	e1a02004	 mov         r2, r4
  00054	e1a01006	 mov         r1, r6
  00058	eb000000	 bl          |?Open@DMASystem@@QAAIKKPAK@Z|
  0005c	e1a04000	 mov         r4, r0
  00060	e50b401c	 str         r4, [r11, #-0x1C]
  00064		 |$LN12@DMA_Open|

; 97   :     }

  00064	ea000005	 b           |$LN13@DMA_Open|
  00068		 |$LN8@DMA_Open|

; 98   :     __except (EXCEPTION_EXECUTE_HANDLER)

  00068	e3a0310e	 mov         r3, #0xE, 2

; 99   :     {
; 100  :         dwOpenContext = 0;

  0006c	e3a02000	 mov         r2, #0

; 101  :         err = DMADRVERR_EXCEPTION;

  00070	e3834712	 orr         r4, r3, #0x12, 14
  00074	e50b401c	 str         r4, [r11, #-0x1C]
  00078	e50b2020	 str         r2, [r11, #-0x20]
  0007c	e59f5040	 ldr         r5, [pc, #0x40]
  00080		 |$LN13@DMA_Open|

; 102  :     }
; 103  :     gpSys->Unlock();

  00080	e5953000	 ldr         r3, [r5]
  00084	e283000c	 add         r0, r3, #0xC
  00088	eb000000	 bl          LeaveCriticalSection

; 104  : 
; 105  :     SetLastError(err);

  0008c	e1a00004	 mov         r0, r4
  00090	eb000000	 bl          SetLastError
  00094		 |$LN20@DMA_Open|

; 106  :     return dwOpenContext;

  00094	e51b0020	 ldr         r0, [r11, #-0x20]
  00098	ea000003	 b           |$LN4@DMA_Open|
  0009c		 |$LN2@DMA_Open|

; 90   :         return 0;

  0009c	e3a03106	 mov         r3, #6, 2

; 88   :     {
; 89   :         SetLastError(DMADRVERR_NOINIT);

  000a0	e3830712	 orr         r0, r3, #0x12, 14
  000a4	eb000000	 bl          SetLastError

; 90   :         return 0;

  000a8	e3a00000	 mov         r0, #0
  000ac		 |$LN4@DMA_Open|

; 107  : }

  000ac	e24bd018	 sub         sp, r11, #0x18
  000b0	e89d6870	 ldmia       sp, {r4 - r6, r11, sp, lr}
  000b4	e12fff1e	 bx          lr

			 ENDP  ; |DMA_Open|

  000b8		 |$LN7@DMA_Open|
  000b8		 |$LN22@DMA_Open|

; 98   :     __except (EXCEPTION_EXECUTE_HANDLER)

  000b8	e52de004	 str         lr, [sp, #-4]!
  000bc		 |$LN10@DMA_Open|
  000bc		 |$LN25@DMA_Open|
  000bc	e3a00001	 mov         r0, #1
  000c0		 |$LN9@DMA_Open|
  000c0	e49df004	 ldr         pc, [sp], #4
  000c4		 |$LN27@DMA_Open|
  000c4		 |$LN28@DMA_Open|
  000c4	00000000	 DCD         |gpSys|
  000c8		 |$LN26@DMA_Open|
  000c8		 |$LN24@DMA_Open|
	EXPORT	|DMA_Close|
	IMPORT	|?Close@DMASystem@@QAAIK@Z|		; DMASystem::Close
; File c:\wince600\platform\common\src\soc\omap2420_ms_v1\dma\private\dmasys.h

  00000			 AREA	 |.pdata|, PDATA
|$T32749| DCD	|$LN24@DMA_Close|
	DCD	0xc0002704

  00000			 AREA	 |.pdata|, PDATA
|$T32751| DCD	|$LN8@DMA_Close|
	DCD	0x40000401

  00000			 AREA	 |.xdata|, DATA
|$T32747| DCD	0x1
	DCD	|$LN12@DMA_Close|
	DCD	|$LN13@DMA_Close|
	DCD	|$LN8@DMA_Close|
	DCD	|$LN9@DMA_Close|
; Function compile flags: /Ogspy
; File c:\wince600\platform\common\src\soc\omap2420_ms_v1\dma\private\dmadrv.cpp

  00000			 AREA	 |.text|, CODE, ARM

  00000	00000000	 DCD         |__C_specific_handler|
  00004	00000000	 DCD         |$T32747|

  00008		 |DMA_Close| PROC

; 110  : {

  00008		 |$LN24@DMA_Close|
  00008	e1a0c00d	 mov         r12, sp
  0000c	e92d5830	 stmdb       sp!, {r4, r5, r11, r12, lr}
  00010	e28db014	 add         r11, sp, #0x14
  00014	e24dd008	 sub         sp, sp, #8
  00018		 |$LN22@DMA_Close|
  00018	e1a04000	 mov         r4, r0

; 111  :     if (!gpSys)

  0001c	e59f508c	 ldr         r5, [pc, #0x8C]
  00020	e5953000	 ldr         r3, [r5]
  00024	e3530000	 cmp         r3, #0
  00028	1a000004	 bne         |$LN2@DMA_Close|
  0002c	e3a03106	 mov         r3, #6, 2

; 112  :     {
; 113  :         SetLastError(DMADRVERR_NOINIT);

  00030	e3830712	 orr         r0, r3, #0x12, 14
  00034	eb000000	 bl          SetLastError
  00038		 |$LN5@DMA_Close|

; 114  :         return 0;

  00038	e3a00000	 mov         r0, #0
  0003c	ea000015	 b           |$LN3@DMA_Close|
  00040		 |$LN2@DMA_Close|

; 115  :     }
; 116  :     gpSys->Lock();

  00040	e283000c	 add         r0, r3, #0xC
  00044	eb000000	 bl          EnterCriticalSection
  00048		 |$LN12@DMA_Close|

; 117  :     uint err;
; 118  :     __try {
; 119  :         err = gpSys->Close(openContext);

  00048	e5950000	 ldr         r0, [r5]
  0004c	e1a01004	 mov         r1, r4
  00050	eb000000	 bl          |?Close@DMASystem@@QAAIK@Z|
  00054	e1a04000	 mov         r4, r0
  00058	e50b401c	 str         r4, [r11, #-0x1C]
  0005c		 |$LN13@DMA_Close|

; 120  :     }

  0005c	ea000003	 b           |$LN14@DMA_Close|
  00060		 |$LN9@DMA_Close|

; 121  :     __except (EXCEPTION_EXECUTE_HANDLER)

  00060	e3a0310e	 mov         r3, #0xE, 2

; 122  :     {
; 123  :         err = DMADRVERR_EXCEPTION;

  00064	e3834712	 orr         r4, r3, #0x12, 14
  00068	e50b401c	 str         r4, [r11, #-0x1C]
  0006c	e59f503c	 ldr         r5, [pc, #0x3C]
  00070		 |$LN14@DMA_Close|

; 124  :     }
; 125  :     gpSys->Unlock();

  00070	e5953000	 ldr         r3, [r5]
  00074	e283000c	 add         r0, r3, #0xC
  00078	eb000000	 bl          LeaveCriticalSection

; 126  : 
; 127  :     SetLastError(err);

  0007c	e1a00004	 mov         r0, r4
  00080	eb000000	 bl          SetLastError

; 128  :     return (err==0)?TRUE:FALSE;

  00084	e3540000	 cmp         r4, #0
  00088	1affffea	 bne         |$LN5@DMA_Close|
  0008c	e3a00001	 mov         r0, #1
  00090	ea000000	 b           |$LN3@DMA_Close|
  00094		 |$LN21@DMA_Close|
  00094	e51b0018	 ldr         r0, [r11, #-0x18]
  00098		 |$LN3@DMA_Close|

; 129  : }

  00098	e24bd014	 sub         sp, r11, #0x14
  0009c	e89d6830	 ldmia       sp, {r4, r5, r11, sp, lr}
  000a0	e12fff1e	 bx          lr

			 ENDP  ; |DMA_Close|

  000a4		 |$LN8@DMA_Close|
  000a4		 |$LN23@DMA_Close|

; 121  :     __except (EXCEPTION_EXECUTE_HANDLER)

  000a4	e52de004	 str         lr, [sp, #-4]!
  000a8		 |$LN11@DMA_Close|
  000a8		 |$LN26@DMA_Close|
  000a8	e3a00001	 mov         r0, #1
  000ac		 |$LN10@DMA_Close|
  000ac	e49df004	 ldr         pc, [sp], #4
  000b0		 |$LN28@DMA_Close|
  000b0		 |$LN29@DMA_Close|
  000b0	00000000	 DCD         |gpSys|
  000b4		 |$LN27@DMA_Close|
  000b4		 |$LN25@DMA_Close|
	EXPORT	|DMA_Read|

  00000			 AREA	 |.pdata|, PDATA
|$T32766| DCD	|$LN6@DMA_Read|
	DCD	0x40001201
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |DMA_Read| PROC

; 132  : {

  00000		 |$LN6@DMA_Read|
  00000	e52de004	 str         lr, [sp, #-4]!
  00004		 |$M32763|

; 133  :     if (!gpSys)

  00004	e59f3038	 ldr         r3, [pc, #0x38]
  00008	e5933000	 ldr         r3, [r3]
  0000c	e3530000	 cmp         r3, #0
  00010	1a000005	 bne         |$LN1@DMA_Read|
  00014	e3a03106	 mov         r3, #6, 2

; 134  :     {
; 135  :         SetLastError(DMADRVERR_NOINIT);

  00018	e3830712	 orr         r0, r3, #0x12, 14
  0001c	eb000000	 bl          SetLastError

; 136  :         return 0;

  00020	e3a00000	 mov         r0, #0

; 140  : }

  00024	e49de004	 ldr         lr, [sp], #4
  00028	e12fff1e	 bx          lr
  0002c		 |$LN1@DMA_Read|

; 136  :         return 0;

  0002c	e3a03112	 mov         r3, #0x12, 2

; 137  :     }
; 138  :     SetLastError(DMADRVERR_NOTSUPPORTED);

  00030	e3830712	 orr         r0, r3, #0x12, 14
  00034	eb000000	 bl          SetLastError

; 139  :     return (DWORD)-1;

  00038	e3e00000	 mvn         r0, #0

; 140  : }

  0003c	e49de004	 ldr         lr, [sp], #4
  00040	e12fff1e	 bx          lr
  00044		 |$LN7@DMA_Read|
  00044		 |$LN8@DMA_Read|
  00044	00000000	 DCD         |gpSys|
  00048		 |$M32764|

			 ENDP  ; |DMA_Read|

	EXPORT	|DMA_Write|

  00000			 AREA	 |.pdata|, PDATA
|$T32777| DCD	|$LN6@DMA_Write|
	DCD	0x40001201
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |DMA_Write| PROC

; 143  : {

  00000		 |$LN6@DMA_Write|
  00000	e52de004	 str         lr, [sp, #-4]!
  00004		 |$M32774|

; 144  :     if (!gpSys)

  00004	e59f3038	 ldr         r3, [pc, #0x38]
  00008	e5933000	 ldr         r3, [r3]
  0000c	e3530000	 cmp         r3, #0
  00010	1a000005	 bne         |$LN1@DMA_Write|
  00014	e3a03106	 mov         r3, #6, 2

; 145  :     {
; 146  :         SetLastError(DMADRVERR_NOINIT);

  00018	e3830712	 orr         r0, r3, #0x12, 14
  0001c	eb000000	 bl          SetLastError

; 147  :         return 0;

  00020	e3a00000	 mov         r0, #0

; 151  : }

  00024	e49de004	 ldr         lr, [sp], #4
  00028	e12fff1e	 bx          lr
  0002c		 |$LN1@DMA_Write|

; 147  :         return 0;

  0002c	e3a03112	 mov         r3, #0x12, 2

; 148  :     }
; 149  :     SetLastError(DMADRVERR_NOTSUPPORTED);

  00030	e3830712	 orr         r0, r3, #0x12, 14
  00034	eb000000	 bl          SetLastError

; 150  :     return (DWORD)-1;

  00038	e3e00000	 mvn         r0, #0

; 151  : }

  0003c	e49de004	 ldr         lr, [sp], #4
  00040	e12fff1e	 bx          lr
  00044		 |$LN7@DMA_Write|
  00044		 |$LN8@DMA_Write|
  00044	00000000	 DCD         |gpSys|
  00048		 |$M32775|

			 ENDP  ; |DMA_Write|

	EXPORT	|DMA_IOControl|
	IMPORT	|?Command@DMASystem@@QAAIKKPAEK0KPAK@Z|	; DMASystem::Command
; File c:\wince600\platform\common\src\soc\omap2420_ms_v1\dma\private\dmasys.h

  00000			 AREA	 |.pdata|, PDATA
|$T32815| DCD	|$LN24@DMA_IOCont|
	DCD	0xc0003304

  00000			 AREA	 |.pdata|, PDATA
|$T32817| DCD	|$LN8@DMA_IOCont|
	DCD	0x40000602

  00000			 AREA	 |.xdata|, DATA
|$T32813| DCD	0x1
	DCD	|$LN12@DMA_IOCont|
	DCD	|$LN13@DMA_IOCont|
	DCD	|$LN8@DMA_IOCont|
	DCD	|$LN9@DMA_IOCont|
; Function compile flags: /Ogspy
; File c:\wince600\platform\common\src\soc\omap2420_ms_v1\dma\private\dmadrv.cpp

  00000			 AREA	 |.text|, CODE, ARM

  00000	00000000	 DCD         |__C_specific_handler|
  00004	00000000	 DCD         |$T32813|

  00008		 |DMA_IOControl| PROC

; 156  : {

  00008		 |$LN24@DMA_IOCont|
  00008	e1a0c00d	 mov         r12, sp
  0000c	e92d59f0	 stmdb       sp!, {r4 - r8, r11, r12, lr}
  00010	e28db020	 add         r11, sp, #0x20
  00014	e24dd018	 sub         sp, sp, #0x18
  00018		 |$LN22@DMA_IOCont|
  00018	e1a04003	 mov         r4, r3
  0001c	e1a06002	 mov         r6, r2
  00020	e1a07001	 mov         r7, r1
  00024	e1a08000	 mov         r8, r0

; 157  :     if (!gpSys)

  00028	e59f50b8	 ldr         r5, [pc, #0xB8]
  0002c	e595e000	 ldr         lr, [r5]
  00030	e35e0000	 cmp         lr, #0
  00034	1a000004	 bne         |$LN2@DMA_IOCont|
  00038	e3a03106	 mov         r3, #6, 2

; 158  :     {
; 159  :         SetLastError(DMADRVERR_NOINIT);

  0003c	e3830712	 orr         r0, r3, #0x12, 14
  00040	eb000000	 bl          SetLastError
  00044		 |$LN5@DMA_IOCont|

; 160  :         return 0;

  00044	e3a00000	 mov         r0, #0
  00048	ea00001e	 b           |$LN3@DMA_IOCont|
  0004c		 |$LN2@DMA_IOCont|

; 161  :     }
; 162  :     gpSys->Lock();

  0004c	e28e000c	 add         r0, lr, #0xC
  00050	eb000000	 bl          EnterCriticalSection
  00054		 |$LN12@DMA_IOCont|

; 163  :     uint err;
; 164  :     __try {
; 165  :         err = gpSys->Command(openContext,code,pInBuffer,inSize,pOutBuffer,outSize,pOutSize);

  00054	e59b3008	 ldr         r3, [r11, #8]
  00058	e59b2004	 ldr         r2, [r11, #4]
  0005c	e59b1000	 ldr         r1, [r11]
  00060	e5950000	 ldr         r0, [r5]
  00064	e58d300c	 str         r3, [sp, #0xC]
  00068	e58d2008	 str         r2, [sp, #8]
  0006c	e58d1004	 str         r1, [sp, #4]
  00070	e1a03006	 mov         r3, r6
  00074	e1a02007	 mov         r2, r7
  00078	e1a01008	 mov         r1, r8
  0007c	e58d4000	 str         r4, [sp]
  00080	eb000000	 bl          |?Command@DMASystem@@QAAIKKPAEK0KPAK@Z|
  00084	e1a04000	 mov         r4, r0
  00088	e50b4028	 str         r4, [r11, #-0x28]
  0008c		 |$LN13@DMA_IOCont|

; 166  :     }

  0008c	ea000003	 b           |$LN14@DMA_IOCont|
  00090		 |$LN9@DMA_IOCont|

; 167  :     __except (EXCEPTION_EXECUTE_HANDLER)

  00090	e3a0310e	 mov         r3, #0xE, 2

; 168  :     {
; 169  :         err = DMADRVERR_EXCEPTION;

  00094	e3834712	 orr         r4, r3, #0x12, 14
  00098	e50b4028	 str         r4, [r11, #-0x28]
  0009c	e59f5044	 ldr         r5, [pc, #0x44]
  000a0		 |$LN14@DMA_IOCont|

; 170  :     }
; 171  :     gpSys->Unlock();

  000a0	e5953000	 ldr         r3, [r5]
  000a4	e283000c	 add         r0, r3, #0xC
  000a8	eb000000	 bl          LeaveCriticalSection

; 172  : 
; 173  :     SetLastError(err);

  000ac	e1a00004	 mov         r0, r4
  000b0	eb000000	 bl          SetLastError

; 174  :     return (err==0)?TRUE:FALSE;

  000b4	e3540000	 cmp         r4, #0
  000b8	1affffe1	 bne         |$LN5@DMA_IOCont|
  000bc	e3a00001	 mov         r0, #1
  000c0	ea000000	 b           |$LN3@DMA_IOCont|
  000c4		 |$LN21@DMA_IOCont|
  000c4	e51b0024	 ldr         r0, [r11, #-0x24]
  000c8		 |$LN3@DMA_IOCont|

; 175  : }

  000c8	e24bd020	 sub         sp, r11, #0x20
  000cc	e89d69f0	 ldmia       sp, {r4 - r8, r11, sp, lr}
  000d0	e12fff1e	 bx          lr

			 ENDP  ; |DMA_IOControl|

  000d4		 |$LN8@DMA_IOCont|
  000d4		 |$LN23@DMA_IOCont|

; 167  :     __except (EXCEPTION_EXECUTE_HANDLER)

  000d4	e52de004	 str         lr, [sp, #-4]!
  000d8	e24dd010	 sub         sp, sp, #0x10
  000dc		 |$LN11@DMA_IOCont|
  000dc		 |$LN26@DMA_IOCont|
  000dc	e3a00001	 mov         r0, #1
  000e0		 |$LN10@DMA_IOCont|
  000e0	e28dd010	 add         sp, sp, #0x10
  000e4	e49df004	 ldr         pc, [sp], #4
  000e8		 |$LN28@DMA_IOCont|
  000e8		 |$LN29@DMA_IOCont|
  000e8	00000000	 DCD         |gpSys|
  000ec		 |$LN27@DMA_IOCont|
  000ec		 |$LN25@DMA_IOCont|
	EXPORT	|DMA_PowerUp|

  00000			 AREA	 |.pdata|, PDATA
|$T32830| DCD	|$LN5@DMA_PowerU|
	DCD	0x40000100
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |DMA_PowerUp| PROC

; 178  : {

  00000		 |$LN5@DMA_PowerU|
  00000		 |$M32827|

; 179  :     /* no functioning */
; 180  : }

  00000	e12fff1e	 bx          lr
  00004		 |$M32828|

			 ENDP  ; |DMA_PowerUp|

	EXPORT	|DMA_PowerDown|

  00000			 AREA	 |.pdata|, PDATA
|$T32837| DCD	|$LN5@DMA_PowerD|
	DCD	0x40000100
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |DMA_PowerDown| PROC

; 183  : {

  00000		 |$LN5@DMA_PowerD|
  00000		 |$M32834|

; 184  :     /* no functioning */
; 185  : }

  00000	e12fff1e	 bx          lr
  00004		 |$M32835|

			 ENDP  ; |DMA_PowerDown|

	EXPORT	|DMA_Deinit|
	IMPORT	|?Deinit@DMASystem@@QAAIXZ|		; DMASystem::Deinit

  00000			 AREA	 |.pdata|, PDATA
|$T32877| DCD	|$LN29@DMA_Deinit|
	DCD	0xc0002e04

  00000			 AREA	 |.pdata|, PDATA
|$T32879| DCD	|$LN10@DMA_Deinit|
	DCD	0x40000401

  00000			 AREA	 |.xdata|, DATA
|$T32875| DCD	0x1
	DCD	|$LN14@DMA_Deinit|
	DCD	|$LN15@DMA_Deinit|
	DCD	|$LN10@DMA_Deinit|
	DCD	|$LN11@DMA_Deinit|
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000	00000000	 DCD         |__C_specific_handler|
  00004	00000000	 DCD         |$T32875|

  00008		 |DMA_Deinit| PROC

; 58   : {

  00008		 |$LN29@DMA_Deinit|
  00008	e1a0c00d	 mov         r12, sp
  0000c	e92d5830	 stmdb       sp!, {r4, r5, r11, r12, lr}
  00010	e28db014	 add         r11, sp, #0x14
  00014	e24dd008	 sub         sp, sp, #8
  00018		 |$LN27@DMA_Deinit|

; 59   :     if ((!gpSys) || (context!=(DWORD)gpSys))

  00018	e59f50ac	 ldr         r5, [pc, #0xAC]
  0001c	e5953000	 ldr         r3, [r5]
  00020	e3530000	 cmp         r3, #0
  00024	0a00001e	 beq         |$LN3@DMA_Deinit|
  00028	e1500003	 cmp         r0, r3
  0002c	1a00001c	 bne         |$LN3@DMA_Deinit|

; 63   :     }
; 64   :     gpSys->Lock();

  00030	e283000c	 add         r0, r3, #0xC
  00034	eb000000	 bl          EnterCriticalSection
  00038		 |$LN14@DMA_Deinit|

; 65   :     uint err;
; 66   :     __try {
; 67   :         err = gpSys->Deinit();

  00038	e5950000	 ldr         r0, [r5]
  0003c	eb000000	 bl          |?Deinit@DMASystem@@QAAIXZ|
  00040	e1a04000	 mov         r4, r0
  00044	e50b401c	 str         r4, [r11, #-0x1C]
  00048		 |$LN15@DMA_Deinit|

; 68   :     }

  00048	ea000003	 b           |$LN16@DMA_Deinit|
  0004c		 |$LN11@DMA_Deinit|

; 69   :     __except (EXCEPTION_EXECUTE_HANDLER)

  0004c	e3a0310e	 mov         r3, #0xE, 2

; 70   :     {
; 71   :         err = DMADRVERR_EXCEPTION;

  00050	e3834712	 orr         r4, r3, #0x12, 14
  00054	e50b401c	 str         r4, [r11, #-0x1C]
  00058	e59f506c	 ldr         r5, [pc, #0x6C]
  0005c		 |$LN16@DMA_Deinit|

; 72   :     }
; 73   :     gpSys->Unlock();

  0005c	e5953000	 ldr         r3, [r5]
  00060	e283000c	 add         r0, r3, #0xC
  00064	eb000000	 bl          LeaveCriticalSection

; 74   : 
; 75   :     if (!err)

  00068	e3540000	 cmp         r4, #0
  0006c	1a00000f	 bne         |$LN1@DMA_Deinit|

; 76   :     {
; 77   :         delete gpSys;

  00070	e5954000	 ldr         r4, [r5]
  00074	e3540000	 cmp         r4, #0
  00078	0a000003	 beq         |$LN7@DMA_Deinit|
  0007c	e1a00004	 mov         r0, r4
  00080	eb000000	 bl          |??1DMASystem@@QAA@XZ|
  00084	e1a00004	 mov         r0, r4
  00088	eb000000	 bl          |??3@YAXPAX@Z|
  0008c		 |$LN7@DMA_Deinit|

; 78   :         gpSys = NULL;

  0008c	e3a03000	 mov         r3, #0
  00090	e5853000	 str         r3, [r5]

; 79   :         return TRUE;

  00094	e3a00001	 mov         r0, #1
  00098	ea000005	 b           |$LN5@DMA_Deinit|
  0009c		 |$LN26@DMA_Deinit|

; 62   :         return FALSE;

  0009c	e51b0018	 ldr         r0, [r11, #-0x18]
  000a0	ea000003	 b           |$LN5@DMA_Deinit|
  000a4		 |$LN3@DMA_Deinit|
  000a4	e3a03106	 mov         r3, #6, 2

; 60   :     {
; 61   :         SetLastError(DMADRVERR_NOINIT);

  000a8	e3830712	 orr         r0, r3, #0x12, 14
  000ac	eb000000	 bl          SetLastError
  000b0		 |$LN1@DMA_Deinit|

; 62   :         return FALSE;

  000b0	e3a00000	 mov         r0, #0
  000b4		 |$LN5@DMA_Deinit|

; 80   :     } 
; 81   : 
; 82   :     return FALSE;
; 83   : }

  000b4	e24bd014	 sub         sp, r11, #0x14
  000b8	e89d6830	 ldmia       sp, {r4, r5, r11, sp, lr}
  000bc	e12fff1e	 bx          lr

			 ENDP  ; |DMA_Deinit|

  000c0		 |$LN10@DMA_Deinit|
  000c0		 |$LN28@DMA_Deinit|

; 69   :     __except (EXCEPTION_EXECUTE_HANDLER)

  000c0	e52de004	 str         lr, [sp, #-4]!
  000c4		 |$LN13@DMA_Deinit|
  000c4		 |$LN31@DMA_Deinit|
  000c4	e3a00001	 mov         r0, #1
  000c8		 |$LN12@DMA_Deinit|
  000c8	e49df004	 ldr         pc, [sp], #4
  000cc		 |$LN33@DMA_Deinit|
  000cc		 |$LN34@DMA_Deinit|
  000cc	00000000	 DCD         |gpSys|
  000d0		 |$LN32@DMA_Deinit|
  000d0		 |$LN30@DMA_Deinit|
	END
