; Listing generated by Microsoft (R) Optimizing Compiler Version 14.01.60511.01 

	TTL	C:\WINCE600\PLATFORM\COMMON\SRC\SOC\OMAP2420_MS_V1\DMA\PRIVATE\dmadrv.cpp
	CODE32

  00000			 AREA	 |.drectve|, DRECTVE
	DCB	"-defaultlib:LIBCMT "
	DCB	"-defaultlib:OLDNAMES "

	EXPORT	|dpCurSettings| [ DATA ]

  00000			 AREA	 |.bss|, NOINIT
|gpSys|	%	0x4

  00000			 AREA	 |.data|, DATA
|dpCurSettings| DCB "D", 0x0, "M", 0x0, "A", 0x0, 0x0, 0x0
	%	56
	DCB	"E", 0x0, "r", 0x0, "r", 0x0, "o", 0x0, "r", 0x0, "s", 0x0
	DCB	0x0, 0x0
	%	50
	DCB	"W", 0x0, "a", 0x0, "r", 0x0, "n", 0x0, "i", 0x0, "n", 0x0
	DCB	"g", 0x0, "s", 0x0, 0x0, 0x0
	%	46
	DCB	"F", 0x0, "u", 0x0, "n", 0x0, "c", 0x0, "t", 0x0, "i", 0x0
	DCB	"o", 0x0, "n", 0x0, 0x0, 0x0
	%	46
	DCB	"I", 0x0, "n", 0x0, "i", 0x0, "t", 0x0, 0x0, 0x0
	%	54
	DCB	"U", 0x0, "n", 0x0, "d", 0x0, "e", 0x0, "f", 0x0, "i", 0x0
	DCB	"n", 0x0, "e", 0x0, "d", 0x0, 0x0, 0x0
	%	44
	DCB	"U", 0x0, "n", 0x0, "d", 0x0, "e", 0x0, "f", 0x0, "i", 0x0
	DCB	"n", 0x0, "e", 0x0, "d", 0x0, 0x0, 0x0
	%	44
	DCB	"U", 0x0, "n", 0x0, "d", 0x0, "e", 0x0, "f", 0x0, "i", 0x0
	DCB	"n", 0x0, "e", 0x0, "d", 0x0, 0x0, 0x0
	%	44
	DCB	"U", 0x0, "n", 0x0, "d", 0x0, "e", 0x0, "f", 0x0, "i", 0x0
	DCB	"n", 0x0, "e", 0x0, "d", 0x0, 0x0, 0x0
	%	44
	DCB	"U", 0x0, "n", 0x0, "d", 0x0, "e", 0x0, "f", 0x0, "i", 0x0
	DCB	"n", 0x0, "e", 0x0, "d", 0x0, 0x0, 0x0
	%	44
	DCB	"U", 0x0, "n", 0x0, "d", 0x0, "e", 0x0, "f", 0x0, "i", 0x0
	DCB	"n", 0x0, "e", 0x0, "d", 0x0, 0x0, 0x0
	%	44
	DCB	"U", 0x0, "n", 0x0, "d", 0x0, "e", 0x0, "f", 0x0, "i", 0x0
	DCB	"n", 0x0, "e", 0x0, "d", 0x0, 0x0, 0x0
	%	44
	DCB	"U", 0x0, "n", 0x0, "d", 0x0, "e", 0x0, "f", 0x0, "i", 0x0
	DCB	"n", 0x0, "e", 0x0, "d", 0x0, 0x0, 0x0
	%	44
	DCB	"U", 0x0, "n", 0x0, "d", 0x0, "e", 0x0, "f", 0x0, "i", 0x0
	DCB	"n", 0x0, "e", 0x0, "d", 0x0, 0x0, 0x0
	%	44
	DCB	"U", 0x0, "n", 0x0, "d", 0x0, "e", 0x0, "f", 0x0, "i", 0x0
	DCB	"n", 0x0, "e", 0x0, "d", 0x0, 0x0, 0x0
	%	44
	DCB	"U", 0x0, "n", 0x0, "d", 0x0, "e", 0x0, "f", 0x0, "i", 0x0
	DCB	"n", 0x0, "e", 0x0, "d", 0x0, 0x0, 0x0
	%	44
	DCB	"U", 0x0, "n", 0x0, "d", 0x0, "e", 0x0, "f", 0x0, "i", 0x0
	DCB	"n", 0x0, "e", 0x0, "d", 0x0, 0x0, 0x0
	%	44
	DCD	0x3
	EXPORT	|?Unlock@DMASystem@@QAAXXZ|		; DMASystem::Unlock
	EXPORT	|?Lock@DMASystem@@QAAXXZ|		; DMASystem::Lock
	EXPORT	|DMA_Init|
	IMPORT	|SetLastError|
	IMPORT	|?Init@DMASystem@@QAAIXZ|		; DMASystem::Init
	IMPORT	|?Create@DMASystem@@SAPAV1@PBG@Z|	; DMASystem::Create
	IMPORT	|__C_specific_handler|

  00000			 AREA	 |.pdata|, PDATA
|$T32597| DCD	|$LN18@DMA_Init|
	DCD	0xc0003b05
|$T32599| DCD	|$LN8@DMA_Init|
	DCD	0x40000401

  00000			 AREA	 |.xdata|, DATA
|$T32595| DCD	0x1
	DCD	|$LN12@DMA_Init|
	DCD	|$LN13@DMA_Init|
	DCD	|$LN8@DMA_Init|
	DCD	|$LN9@DMA_Init|
; Function compile flags: /Odtp
; File c:\wince600\platform\common\src\soc\omap2420_ms_v1\dma\private\dmadrv.cpp

  00000			 AREA	 |.text|, CODE, ARM

  00000	00000000	 DCD         |__C_specific_handler|
  00004	00000000	 DCD         |$T32595|

  00008		 |DMA_Init| PROC

; 33   : {

  00008		 |$LN18@DMA_Init|
  00008	e1a0c00d	 mov         r12, sp
  0000c	e92d0003	 stmdb       sp!, {r0, r1}
  00010	e92d5800	 stmdb       sp!, {r11, r12, lr}
  00014	e28db00c	 add         r11, sp, #0xC
  00018	e24dd014	 sub         sp, sp, #0x14
  0001c		 |$LN16@DMA_Init|

; 34   :     if (gpSys)

  0001c	e59f30dc	 ldr         r3, [pc, #0xDC]
  00020	e5933000	 ldr         r3, [r3]
  00024	e3530000	 cmp         r3, #0
  00028	0a000003	 beq         |$LN4@DMA_Init|

; 35   :         return DMADRVERR_ALREADYINIT;

  0002c	e3a0310a	 mov         r3, #0xA, 2
  00030	e3833712	 orr         r3, r3, #0x12, 14
  00034	e50b3018	 str         r3, [r11, #-0x18]
  00038	ea000029	 b           |$LN5@DMA_Init|
  0003c		 |$LN4@DMA_Init|

; 36   :     /* szContext has active key in registry */
; 37   :     DMASystem * pSys = DMASystem::Create(szContext);

  0003c	e59b0000	 ldr         r0, [r11]
  00040	eb000000	 bl          |?Create@DMASystem@@SAPAV1@PBG@Z|
  00044	e50b0014	 str         r0, [r11, #-0x14]
  00048	e51b3014	 ldr         r3, [r11, #-0x14]
  0004c	e50b301c	 str         r3, [r11, #-0x1C]

; 38   :     if (!pSys)

  00050	e51b301c	 ldr         r3, [r11, #-0x1C]
  00054	e3530000	 cmp         r3, #0
  00058	1a000002	 bne         |$LN3@DMA_Init|

; 39   :         return 0;

  0005c	e3a03000	 mov         r3, #0
  00060	e50b3018	 str         r3, [r11, #-0x18]
  00064	ea00001e	 b           |$LN5@DMA_Init|
  00068		 |$LN3@DMA_Init|

; 40   :     gpSys = pSys;

  00068	e51b201c	 ldr         r2, [r11, #-0x1C]
  0006c	e59f308c	 ldr         r3, [pc, #0x8C]
  00070	e5832000	 str         r2, [r3]

; 41   :     gpSys->Lock();

  00074	e59f3084	 ldr         r3, [pc, #0x84]
  00078	e5930000	 ldr         r0, [r3]
  0007c	eb000000	 bl          |?Lock@DMASystem@@QAAXXZ|
  00080		 |$LN12@DMA_Init|

; 42   :     uint err;
; 43   :     __try {
; 44   :         err = gpSys->Init();

  00080	e59f3078	 ldr         r3, [pc, #0x78]
  00084	e5930000	 ldr         r0, [r3]
  00088	eb000000	 bl          |?Init@DMASystem@@QAAIXZ|
  0008c	e50b0010	 str         r0, [r11, #-0x10]
  00090	e51b3010	 ldr         r3, [r11, #-0x10]
  00094	e50b3020	 str         r3, [r11, #-0x20]
  00098		 |$LN13@DMA_Init|

; 45   :     }

  00098	ea000003	 b           |$LN14@DMA_Init|
  0009c		 |$LN9@DMA_Init|

; 47   :     {
; 48   :         err = DMADRVERR_EXCEPTION;

  0009c	e3a0310e	 mov         r3, #0xE, 2
  000a0	e3833712	 orr         r3, r3, #0x12, 14
  000a4	e50b3020	 str         r3, [r11, #-0x20]
  000a8	eaffffff	 b           |$LN14@DMA_Init|
  000ac		 |$LN14@DMA_Init|

; 49   :     }
; 50   :     gpSys->Unlock();

  000ac	e59f304c	 ldr         r3, [pc, #0x4C]
  000b0	e5930000	 ldr         r0, [r3]
  000b4	eb000000	 bl          |?Unlock@DMASystem@@QAAXXZ|

; 51   :     SetLastError(err);

  000b8	e51b0020	 ldr         r0, [r11, #-0x20]
  000bc	eb000000	 bl          SetLastError

; 52   :     if (err)

  000c0	e51b3020	 ldr         r3, [r11, #-0x20]
  000c4	e3530000	 cmp         r3, #0
  000c8	0a000002	 beq         |$LN1@DMA_Init|

; 53   :         return 0;

  000cc	e3a03000	 mov         r3, #0
  000d0	e50b3018	 str         r3, [r11, #-0x18]
  000d4	ea000002	 b           |$LN5@DMA_Init|
  000d8		 |$LN1@DMA_Init|

; 54   :     return (DWORD)gpSys;

  000d8	e59f3020	 ldr         r3, [pc, #0x20]
  000dc	e5933000	 ldr         r3, [r3]
  000e0	e50b3018	 str         r3, [r11, #-0x18]
  000e4		 |$LN5@DMA_Init|
  000e4		 |$LN7@DMA_Init|

; 55   : }

  000e4	e51b0018	 ldr         r0, [r11, #-0x18]
  000e8	e24bd00c	 sub         sp, r11, #0xC
  000ec	e89d6800	 ldmia       sp, {r11, sp, lr}
  000f0	e12fff1e	 bx          lr

			 ENDP  ; |DMA_Init|

  000f4		 |$LN8@DMA_Init|
  000f4		 |$LN17@DMA_Init|

; 46   :     __except (EXCEPTION_EXECUTE_HANDLER)

  000f4	e52de004	 str         lr, [sp, #-4]!
  000f8		 |$LN11@DMA_Init|
  000f8		 |$LN20@DMA_Init|
  000f8	e3a00001	 mov         r0, #1
  000fc		 |$LN10@DMA_Init|
  000fc	e49df004	 ldr         pc, [sp], #4
  00100		 |$LN22@DMA_Init|
  00100		 |$LN23@DMA_Init|
  00100	00000000	 DCD         |gpSys|
  00104		 |$LN21@DMA_Init|
  00104		 |$LN19@DMA_Init|
	IMPORT	|EnterCriticalSection|
; File c:\wince600\platform\common\src\soc\omap2420_ms_v1\dma\private\dmasys.h

  00000			 AREA	 |.pdata|, PDATA
|$T32608| DCD	|$LN5@Lock|
	DCD	0x40000803
; Function compile flags: /Odtp

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |?Lock@DMASystem@@QAAXXZ| PROC		; DMASystem::Lock

; 53   :     void Lock(void) { EnterCriticalSection(&mSec); }

  00000		 |$LN5@Lock|
  00000	e1a0c00d	 mov         r12, sp
  00004	e92d0001	 stmdb       sp!, {r0}
  00008	e92d5000	 stmdb       sp!, {r12, lr}
  0000c		 |$M32605|
  0000c	e59d3008	 ldr         r3, [sp, #8]
  00010	e283000c	 add         r0, r3, #0xC
  00014	eb000000	 bl          EnterCriticalSection
  00018	e89d6000	 ldmia       sp, {sp, lr}
  0001c	e12fff1e	 bx          lr
  00020		 |$M32606|

			 ENDP  ; |?Lock@DMASystem@@QAAXXZ|, DMASystem::Lock

	IMPORT	|LeaveCriticalSection|

  00000			 AREA	 |.pdata|, PDATA
|$T32615| DCD	|$LN5@Unlock|
	DCD	0x40000803
; Function compile flags: /Odtp

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |?Unlock@DMASystem@@QAAXXZ| PROC	; DMASystem::Unlock

; 54   :     void Unlock(void) { LeaveCriticalSection(&mSec); }

  00000		 |$LN5@Unlock|
  00000	e1a0c00d	 mov         r12, sp
  00004	e92d0001	 stmdb       sp!, {r0}
  00008	e92d5000	 stmdb       sp!, {r12, lr}
  0000c		 |$M32612|
  0000c	e59d3008	 ldr         r3, [sp, #8]
  00010	e283000c	 add         r0, r3, #0xC
  00014	eb000000	 bl          LeaveCriticalSection
  00018	e89d6000	 ldmia       sp, {sp, lr}
  0001c	e12fff1e	 bx          lr
  00020		 |$M32613|

			 ENDP  ; |?Unlock@DMASystem@@QAAXXZ|, DMASystem::Unlock

	EXPORT	|??_GDMASystem@@QAAPAXI@Z|		; DMASystem::`scalar deleting destructor'
	EXPORT	|DMA_Deinit|
	IMPORT	|?Deinit@DMASystem@@QAAIXZ|		; DMASystem::Deinit

  00010			 AREA	 |.pdata|, PDATA
|$T32637| DCD	|$LN20@DMA_Deinit|
	DCD	0xc0004505
|$T32639| DCD	|$LN10@DMA_Deinit|
	DCD	0x40000401

  00014			 AREA	 |.xdata|, DATA
|$T32635| DCD	0x1
	DCD	|$LN14@DMA_Deinit|
	DCD	|$LN15@DMA_Deinit|
	DCD	|$LN10@DMA_Deinit|
	DCD	|$LN11@DMA_Deinit|
; Function compile flags: /Odtp
; File c:\wince600\platform\common\src\soc\omap2420_ms_v1\dma\private\dmadrv.cpp

  00104			 AREA	 |.text|, CODE, ARM

  00104	00000000	 DCD         |__C_specific_handler|
  00108	00000000	 DCD         |$T32635|

  0010c		 |DMA_Deinit| PROC

; 58   : {

  0010c		 |$LN20@DMA_Deinit|
  0010c	e1a0c00d	 mov         r12, sp
  00110	e92d0001	 stmdb       sp!, {r0}
  00114	e92d5800	 stmdb       sp!, {r11, r12, lr}
  00118	e28db00c	 add         r11, sp, #0xC
  0011c	e24dd01c	 sub         sp, sp, #0x1C
  00120		 |$LN18@DMA_Deinit|

; 59   :     if ((!gpSys) || (context!=(DWORD)gpSys))

  00120	e59f3104	 ldr         r3, [pc, #0x104]
  00124	e5933000	 ldr         r3, [r3]
  00128	e3530000	 cmp         r3, #0
  0012c	0a000004	 beq         |$LN3@DMA_Deinit|
  00130	e59b2000	 ldr         r2, [r11]
  00134	e59f30f0	 ldr         r3, [pc, #0xF0]
  00138	e5933000	 ldr         r3, [r3]
  0013c	e1520003	 cmp         r2, r3
  00140	0a000005	 beq         |$LN4@DMA_Deinit|
  00144		 |$LN3@DMA_Deinit|

; 60   :     {
; 61   :         SetLastError(DMADRVERR_NOINIT);

  00144	e3a00106	 mov         r0, #6, 2
  00148	e3800712	 orr         r0, r0, #0x12, 14
  0014c	eb000000	 bl          SetLastError

; 62   :         return FALSE;

  00150	e3a03000	 mov         r3, #0
  00154	e50b301c	 str         r3, [r11, #-0x1C]
  00158	ea00002c	 b           |$LN5@DMA_Deinit|
  0015c		 |$LN4@DMA_Deinit|

; 63   :     }
; 64   :     gpSys->Lock();

  0015c	e59f30c8	 ldr         r3, [pc, #0xC8]
  00160	e5930000	 ldr         r0, [r3]
  00164	eb000000	 bl          |?Lock@DMASystem@@QAAXXZ|
  00168		 |$LN14@DMA_Deinit|

; 65   :     uint err;
; 66   :     __try {
; 67   :         err = gpSys->Deinit();

  00168	e59f30bc	 ldr         r3, [pc, #0xBC]
  0016c	e5930000	 ldr         r0, [r3]
  00170	eb000000	 bl          |?Deinit@DMASystem@@QAAIXZ|
  00174	e50b0018	 str         r0, [r11, #-0x18]
  00178	e51b3018	 ldr         r3, [r11, #-0x18]
  0017c	e50b3028	 str         r3, [r11, #-0x28]
  00180		 |$LN15@DMA_Deinit|

; 68   :     }

  00180	ea000003	 b           |$LN16@DMA_Deinit|
  00184		 |$LN11@DMA_Deinit|

; 70   :     {
; 71   :         err = DMADRVERR_EXCEPTION;

  00184	e3a0310e	 mov         r3, #0xE, 2
  00188	e3833712	 orr         r3, r3, #0x12, 14
  0018c	e50b3028	 str         r3, [r11, #-0x28]
  00190	eaffffff	 b           |$LN16@DMA_Deinit|
  00194		 |$LN16@DMA_Deinit|

; 72   :     }
; 73   :     gpSys->Unlock();

  00194	e59f3090	 ldr         r3, [pc, #0x90]
  00198	e5930000	 ldr         r0, [r3]
  0019c	eb000000	 bl          |?Unlock@DMASystem@@QAAXXZ|

; 74   : 
; 75   :     if (!err)

  001a0	e51b3028	 ldr         r3, [r11, #-0x28]
  001a4	e3530000	 cmp         r3, #0
  001a8	1a000016	 bne         |$LN1@DMA_Deinit|

; 76   :     {
; 77   :         delete gpSys;

  001ac	e59f3078	 ldr         r3, [pc, #0x78]
  001b0	e5933000	 ldr         r3, [r3]
  001b4	e50b3020	 str         r3, [r11, #-0x20]
  001b8	e51b3020	 ldr         r3, [r11, #-0x20]
  001bc	e50b3024	 str         r3, [r11, #-0x24]
  001c0	e51b3024	 ldr         r3, [r11, #-0x24]
  001c4	e3530000	 cmp         r3, #0
  001c8	0a000006	 beq         |$LN7@DMA_Deinit|
  001cc	e3a01001	 mov         r1, #1
  001d0	e51b0024	 ldr         r0, [r11, #-0x24]
  001d4	eb000000	 bl          |??_GDMASystem@@QAAPAXI@Z|
  001d8	e50b0014	 str         r0, [r11, #-0x14]
  001dc	e51b3014	 ldr         r3, [r11, #-0x14]
  001e0	e50b3010	 str         r3, [r11, #-0x10]
  001e4	ea000001	 b           |$LN8@DMA_Deinit|
  001e8		 |$LN7@DMA_Deinit|
  001e8	e3a03000	 mov         r3, #0
  001ec	e50b3010	 str         r3, [r11, #-0x10]
  001f0		 |$LN8@DMA_Deinit|

; 78   :         gpSys = NULL;

  001f0	e59f2034	 ldr         r2, [pc, #0x34]
  001f4	e3a03000	 mov         r3, #0
  001f8	e5823000	 str         r3, [r2]

; 79   :         return TRUE;

  001fc	e3a03001	 mov         r3, #1
  00200	e50b301c	 str         r3, [r11, #-0x1C]
  00204	ea000001	 b           |$LN5@DMA_Deinit|
  00208		 |$LN1@DMA_Deinit|

; 80   :     } 
; 81   : 
; 82   :     return FALSE;

  00208	e3a03000	 mov         r3, #0
  0020c	e50b301c	 str         r3, [r11, #-0x1C]
  00210		 |$LN5@DMA_Deinit|
  00210		 |$LN9@DMA_Deinit|

; 83   : }

  00210	e51b001c	 ldr         r0, [r11, #-0x1C]
  00214	e24bd00c	 sub         sp, r11, #0xC
  00218	e89d6800	 ldmia       sp, {r11, sp, lr}
  0021c	e12fff1e	 bx          lr

			 ENDP  ; |DMA_Deinit|

  00220		 |$LN10@DMA_Deinit|
  00220		 |$LN19@DMA_Deinit|

; 69   :     __except (EXCEPTION_EXECUTE_HANDLER)

  00220	e52de004	 str         lr, [sp, #-4]!
  00224		 |$LN13@DMA_Deinit|
  00224		 |$LN22@DMA_Deinit|
  00224	e3a00001	 mov         r0, #1
  00228		 |$LN12@DMA_Deinit|
  00228	e49df004	 ldr         pc, [sp], #4
  0022c		 |$LN24@DMA_Deinit|
  0022c		 |$LN25@DMA_Deinit|
  0022c	00000000	 DCD         |gpSys|
  00230		 |$LN23@DMA_Deinit|
  00230		 |$LN21@DMA_Deinit|
	IMPORT	|??3@YAXPAX@Z|				; operator delete
	IMPORT	|??1DMASystem@@QAA@XZ|			; DMASystem::~DMASystem

  00000			 AREA	 |.pdata|, PDATA
|$T32649| DCD	|$LN6@scalar|
	DCD	0x40001104
; Function compile flags: /Odtp

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |??_GDMASystem@@QAAPAXI@Z| PROC	; DMASystem::`scalar deleting destructor'
  00000		 |$LN6@scalar|
  00000	e1a0c00d	 mov         r12, sp
  00004	e92d0003	 stmdb       sp!, {r0, r1}
  00008	e92d5000	 stmdb       sp!, {r12, lr}
  0000c	e24dd004	 sub         sp, sp, #4
  00010		 |$M32646|
  00010	e59d000c	 ldr         r0, [sp, #0xC]
  00014	eb000000	 bl          |??1DMASystem@@QAA@XZ|
  00018	e59d3010	 ldr         r3, [sp, #0x10]
  0001c	e3130001	 tst         r3, #1
  00020	0a000001	 beq         |$LN1@scalar|
  00024	e59d000c	 ldr         r0, [sp, #0xC]
  00028	eb000000	 bl          |??3@YAXPAX@Z|
  0002c		 |$LN1@scalar|
  0002c	e59d300c	 ldr         r3, [sp, #0xC]
  00030	e58d3000	 str         r3, [sp]
  00034	e59d0000	 ldr         r0, [sp]
  00038	e28dd004	 add         sp, sp, #4
  0003c	e89d6000	 ldmia       sp, {sp, lr}
  00040	e12fff1e	 bx          lr
  00044		 |$M32647|

			 ENDP  ; |??_GDMASystem@@QAAPAXI@Z|, DMASystem::`scalar deleting destructor'

	EXPORT	|DMA_Open|
	IMPORT	|?Open@DMASystem@@QAAIKKPAK@Z|		; DMASystem::Open

  00020			 AREA	 |.pdata|, PDATA
|$T32667| DCD	|$LN17@DMA_Open|
	DCD	0xc0003405
|$T32669| DCD	|$LN7@DMA_Open|
	DCD	0x40000401

  00028			 AREA	 |.xdata|, DATA
|$T32665| DCD	0x1
	DCD	|$LN11@DMA_Open|
	DCD	|$LN12@DMA_Open|
	DCD	|$LN7@DMA_Open|
	DCD	|$LN8@DMA_Open|
; Function compile flags: /Odtp

  00230			 AREA	 |.text|, CODE, ARM

  00230	00000000	 DCD         |__C_specific_handler|
  00234	00000000	 DCD         |$T32665|

  00238		 |DMA_Open| PROC

; 86   : {

  00238		 |$LN17@DMA_Open|
  00238	e1a0c00d	 mov         r12, sp
  0023c	e92d0007	 stmdb       sp!, {r0 - r2}
  00240	e92d5800	 stmdb       sp!, {r11, r12, lr}
  00244	e28db00c	 add         r11, sp, #0xC
  00248	e24dd010	 sub         sp, sp, #0x10
  0024c		 |$LN15@DMA_Open|

; 87   :     if ((!gpSys) || (context!=(DWORD)gpSys))

  0024c	e59f30c0	 ldr         r3, [pc, #0xC0]
  00250	e5933000	 ldr         r3, [r3]
  00254	e3530000	 cmp         r3, #0
  00258	0a000004	 beq         |$LN2@DMA_Open|
  0025c	e59b2000	 ldr         r2, [r11]
  00260	e59f30ac	 ldr         r3, [pc, #0xAC]
  00264	e5933000	 ldr         r3, [r3]
  00268	e1520003	 cmp         r2, r3
  0026c	0a000005	 beq         |$LN3@DMA_Open|
  00270		 |$LN2@DMA_Open|

; 88   :     {
; 89   :         SetLastError(DMADRVERR_NOINIT);

  00270	e3a00106	 mov         r0, #6, 2
  00274	e3800712	 orr         r0, r0, #0x12, 14
  00278	eb000000	 bl          SetLastError

; 90   :         return 0;

  0027c	e3a03000	 mov         r3, #0
  00280	e50b3014	 str         r3, [r11, #-0x14]
  00284	ea00001b	 b           |$LN4@DMA_Open|
  00288		 |$LN3@DMA_Open|

; 91   :     }
; 92   :     gpSys->Lock();

  00288	e59f3084	 ldr         r3, [pc, #0x84]
  0028c	e5930000	 ldr         r0, [r3]
  00290	eb000000	 bl          |?Lock@DMASystem@@QAAXXZ|

; 93   :     uint err;
; 94   :     DWORD dwOpenContext = 0;

  00294	e3a03000	 mov         r3, #0
  00298	e50b301c	 str         r3, [r11, #-0x1C]
  0029c		 |$LN11@DMA_Open|

; 95   :     __try {
; 96   :         err = gpSys->Open(accessCode,shareMode,&dwOpenContext);

  0029c	e24b301c	 sub         r3, r11, #0x1C
  002a0	e59b2008	 ldr         r2, [r11, #8]
  002a4	e59b1004	 ldr         r1, [r11, #4]
  002a8	e59f0064	 ldr         r0, [pc, #0x64]
  002ac	e5900000	 ldr         r0, [r0]
  002b0	eb000000	 bl          |?Open@DMASystem@@QAAIKKPAK@Z|
  002b4	e50b0010	 str         r0, [r11, #-0x10]
  002b8	e51b3010	 ldr         r3, [r11, #-0x10]
  002bc	e50b3018	 str         r3, [r11, #-0x18]
  002c0		 |$LN12@DMA_Open|

; 97   :     }

  002c0	ea000005	 b           |$LN13@DMA_Open|
  002c4		 |$LN8@DMA_Open|

; 99   :     {
; 100  :         dwOpenContext = 0;

  002c4	e3a03000	 mov         r3, #0
  002c8	e50b301c	 str         r3, [r11, #-0x1C]

; 101  :         err = DMADRVERR_EXCEPTION;

  002cc	e3a0310e	 mov         r3, #0xE, 2
  002d0	e3833712	 orr         r3, r3, #0x12, 14
  002d4	e50b3018	 str         r3, [r11, #-0x18]
  002d8	eaffffff	 b           |$LN13@DMA_Open|
  002dc		 |$LN13@DMA_Open|

; 102  :     }
; 103  :     gpSys->Unlock();

  002dc	e59f3030	 ldr         r3, [pc, #0x30]
  002e0	e5930000	 ldr         r0, [r3]
  002e4	eb000000	 bl          |?Unlock@DMASystem@@QAAXXZ|

; 104  : 
; 105  :     SetLastError(err);

  002e8	e51b0018	 ldr         r0, [r11, #-0x18]
  002ec	eb000000	 bl          SetLastError

; 106  :     return dwOpenContext;

  002f0	e51b301c	 ldr         r3, [r11, #-0x1C]
  002f4	e50b3014	 str         r3, [r11, #-0x14]
  002f8		 |$LN4@DMA_Open|
  002f8		 |$LN6@DMA_Open|

; 107  : }

  002f8	e51b0014	 ldr         r0, [r11, #-0x14]
  002fc	e24bd00c	 sub         sp, r11, #0xC
  00300	e89d6800	 ldmia       sp, {r11, sp, lr}
  00304	e12fff1e	 bx          lr

			 ENDP  ; |DMA_Open|

  00308		 |$LN7@DMA_Open|
  00308		 |$LN16@DMA_Open|

; 98   :     __except (EXCEPTION_EXECUTE_HANDLER)

  00308	e52de004	 str         lr, [sp, #-4]!
  0030c		 |$LN10@DMA_Open|
  0030c		 |$LN19@DMA_Open|
  0030c	e3a00001	 mov         r0, #1
  00310		 |$LN9@DMA_Open|
  00310	e49df004	 ldr         pc, [sp], #4
  00314		 |$LN21@DMA_Open|
  00314		 |$LN22@DMA_Open|
  00314	00000000	 DCD         |gpSys|
  00318		 |$LN20@DMA_Open|
  00318		 |$LN18@DMA_Open|
	EXPORT	|DMA_Close|
	IMPORT	|?Close@DMASystem@@QAAIK@Z|		; DMASystem::Close

  00030			 AREA	 |.pdata|, PDATA
|$T32691| DCD	|$LN18@DMA_Close|
	DCD	0xc0003105
|$T32693| DCD	|$LN8@DMA_Close|
	DCD	0x40000401

  0003c			 AREA	 |.xdata|, DATA
|$T32689| DCD	0x1
	DCD	|$LN12@DMA_Close|
	DCD	|$LN13@DMA_Close|
	DCD	|$LN8@DMA_Close|
	DCD	|$LN9@DMA_Close|
; Function compile flags: /Odtp

  00318			 AREA	 |.text|, CODE, ARM

  00318	00000000	 DCD         |__C_specific_handler|
  0031c	00000000	 DCD         |$T32689|

  00320		 |DMA_Close| PROC

; 110  : {

  00320		 |$LN18@DMA_Close|
  00320	e1a0c00d	 mov         r12, sp
  00324	e92d0001	 stmdb       sp!, {r0}
  00328	e92d5800	 stmdb       sp!, {r11, r12, lr}
  0032c	e28db00c	 add         r11, sp, #0xC
  00330	e24dd010	 sub         sp, sp, #0x10
  00334		 |$LN16@DMA_Close|

; 111  :     if (!gpSys)

  00334	e59f30b4	 ldr         r3, [pc, #0xB4]
  00338	e5933000	 ldr         r3, [r3]
  0033c	e3530000	 cmp         r3, #0
  00340	1a000005	 bne         |$LN2@DMA_Close|

; 112  :     {
; 113  :         SetLastError(DMADRVERR_NOINIT);

  00344	e3a00106	 mov         r0, #6, 2
  00348	e3800712	 orr         r0, r0, #0x12, 14
  0034c	eb000000	 bl          SetLastError

; 114  :         return 0;

  00350	e3a03000	 mov         r3, #0
  00354	e50b3018	 str         r3, [r11, #-0x18]
  00358	ea00001d	 b           |$LN3@DMA_Close|
  0035c		 |$LN2@DMA_Close|

; 115  :     }
; 116  :     gpSys->Lock();

  0035c	e59f308c	 ldr         r3, [pc, #0x8C]
  00360	e5930000	 ldr         r0, [r3]
  00364	eb000000	 bl          |?Lock@DMASystem@@QAAXXZ|
  00368		 |$LN12@DMA_Close|

; 117  :     uint err;
; 118  :     __try {
; 119  :         err = gpSys->Close(openContext);

  00368	e59b1000	 ldr         r1, [r11]
  0036c	e59f307c	 ldr         r3, [pc, #0x7C]
  00370	e5930000	 ldr         r0, [r3]
  00374	eb000000	 bl          |?Close@DMASystem@@QAAIK@Z|
  00378	e50b0014	 str         r0, [r11, #-0x14]
  0037c	e51b3014	 ldr         r3, [r11, #-0x14]
  00380	e50b301c	 str         r3, [r11, #-0x1C]
  00384		 |$LN13@DMA_Close|

; 120  :     }

  00384	ea000003	 b           |$LN14@DMA_Close|
  00388		 |$LN9@DMA_Close|

; 122  :     {
; 123  :         err = DMADRVERR_EXCEPTION;

  00388	e3a0310e	 mov         r3, #0xE, 2
  0038c	e3833712	 orr         r3, r3, #0x12, 14
  00390	e50b301c	 str         r3, [r11, #-0x1C]
  00394	eaffffff	 b           |$LN14@DMA_Close|
  00398		 |$LN14@DMA_Close|

; 124  :     }
; 125  :     gpSys->Unlock();

  00398	e59f3050	 ldr         r3, [pc, #0x50]
  0039c	e5930000	 ldr         r0, [r3]
  003a0	eb000000	 bl          |?Unlock@DMASystem@@QAAXXZ|

; 126  : 
; 127  :     SetLastError(err);

  003a4	e51b001c	 ldr         r0, [r11, #-0x1C]
  003a8	eb000000	 bl          SetLastError

; 128  :     return (err==0)?TRUE:FALSE;

  003ac	e51b301c	 ldr         r3, [r11, #-0x1C]
  003b0	e3530000	 cmp         r3, #0
  003b4	1a000002	 bne         |$LN5@DMA_Close|
  003b8	e3a03001	 mov         r3, #1
  003bc	e50b3010	 str         r3, [r11, #-0x10]
  003c0	ea000001	 b           |$LN6@DMA_Close|
  003c4		 |$LN5@DMA_Close|
  003c4	e3a03000	 mov         r3, #0
  003c8	e50b3010	 str         r3, [r11, #-0x10]
  003cc		 |$LN6@DMA_Close|
  003cc	e51b3010	 ldr         r3, [r11, #-0x10]
  003d0	e50b3018	 str         r3, [r11, #-0x18]
  003d4		 |$LN3@DMA_Close|
  003d4		 |$LN7@DMA_Close|

; 129  : }

  003d4	e51b0018	 ldr         r0, [r11, #-0x18]
  003d8	e24bd00c	 sub         sp, r11, #0xC
  003dc	e89d6800	 ldmia       sp, {r11, sp, lr}
  003e0	e12fff1e	 bx          lr

			 ENDP  ; |DMA_Close|

  003e4		 |$LN8@DMA_Close|
  003e4		 |$LN17@DMA_Close|

; 121  :     __except (EXCEPTION_EXECUTE_HANDLER)

  003e4	e52de004	 str         lr, [sp, #-4]!
  003e8		 |$LN11@DMA_Close|
  003e8		 |$LN20@DMA_Close|
  003e8	e3a00001	 mov         r0, #1
  003ec		 |$LN10@DMA_Close|
  003ec	e49df004	 ldr         pc, [sp], #4
  003f0		 |$LN22@DMA_Close|
  003f0		 |$LN23@DMA_Close|
  003f0	00000000	 DCD         |gpSys|
  003f4		 |$LN21@DMA_Close|
  003f4		 |$LN19@DMA_Close|
	EXPORT	|DMA_Read|

  00040			 AREA	 |.pdata|, PDATA
|$T32703| DCD	|$LN6@DMA_Read|
	DCD	0x40001804
; Function compile flags: /Odtp

  003f4			 AREA	 |.text|, CODE, ARM

  003f4		 |DMA_Read| PROC

; 132  : {

  003f4		 |$LN6@DMA_Read|
  003f4	e1a0c00d	 mov         r12, sp
  003f8	e92d0007	 stmdb       sp!, {r0 - r2}
  003fc	e92d5000	 stmdb       sp!, {r12, lr}
  00400	e24dd004	 sub         sp, sp, #4
  00404		 |$M32700|

; 133  :     if (!gpSys)

  00404	e59f3044	 ldr         r3, [pc, #0x44]
  00408	e5933000	 ldr         r3, [r3]
  0040c	e3530000	 cmp         r3, #0
  00410	1a000005	 bne         |$LN1@DMA_Read|

; 134  :     {
; 135  :         SetLastError(DMADRVERR_NOINIT);

  00414	e3a00106	 mov         r0, #6, 2
  00418	e3800712	 orr         r0, r0, #0x12, 14
  0041c	eb000000	 bl          SetLastError

; 136  :         return 0;

  00420	e3a03000	 mov         r3, #0
  00424	e58d3000	 str         r3, [sp]
  00428	ea000004	 b           |$LN2@DMA_Read|
  0042c		 |$LN1@DMA_Read|

; 137  :     }
; 138  :     SetLastError(DMADRVERR_NOTSUPPORTED);

  0042c	e3a00112	 mov         r0, #0x12, 2
  00430	e3800712	 orr         r0, r0, #0x12, 14
  00434	eb000000	 bl          SetLastError

; 139  :     return (DWORD)-1;

  00438	e3e03000	 mvn         r3, #0
  0043c	e58d3000	 str         r3, [sp]
  00440		 |$LN2@DMA_Read|

; 140  : }

  00440	e59d0000	 ldr         r0, [sp]
  00444	e28dd004	 add         sp, sp, #4
  00448	e89d6000	 ldmia       sp, {sp, lr}
  0044c	e12fff1e	 bx          lr
  00450		 |$LN7@DMA_Read|
  00450		 |$LN8@DMA_Read|
  00450	00000000	 DCD         |gpSys|
  00454		 |$M32701|

			 ENDP  ; |DMA_Read|

	EXPORT	|DMA_Write|

  00048			 AREA	 |.pdata|, PDATA
|$T32711| DCD	|$LN6@DMA_Write|
	DCD	0x40001804
; Function compile flags: /Odtp

  00454			 AREA	 |.text|, CODE, ARM

  00454		 |DMA_Write| PROC

; 143  : {

  00454		 |$LN6@DMA_Write|
  00454	e1a0c00d	 mov         r12, sp
  00458	e92d0007	 stmdb       sp!, {r0 - r2}
  0045c	e92d5000	 stmdb       sp!, {r12, lr}
  00460	e24dd004	 sub         sp, sp, #4
  00464		 |$M32708|

; 144  :     if (!gpSys)

  00464	e59f3044	 ldr         r3, [pc, #0x44]
  00468	e5933000	 ldr         r3, [r3]
  0046c	e3530000	 cmp         r3, #0
  00470	1a000005	 bne         |$LN1@DMA_Write|

; 145  :     {
; 146  :         SetLastError(DMADRVERR_NOINIT);

  00474	e3a00106	 mov         r0, #6, 2
  00478	e3800712	 orr         r0, r0, #0x12, 14
  0047c	eb000000	 bl          SetLastError

; 147  :         return 0;

  00480	e3a03000	 mov         r3, #0
  00484	e58d3000	 str         r3, [sp]
  00488	ea000004	 b           |$LN2@DMA_Write|
  0048c		 |$LN1@DMA_Write|

; 148  :     }
; 149  :     SetLastError(DMADRVERR_NOTSUPPORTED);

  0048c	e3a00112	 mov         r0, #0x12, 2
  00490	e3800712	 orr         r0, r0, #0x12, 14
  00494	eb000000	 bl          SetLastError

; 150  :     return (DWORD)-1;

  00498	e3e03000	 mvn         r3, #0
  0049c	e58d3000	 str         r3, [sp]
  004a0		 |$LN2@DMA_Write|

; 151  : }

  004a0	e59d0000	 ldr         r0, [sp]
  004a4	e28dd004	 add         sp, sp, #4
  004a8	e89d6000	 ldmia       sp, {sp, lr}
  004ac	e12fff1e	 bx          lr
  004b0		 |$LN7@DMA_Write|
  004b0		 |$LN8@DMA_Write|
  004b0	00000000	 DCD         |gpSys|
  004b4		 |$M32709|

			 ENDP  ; |DMA_Write|

	EXPORT	|DMA_IOControl|
	IMPORT	|?Command@DMASystem@@QAAIKKPAEK0KPAK@Z|	; DMASystem::Command

  00050			 AREA	 |.pdata|, PDATA
|$T32735| DCD	|$LN18@DMA_IOCont|
	DCD	0xc0003b05
|$T32737| DCD	|$LN8@DMA_IOCont|
	DCD	0x40000602

  00050			 AREA	 |.xdata|, DATA
|$T32733| DCD	0x1
	DCD	|$LN12@DMA_IOCont|
	DCD	|$LN13@DMA_IOCont|
	DCD	|$LN8@DMA_IOCont|
	DCD	|$LN9@DMA_IOCont|
; Function compile flags: /Odtp

  004b4			 AREA	 |.text|, CODE, ARM

  004b4	00000000	 DCD         |__C_specific_handler|
  004b8	00000000	 DCD         |$T32733|

  004bc		 |DMA_IOControl| PROC

; 156  : {

  004bc		 |$LN18@DMA_IOCont|
  004bc	e1a0c00d	 mov         r12, sp
  004c0	e92d000f	 stmdb       sp!, {r0 - r3}
  004c4	e92d5800	 stmdb       sp!, {r11, r12, lr}
  004c8	e28db00c	 add         r11, sp, #0xC
  004cc	e24dd030	 sub         sp, sp, #0x30
  004d0		 |$LN16@DMA_IOCont|

; 157  :     if (!gpSys)

  004d0	e59f30e4	 ldr         r3, [pc, #0xE4]
  004d4	e5933000	 ldr         r3, [r3]
  004d8	e3530000	 cmp         r3, #0
  004dc	1a000005	 bne         |$LN2@DMA_IOCont|

; 158  :     {
; 159  :         SetLastError(DMADRVERR_NOINIT);

  004e0	e3a00106	 mov         r0, #6, 2
  004e4	e3800712	 orr         r0, r0, #0x12, 14
  004e8	eb000000	 bl          SetLastError

; 160  :         return 0;

  004ec	e3a03000	 mov         r3, #0
  004f0	e50b3028	 str         r3, [r11, #-0x28]
  004f4	ea000027	 b           |$LN3@DMA_IOCont|
  004f8		 |$LN2@DMA_IOCont|

; 161  :     }
; 162  :     gpSys->Lock();

  004f8	e59f30bc	 ldr         r3, [pc, #0xBC]
  004fc	e5930000	 ldr         r0, [r3]
  00500	eb000000	 bl          |?Lock@DMASystem@@QAAXXZ|
  00504		 |$LN12@DMA_IOCont|

; 163  :     uint err;
; 164  :     __try {
; 165  :         err = gpSys->Command(openContext,code,pInBuffer,inSize,pOutBuffer,outSize,pOutSize);

  00504	e59b3018	 ldr         r3, [r11, #0x18]
  00508	e58d300c	 str         r3, [sp, #0xC]
  0050c	e59b3014	 ldr         r3, [r11, #0x14]
  00510	e58d3008	 str         r3, [sp, #8]
  00514	e59b3010	 ldr         r3, [r11, #0x10]
  00518	e58d3004	 str         r3, [sp, #4]
  0051c	e59b300c	 ldr         r3, [r11, #0xC]
  00520	e58d3000	 str         r3, [sp]
  00524	e59b3008	 ldr         r3, [r11, #8]
  00528	e59b2004	 ldr         r2, [r11, #4]
  0052c	e59b1000	 ldr         r1, [r11]
  00530	e59f0084	 ldr         r0, [pc, #0x84]
  00534	e5900000	 ldr         r0, [r0]
  00538	eb000000	 bl          |?Command@DMASystem@@QAAIKKPAEK0KPAK@Z|
  0053c	e50b0014	 str         r0, [r11, #-0x14]
  00540	e51b3014	 ldr         r3, [r11, #-0x14]
  00544	e50b302c	 str         r3, [r11, #-0x2C]
  00548		 |$LN13@DMA_IOCont|

; 166  :     }

  00548	ea000003	 b           |$LN14@DMA_IOCont|
  0054c		 |$LN9@DMA_IOCont|

; 168  :     {
; 169  :         err = DMADRVERR_EXCEPTION;

  0054c	e3a0310e	 mov         r3, #0xE, 2
  00550	e3833712	 orr         r3, r3, #0x12, 14
  00554	e50b302c	 str         r3, [r11, #-0x2C]
  00558	eaffffff	 b           |$LN14@DMA_IOCont|
  0055c		 |$LN14@DMA_IOCont|

; 170  :     }
; 171  :     gpSys->Unlock();

  0055c	e59f3058	 ldr         r3, [pc, #0x58]
  00560	e5930000	 ldr         r0, [r3]
  00564	eb000000	 bl          |?Unlock@DMASystem@@QAAXXZ|

; 172  : 
; 173  :     SetLastError(err);

  00568	e51b002c	 ldr         r0, [r11, #-0x2C]
  0056c	eb000000	 bl          SetLastError

; 174  :     return (err==0)?TRUE:FALSE;

  00570	e51b302c	 ldr         r3, [r11, #-0x2C]
  00574	e3530000	 cmp         r3, #0
  00578	1a000002	 bne         |$LN5@DMA_IOCont|
  0057c	e3a03001	 mov         r3, #1
  00580	e50b3010	 str         r3, [r11, #-0x10]
  00584	ea000001	 b           |$LN6@DMA_IOCont|
  00588		 |$LN5@DMA_IOCont|
  00588	e3a03000	 mov         r3, #0
  0058c	e50b3010	 str         r3, [r11, #-0x10]
  00590		 |$LN6@DMA_IOCont|
  00590	e51b3010	 ldr         r3, [r11, #-0x10]
  00594	e50b3028	 str         r3, [r11, #-0x28]
  00598		 |$LN3@DMA_IOCont|
  00598		 |$LN7@DMA_IOCont|

; 175  : }

  00598	e51b0028	 ldr         r0, [r11, #-0x28]
  0059c	e24bd00c	 sub         sp, r11, #0xC
  005a0	e89d6800	 ldmia       sp, {r11, sp, lr}
  005a4	e12fff1e	 bx          lr

			 ENDP  ; |DMA_IOControl|

  005a8		 |$LN8@DMA_IOCont|
  005a8		 |$LN17@DMA_IOCont|

; 167  :     __except (EXCEPTION_EXECUTE_HANDLER)

  005a8	e52de004	 str         lr, [sp, #-4]!
  005ac	e24dd010	 sub         sp, sp, #0x10
  005b0		 |$LN11@DMA_IOCont|
  005b0		 |$LN20@DMA_IOCont|
  005b0	e3a00001	 mov         r0, #1
  005b4		 |$LN10@DMA_IOCont|
  005b4	e28dd010	 add         sp, sp, #0x10
  005b8	e49df004	 ldr         pc, [sp], #4
  005bc		 |$LN22@DMA_IOCont|
  005bc		 |$LN23@DMA_IOCont|
  005bc	00000000	 DCD         |gpSys|
  005c0		 |$LN21@DMA_IOCont|
  005c0		 |$LN19@DMA_IOCont|
	EXPORT	|DMA_PowerUp|

  00060			 AREA	 |.pdata|, PDATA
|$T32746| DCD	|$LN5@DMA_PowerU|
	DCD	0x40000503
; Function compile flags: /Odtp

  005c0			 AREA	 |.text|, CODE, ARM

  005c0		 |DMA_PowerUp| PROC

; 178  : {

  005c0		 |$LN5@DMA_PowerU|
  005c0	e1a0c00d	 mov         r12, sp
  005c4	e92d0001	 stmdb       sp!, {r0}
  005c8	e92d5000	 stmdb       sp!, {r12, lr}
  005cc		 |$M32743|

; 179  :     /* no functioning */
; 180  : }

  005cc	e89d6000	 ldmia       sp, {sp, lr}
  005d0	e12fff1e	 bx          lr
  005d4		 |$M32744|

			 ENDP  ; |DMA_PowerUp|

	EXPORT	|DMA_PowerDown|

  00068			 AREA	 |.pdata|, PDATA
|$T32751| DCD	|$LN5@DMA_PowerD|
	DCD	0x40000503
; Function compile flags: /Odtp

  005d4			 AREA	 |.text|, CODE, ARM

  005d4		 |DMA_PowerDown| PROC

; 183  : {

  005d4		 |$LN5@DMA_PowerD|
  005d4	e1a0c00d	 mov         r12, sp
  005d8	e92d0001	 stmdb       sp!, {r0}
  005dc	e92d5000	 stmdb       sp!, {r12, lr}
  005e0		 |$M32748|

; 184  :     /* no functioning */
; 185  : }

  005e0	e89d6000	 ldmia       sp, {sp, lr}
  005e4	e12fff1e	 bx          lr
  005e8		 |$M32749|

			 ENDP  ; |DMA_PowerDown|

	END
