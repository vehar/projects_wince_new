; Listing generated by Microsoft (R) Optimizing Compiler Version 14.01.60511.01 

	TTL	C:\WINCE600\PLATFORM\COMMON\SRC\SOC\OMAP2420_MS_V1\SDHC\BASE\sdhcmain.cpp
	CODE32

  00000			 AREA	 |.drectve|, DRECTVE
	DCB	"-defaultlib:LIBCMT "
	DCB	"-defaultlib:OLDNAMES "

	EXPORT	|dpCurSettings| [ DATA ]

  00000			 AREA	 |.data|, DATA
|dpCurSettings| DCB "S", 0x0, "D", 0x0, "H", 0x0, "C", 0x0, 0x0, 0x0
	%	54
	DCB	"I", 0x0, "n", 0x0, "t", 0x0, "e", 0x0, "r", 0x0, "r", 0x0
	DCB	"u", 0x0, "p", 0x0, "t", 0x0, "s", 0x0, 0x0, 0x0
	%	42
	DCB	"S", 0x0, "e", 0x0, "n", 0x0, "d", 0x0, " ", 0x0, "H", 0x0
	DCB	"a", 0x0, "n", 0x0, "d", 0x0, "l", 0x0, "e", 0x0, "r", 0x0
	DCB	" ", 0x0, 0x0, 0x0
	%	36
	DCB	"R", 0x0, "e", 0x0, "s", 0x0, "p", 0x0, "o", 0x0, "n", 0x0
	DCB	"s", 0x0, "e", 0x0, "s", 0x0, 0x0, 0x0
	%	44
	DCB	"R", 0x0, "e", 0x0, "c", 0x0, "e", 0x0, "i", 0x0, "v", 0x0
	DCB	"e", 0x0, " ", 0x0, "D", 0x0, "a", 0x0, "t", 0x0, "a", 0x0
	DCB	0x0, 0x0
	%	38
	DCB	"C", 0x0, "l", 0x0, "o", 0x0, "c", 0x0, "k", 0x0, " ", 0x0
	DCB	"C", 0x0, "o", 0x0, "n", 0x0, "t", 0x0, "r", 0x0, "o", 0x0
	DCB	"l", 0x0, 0x0, 0x0
	%	36
	DCB	"T", 0x0, "r", 0x0, "a", 0x0, "n", 0x0, "s", 0x0, "m", 0x0
	DCB	"i", 0x0, "t", 0x0, " ", 0x0, "D", 0x0, "a", 0x0, "t", 0x0
	DCB	"a", 0x0, 0x0, 0x0
	%	36
	DCB	"S", 0x0, "D", 0x0, "B", 0x0, "u", 0x0, "s", 0x0, " ", 0x0
	DCB	"I", 0x0, "n", 0x0, "t", 0x0, "e", 0x0, "r", 0x0, "a", 0x0
	DCB	"c", 0x0, "t", 0x0, "i", 0x0, "o", 0x0, "n", 0x0, 0x0, 0x0
	%	28
	DCB	"C", 0x0, "a", 0x0, "r", 0x0, "d", 0x0, " ", 0x0, "B", 0x0
	DCB	"u", 0x0, "s", 0x0, "y", 0x0, " ", 0x0, "S", 0x0, "t", 0x0
	DCB	"a", 0x0, "t", 0x0, "e", 0x0, 0x0, 0x0
	%	32
	DCB	0x0, 0x0
	%	62
	DCB	0x0, 0x0
	%	62
	DCB	0x0, 0x0
	%	62
	DCB	"F", 0x0, "u", 0x0, "n", 0x0, "c", 0x0, "t", 0x0, "i", 0x0
	DCB	"o", 0x0, "n", 0x0, "s", 0x0, 0x0, 0x0
	%	44
	DCB	"I", 0x0, "n", 0x0, "f", 0x0, "o", 0x0, "r", 0x0, "m", 0x0
	DCB	"a", 0x0, "t", 0x0, "i", 0x0, "o", 0x0, "n", 0x0, 0x0, 0x0
	%	40
	DCB	"I", 0x0, "n", 0x0, "i", 0x0, "t", 0x0, 0x0, 0x0
	%	54
	DCB	"W", 0x0, "a", 0x0, "r", 0x0, "n", 0x0, "i", 0x0, "n", 0x0
	DCB	"g", 0x0, "s", 0x0, 0x0, 0x0
	%	46
	DCB	"E", 0x0, "r", 0x0, "r", 0x0, "o", 0x0, "r", 0x0, "s", 0x0
	DCB	0x0, 0x0
	%	50
	DCD	0xe000
	EXPORT	|DllEntry|
	IMPORT	|SDHCDDeinitializeHCLib|
	IMPORT	|SDDeinitializeCardLib|
	IMPORT	|SDHCDInitializeHCLib|
	IMPORT	|SDInitializeCardLib|
	IMPORT	|DisableThreadLibraryCalls|
	IMPORT	|RegisterDbgZones|

  00000			 AREA	 |.pdata|, PDATA
|$T40759| DCD	|$LN11@DllEntry|
	DCD	0x40002b04
; Function compile flags: /Odtp
; File c:\wince600\platform\common\src\soc\omap2420_ms_v1\sdhc\base\sdhcmain.cpp

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |DllEntry| PROC

; 55   : {

  00000		 |$LN11@DllEntry|
  00000	e1a0c00d	 mov         r12, sp
  00004	e92d0007	 stmdb       sp!, {r0 - r2}
  00008	e92d5000	 stmdb       sp!, {r12, lr}
  0000c	e24dd00c	 sub         sp, sp, #0xC
  00010		 |$M40756|

; 56   :     if ( Reason == DLL_PROCESS_ATTACH ) {

  00010	e59d3018	 ldr         r3, [sp, #0x18]
  00014	e3530001	 cmp         r3, #1
  00018	1a000017	 bne         |$LN6@DllEntry|

; 57   :         SD_DEBUG_ZONE_REGISTER(hInstance, NULL);

  0001c	e59f1084	 ldr         r1, [pc, #0x84]
  00020	e59d0014	 ldr         r0, [sp, #0x14]
  00024	eb000000	 bl          RegisterDbgZones

; 58   :         DisableThreadLibraryCalls((HMODULE) hInstance);

  00028	e59d0014	 ldr         r0, [sp, #0x14]
  0002c	eb000000	 bl          DisableThreadLibraryCalls

; 59   : 
; 60   :         if( !SDInitializeCardLib() )

  00030	eb000000	 bl          SDInitializeCardLib
  00034	e58d0004	 str         r0, [sp, #4]
  00038	e59d3004	 ldr         r3, [sp, #4]
  0003c	e3530000	 cmp         r3, #0
  00040	1a000003	 bne         |$LN5@DllEntry|

; 61   :         {
; 62   :             return FALSE;

  00044	e3a03000	 mov         r3, #0
  00048	e58d3000	 str         r3, [sp]
  0004c	ea000011	 b           |$LN7@DllEntry|
  00050	ea000008	 b           |$LN4@DllEntry|
  00054		 |$LN5@DllEntry|

; 63   :         }
; 64   :         else if( !SD_API_SUCCESS( SDHCDInitializeHCLib() ) )

  00054	eb000000	 bl          SDHCDInitializeHCLib
  00058	e58d0008	 str         r0, [sp, #8]
  0005c	e59d3008	 ldr         r3, [sp, #8]
  00060	e3530000	 cmp         r3, #0
  00064	aa000003	 bge         |$LN3@DllEntry|

; 65   :         {
; 66   :             SDDeinitializeCardLib();

  00068	eb000000	 bl          SDDeinitializeCardLib

; 67   :             return FALSE;

  0006c	e3a03000	 mov         r3, #0
  00070	e58d3000	 str         r3, [sp]
  00074	ea000007	 b           |$LN7@DllEntry|
  00078		 |$LN3@DllEntry|
  00078		 |$LN4@DllEntry|

; 68   :         }
; 69   :     }

  00078	ea000004	 b           |$LN2@DllEntry|
  0007c		 |$LN6@DllEntry|

; 70   :     else if ( Reason == DLL_PROCESS_DETACH ) 

  0007c	e59d3018	 ldr         r3, [sp, #0x18]
  00080	e3530000	 cmp         r3, #0
  00084	1a000001	 bne         |$LN1@DllEntry|

; 71   :     {
; 72   :         SDHCDDeinitializeHCLib();

  00088	eb000000	 bl          SDHCDDeinitializeHCLib

; 73   :         SDDeinitializeCardLib();

  0008c	eb000000	 bl          SDDeinitializeCardLib
  00090		 |$LN1@DllEntry|
  00090		 |$LN2@DllEntry|

; 74   :     }
; 75   :     
; 76   :     return(TRUE);

  00090	e3a03001	 mov         r3, #1
  00094	e58d3000	 str         r3, [sp]
  00098		 |$LN7@DllEntry|

; 77   : }

  00098	e59d0000	 ldr         r0, [sp]
  0009c	e28dd00c	 add         sp, sp, #0xC
  000a0	e89d6000	 ldmia       sp, {sp, lr}
  000a4	e12fff1e	 bx          lr
  000a8		 |$LN12@DllEntry|
  000a8		 |$LN13@DllEntry|
  000a8	00000000	 DCD         |dpCurSettings|
  000ac		 |$M40757|

			 ENDP  ; |DllEntry|

	EXPORT	|??_C@_1BI@MLPKMGB@?$AAS?$AAD?$AAH?$AAC?$AA?5?$AA?9?$AAI?$AAn?$AAi?$AAt?$AA?6?$AA?$AA@| [ DATA ] ; `string'
	EXPORT	|SHC_Deinit|
	EXPORT	|??_C@_1FC@NPNLGMF@?$AAS?$AAD?$AAH?$AAC?$AA?5?$AAF?$AAa?$AAi?$AAl?$AAe?$AAd?$AA?5?$AAt?$AAo?$AA?5?$AAc?$AAr?$AAe?$AAa?$AAt?$AAe?$AA?5?$AAc?$AAo?$AAn?$AAt?$AAr?$AAo?$AAl?$AAl?$AAe?$AAr@| [ DATA ] ; `string'
	EXPORT	|??_C@_1DE@PGNMCNJP@?$AAS?$AAD?$AAH?$AAC?$AA?5?$AAA?$AAc?$AAt?$AAi?$AAv?$AAe?$AA?5?$AAR?$AAe?$AAg?$AAP?$AAa?$AAt?$AAh?$AA?3?$AA?5?$AA?$CF?$AAs?$AA?5?$AA?6?$AA?$AA@| [ DATA ] ; `string'
	EXPORT	|??_C@_1BI@PEHNOHNH@?$AAS?$AAD?$AAH?$AAC?$AA?5?$AA?$CL?$AAI?$AAn?$AAi?$AAt?$AA?6?$AA?$AA@| [ DATA ] ; `string'
	EXPORT	|SHC_Init|
	IMPORT	|?Init@CSDIOControllerBase@@QAAHPBG@Z|	; CSDIOControllerBase::Init
	IMPORT	|?CreateSDIOController@@YAPAVCSDIOControllerBase@@XZ| ; CreateSDIOController
	IMPORT	|NKDbgPrintfW|

  00008			 AREA	 |.pdata|, PDATA
|$T40775| DCD	|$LN18@SHC_Init|
	DCD	0x40005c04

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1BI@MLPKMGB@?$AAS?$AAD?$AAH?$AAC?$AA?5?$AA?9?$AAI?$AAn?$AAi?$AAt?$AA?6?$AA?$AA@| DCB "S"
	DCB	0x0, "D", 0x0, "H", 0x0, "C", 0x0, " ", 0x0, "-", 0x0, "I"
	DCB	0x0, "n", 0x0, "i", 0x0, "t", 0x0, 0xa, 0x0, 0x0, 0x0 ; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1FC@NPNLGMF@?$AAS?$AAD?$AAH?$AAC?$AA?5?$AAF?$AAa?$AAi?$AAl?$AAe?$AAd?$AA?5?$AAt?$AAo?$AA?5?$AAc?$AAr?$AAe?$AAa?$AAt?$AAe?$AA?5?$AAc?$AAo?$AAn?$AAt?$AAr?$AAo?$AAl?$AAl?$AAe?$AAr@| DCB "S"
	DCB	0x0, "D", 0x0, "H", 0x0, "C", 0x0, " ", 0x0, "F", 0x0, "a"
	DCB	0x0, "i", 0x0, "l", 0x0, "e", 0x0, "d", 0x0, " ", 0x0, "t"
	DCB	0x0, "o", 0x0, " ", 0x0, "c", 0x0, "r", 0x0, "e", 0x0, "a"
	DCB	0x0, "t", 0x0, "e", 0x0, " ", 0x0, "c", 0x0, "o", 0x0, "n"
	DCB	0x0, "t", 0x0, "r", 0x0, "o", 0x0, "l", 0x0, "l", 0x0, "e"
	DCB	0x0, "r", 0x0, " ", 0x0, "o", 0x0, "b", 0x0, "j", 0x0, "e"
	DCB	0x0, "c", 0x0, "t", 0x0, 0xa, 0x0, 0x0, 0x0 ; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1DE@PGNMCNJP@?$AAS?$AAD?$AAH?$AAC?$AA?5?$AAA?$AAc?$AAt?$AAi?$AAv?$AAe?$AA?5?$AAR?$AAe?$AAg?$AAP?$AAa?$AAt?$AAh?$AA?3?$AA?5?$AA?$CF?$AAs?$AA?5?$AA?6?$AA?$AA@| DCB "S"
	DCB	0x0, "D", 0x0, "H", 0x0, "C", 0x0, " ", 0x0, "A", 0x0, "c"
	DCB	0x0, "t", 0x0, "i", 0x0, "v", 0x0, "e", 0x0, " ", 0x0, "R"
	DCB	0x0, "e", 0x0, "g", 0x0, "P", 0x0, "a", 0x0, "t", 0x0, "h"
	DCB	0x0, ":", 0x0, " ", 0x0, "%", 0x0, "s", 0x0, " ", 0x0, 0xa
	DCB	0x0, 0x0, 0x0				; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1BI@PEHNOHNH@?$AAS?$AAD?$AAH?$AAC?$AA?5?$AA?$CL?$AAI?$AAn?$AAi?$AAt?$AA?6?$AA?$AA@| DCB "S"
	DCB	0x0, "D", 0x0, "H", 0x0, "C", 0x0, " ", 0x0, "+", 0x0, "I"
	DCB	0x0, "n", 0x0, "i", 0x0, "t", 0x0, 0xa, 0x0, 0x0, 0x0 ; `string'
; Function compile flags: /Odtp

  000ac			 AREA	 |.text|, CODE, ARM

  000ac		 |SHC_Init| PROC

; 95   : {

  000ac		 |$LN18@SHC_Init|
  000ac	e1a0c00d	 mov         r12, sp
  000b0	e92d0001	 stmdb       sp!, {r0}
  000b4	e92d5000	 stmdb       sp!, {r12, lr}
  000b8	e24dd028	 sub         sp, sp, #0x28
  000bc		 |$M40772|

; 96   :     LPCTSTR pszActiveKey = (LPCTSTR) dwContext;

  000bc	e59d3030	 ldr         r3, [sp, #0x30]
  000c0	e58d3008	 str         r3, [sp, #8]

; 97   :     DWORD   dwRet = 0;

  000c4	e3a03000	 mov         r3, #0
  000c8	e58d3000	 str         r3, [sp]

; 98   : 
; 99   :     DEBUGMSG(SDCARD_ZONE_INIT, (TEXT("SDHC +Init\n")));    

  000cc	e59f3138	 ldr         r3, [pc, #0x138]
  000d0	e5933440	 ldr         r3, [r3, #0x440]
  000d4	e3130a02	 tst         r3, #2, 20
  000d8	0a000004	 beq         |$LN8@SHC_Init|
  000dc	e59f0134	 ldr         r0, [pc, #0x134]
  000e0	eb000000	 bl          NKDbgPrintfW
  000e4	e3a03001	 mov         r3, #1
  000e8	e58d3010	 str         r3, [sp, #0x10]
  000ec	ea000001	 b           |$LN9@SHC_Init|
  000f0		 |$LN8@SHC_Init|
  000f0	e3a03000	 mov         r3, #0
  000f4	e58d3010	 str         r3, [sp, #0x10]
  000f8		 |$LN9@SHC_Init|

; 100  :     DEBUGMSG(SDCARD_ZONE_INIT, (TEXT("SDHC Active RegPath: %s \n"), pszActiveKey));

  000f8	e59f310c	 ldr         r3, [pc, #0x10C]
  000fc	e5933440	 ldr         r3, [r3, #0x440]
  00100	e3130a02	 tst         r3, #2, 20
  00104	0a000005	 beq         |$LN10@SHC_Init|
  00108	e59d1008	 ldr         r1, [sp, #8]
  0010c	e59f0100	 ldr         r0, [pc, #0x100]
  00110	eb000000	 bl          NKDbgPrintfW
  00114	e3a03001	 mov         r3, #1
  00118	e58d3014	 str         r3, [sp, #0x14]
  0011c	ea000001	 b           |$LN11@SHC_Init|
  00120		 |$LN10@SHC_Init|
  00120	e3a03000	 mov         r3, #0
  00124	e58d3014	 str         r3, [sp, #0x14]
  00128		 |$LN11@SHC_Init|

; 101  : 
; 102  :     PCSDIOControllerBase pController = CreateSDIOController();

  00128	eb000000	 bl          |?CreateSDIOController@@YAPAVCSDIOControllerBase@@XZ|
  0012c	e58d0018	 str         r0, [sp, #0x18]
  00130	e59d3018	 ldr         r3, [sp, #0x18]
  00134	e58d3004	 str         r3, [sp, #4]

; 103  :     if (!pController) {

  00138	e59d3004	 ldr         r3, [sp, #4]
  0013c	e3530000	 cmp         r3, #0
  00140	1a00000c	 bne         |$LN5@SHC_Init|

; 104  :         DEBUGMSG(SDCARD_ZONE_ERROR, (TEXT("SDHC Failed to create controller object\n")));

  00144	e59f30c0	 ldr         r3, [pc, #0xC0]
  00148	e5933440	 ldr         r3, [r3, #0x440]
  0014c	e3130902	 tst         r3, #2, 18
  00150	0a000004	 beq         |$LN12@SHC_Init|
  00154	e59f00b4	 ldr         r0, [pc, #0xB4]
  00158	eb000000	 bl          NKDbgPrintfW
  0015c	e3a03001	 mov         r3, #1
  00160	e58d301c	 str         r3, [sp, #0x1C]
  00164	ea000001	 b           |$LN13@SHC_Init|
  00168		 |$LN12@SHC_Init|
  00168	e3a03000	 mov         r3, #0
  0016c	e58d301c	 str         r3, [sp, #0x1C]
  00170		 |$LN13@SHC_Init|

; 105  :         goto EXIT;

  00170	ea00000b	 b           |$LN4@SHC_Init|
  00174	ea00000a	 b           |$EXIT$39997|
  00178		 |$LN5@SHC_Init|

; 106  :     }
; 107  : 
; 108  :     if (!pController->Init(pszActiveKey)) {

  00178	e59d1008	 ldr         r1, [sp, #8]
  0017c	e59d0004	 ldr         r0, [sp, #4]
  00180	eb000000	 bl          |?Init@CSDIOControllerBase@@QAAHPBG@Z|
  00184	e58d0020	 str         r0, [sp, #0x20]
  00188	e59d3020	 ldr         r3, [sp, #0x20]
  0018c	e3530000	 cmp         r3, #0
  00190	1a000001	 bne         |$LN3@SHC_Init|
  00194	ea000002	 b           |$LN2@SHC_Init|

; 109  :         goto EXIT;

  00198	ea000001	 b           |$EXIT$39997|
  0019c		 |$LN3@SHC_Init|

; 110  :     }
; 111  : 
; 112  :     // Return the controller instance
; 113  :     dwRet = (DWORD) pController;

  0019c	e59d3004	 ldr         r3, [sp, #4]
  001a0	e58d3000	 str         r3, [sp]
  001a4		 |$LN2@SHC_Init|
  001a4		 |$LN4@SHC_Init|
  001a4		 |$EXIT$39997|

; 114  : 
; 115  : EXIT:
; 116  :     if ( (dwRet == 0) && pController ) {

  001a4	e59d3000	 ldr         r3, [sp]
  001a8	e3530000	 cmp         r3, #0
  001ac	1a000004	 bne         |$LN1@SHC_Init|
  001b0	e59d3004	 ldr         r3, [sp, #4]
  001b4	e3530000	 cmp         r3, #0
  001b8	0a000001	 beq         |$LN1@SHC_Init|

; 117  :         SHC_Deinit((DWORD) pController);

  001bc	e59d0004	 ldr         r0, [sp, #4]
  001c0	eb000000	 bl          SHC_Deinit
  001c4		 |$LN1@SHC_Init|

; 118  :     }
; 119  : 
; 120  :     DEBUGMSG(SDCARD_ZONE_INIT, (TEXT("SDHC -Init\n")));

  001c4	e59f3040	 ldr         r3, [pc, #0x40]
  001c8	e5933440	 ldr         r3, [r3, #0x440]
  001cc	e3130a02	 tst         r3, #2, 20
  001d0	0a000004	 beq         |$LN14@SHC_Init|
  001d4	e59f002c	 ldr         r0, [pc, #0x2C]
  001d8	eb000000	 bl          NKDbgPrintfW
  001dc	e3a03001	 mov         r3, #1
  001e0	e58d3024	 str         r3, [sp, #0x24]
  001e4	ea000001	 b           |$LN15@SHC_Init|
  001e8		 |$LN14@SHC_Init|
  001e8	e3a03000	 mov         r3, #0
  001ec	e58d3024	 str         r3, [sp, #0x24]
  001f0		 |$LN15@SHC_Init|

; 121  : 
; 122  :     return dwRet;

  001f0	e59d3000	 ldr         r3, [sp]
  001f4	e58d300c	 str         r3, [sp, #0xC]

; 123  : }

  001f8	e59d000c	 ldr         r0, [sp, #0xC]
  001fc	e28dd028	 add         sp, sp, #0x28
  00200	e89d6000	 ldmia       sp, {sp, lr}
  00204	e12fff1e	 bx          lr
  00208		 |$LN19@SHC_Init|
  00208		 |$LN20@SHC_Init|
  00208	00000000	 DCD         |??_C@_1BI@MLPKMGB@?$AAS?$AAD?$AAH?$AAC?$AA?5?$AA?9?$AAI?$AAn?$AAi?$AAt?$AA?6?$AA?$AA@|
  0020c		 |$LN21@SHC_Init|
  0020c	00000000	 DCD         |dpCurSettings|
  00210		 |$LN22@SHC_Init|
  00210	00000000	 DCD         |??_C@_1FC@NPNLGMF@?$AAS?$AAD?$AAH?$AAC?$AA?5?$AAF?$AAa?$AAi?$AAl?$AAe?$AAd?$AA?5?$AAt?$AAo?$AA?5?$AAc?$AAr?$AAe?$AAa?$AAt?$AAe?$AA?5?$AAc?$AAo?$AAn?$AAt?$AAr?$AAo?$AAl?$AAl?$AAe?$AAr@|
  00214		 |$LN23@SHC_Init|
  00214	00000000	 DCD         |??_C@_1DE@PGNMCNJP@?$AAS?$AAD?$AAH?$AAC?$AA?5?$AAA?$AAc?$AAt?$AAi?$AAv?$AAe?$AA?5?$AAR?$AAe?$AAg?$AAP?$AAa?$AAt?$AAh?$AA?3?$AA?5?$AA?$CF?$AAs?$AA?5?$AA?6?$AA?$AA@|
  00218		 |$LN24@SHC_Init|
  00218	00000000	 DCD         |??_C@_1BI@PEHNOHNH@?$AAS?$AAD?$AAH?$AAC?$AA?5?$AA?$CL?$AAI?$AAn?$AAi?$AAt?$AA?6?$AA?$AA@|
  0021c		 |$M40773|

			 ENDP  ; |SHC_Init|

	EXPORT	|??_C@_1BM@OOIHKKEA@?$AAS?$AAD?$AAH?$AAC?$AA?5?$AA?9?$AAD?$AAe?$AAi?$AAn?$AAi?$AAt?$AA?6?$AA?$AA@| [ DATA ] ; `string'
	EXPORT	|??_C@_1BM@OAPLBGMF@?$AAS?$AAD?$AAH?$AAC?$AA?5?$AA?$CL?$AAD?$AAe?$AAi?$AAn?$AAi?$AAt?$AA?6?$AA?$AA@| [ DATA ] ; `string'
	IMPORT	|?FreeHostContext@CSDIOControllerBase@@QAAXHH@Z| ; CSDIOControllerBase::FreeHostContext

  00010			 AREA	 |.pdata|, PDATA
|$T40791| DCD	|$LN9@SHC_Deinit|
	DCD	0x40002904

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1BM@OOIHKKEA@?$AAS?$AAD?$AAH?$AAC?$AA?5?$AA?9?$AAD?$AAe?$AAi?$AAn?$AAi?$AAt?$AA?6?$AA?$AA@| DCB "S"
	DCB	0x0, "D", 0x0, "H", 0x0, "C", 0x0, " ", 0x0, "-", 0x0, "D"
	DCB	0x0, "e", 0x0, "i", 0x0, "n", 0x0, "i", 0x0, "t", 0x0, 0xa
	DCB	0x0, 0x0, 0x0				; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1BM@OAPLBGMF@?$AAS?$AAD?$AAH?$AAC?$AA?5?$AA?$CL?$AAD?$AAe?$AAi?$AAn?$AAi?$AAt?$AA?6?$AA?$AA@| DCB "S"
	DCB	0x0, "D", 0x0, "H", 0x0, "C", 0x0, " ", 0x0, "+", 0x0, "D"
	DCB	0x0, "e", 0x0, "i", 0x0, "n", 0x0, "i", 0x0, "t", 0x0, 0xa
	DCB	0x0, 0x0, 0x0				; `string'
; Function compile flags: /Odtp

  0021c			 AREA	 |.text|, CODE, ARM

  0021c		 |SHC_Deinit| PROC

; 135  : {    

  0021c		 |$LN9@SHC_Deinit|
  0021c	e1a0c00d	 mov         r12, sp
  00220	e92d0001	 stmdb       sp!, {r0}
  00224	e92d5000	 stmdb       sp!, {r12, lr}
  00228	e24dd010	 sub         sp, sp, #0x10
  0022c		 |$M40788|

; 136  :     DEBUGMSG(SDCARD_ZONE_INIT, (TEXT("SDHC +Deinit\n")));

  0022c	e59f3084	 ldr         r3, [pc, #0x84]
  00230	e5933440	 ldr         r3, [r3, #0x440]
  00234	e3130a02	 tst         r3, #2, 20
  00238	0a000004	 beq         |$LN3@SHC_Deinit|
  0023c	e59f0078	 ldr         r0, [pc, #0x78]
  00240	eb000000	 bl          NKDbgPrintfW
  00244	e3a03001	 mov         r3, #1
  00248	e58d3008	 str         r3, [sp, #8]
  0024c	ea000001	 b           |$LN4@SHC_Deinit|
  00250		 |$LN3@SHC_Deinit|
  00250	e3a03000	 mov         r3, #0
  00254	e58d3008	 str         r3, [sp, #8]
  00258		 |$LN4@SHC_Deinit|

; 137  :     
; 138  :     CSDIOControllerBase *pController = (CSDIOControllerBase*) hDeviceContext;    

  00258	e59d3018	 ldr         r3, [sp, #0x18]
  0025c	e58d3000	 str         r3, [sp]

; 139  :     pController->FreeHostContext( TRUE, TRUE );

  00260	e3a02001	 mov         r2, #1
  00264	e3a01001	 mov         r1, #1
  00268	e59d0000	 ldr         r0, [sp]
  0026c	eb000000	 bl          |?FreeHostContext@CSDIOControllerBase@@QAAXHH@Z|

; 140  :     
; 141  :     DEBUGMSG(SDCARD_ZONE_INIT, (TEXT("SDHC -Deinit\n")));

  00270	e59f3040	 ldr         r3, [pc, #0x40]
  00274	e5933440	 ldr         r3, [r3, #0x440]
  00278	e3130a02	 tst         r3, #2, 20
  0027c	0a000004	 beq         |$LN5@SHC_Deinit|
  00280	e59f002c	 ldr         r0, [pc, #0x2C]
  00284	eb000000	 bl          NKDbgPrintfW
  00288	e3a03001	 mov         r3, #1
  0028c	e58d300c	 str         r3, [sp, #0xC]
  00290	ea000001	 b           |$LN6@SHC_Deinit|
  00294		 |$LN5@SHC_Deinit|
  00294	e3a03000	 mov         r3, #0
  00298	e58d300c	 str         r3, [sp, #0xC]
  0029c		 |$LN6@SHC_Deinit|

; 142  :     
; 143  :     return TRUE;

  0029c	e3a03001	 mov         r3, #1
  002a0	e58d3004	 str         r3, [sp, #4]

; 144  : }

  002a4	e59d0004	 ldr         r0, [sp, #4]
  002a8	e28dd010	 add         sp, sp, #0x10
  002ac	e89d6000	 ldmia       sp, {sp, lr}
  002b0	e12fff1e	 bx          lr
  002b4		 |$LN10@SHC_Deinit|
  002b4		 |$LN11@SHC_Deinit|
  002b4	00000000	 DCD         |??_C@_1BM@OOIHKKEA@?$AAS?$AAD?$AAH?$AAC?$AA?5?$AA?9?$AAD?$AAe?$AAi?$AAn?$AAi?$AAt?$AA?6?$AA?$AA@|
  002b8		 |$LN12@SHC_Deinit|
  002b8	00000000	 DCD         |dpCurSettings|
  002bc		 |$LN13@SHC_Deinit|
  002bc	00000000	 DCD         |??_C@_1BM@OAPLBGMF@?$AAS?$AAD?$AAH?$AAC?$AA?5?$AA?$CL?$AAD?$AAe?$AAi?$AAn?$AAi?$AAt?$AA?6?$AA?$AA@|
  002c0		 |$M40789|

			 ENDP  ; |SHC_Deinit|

	EXPORT	|SHC_Open|

  00018			 AREA	 |.pdata|, PDATA
|$T40801| DCD	|$LN5@SHC_Open|
	DCD	0x40000c04
; Function compile flags: /Odtp

  002c0			 AREA	 |.text|, CODE, ARM

  002c0		 |SHC_Open| PROC

; 160  : {

  002c0		 |$LN5@SHC_Open|
  002c0	e1a0c00d	 mov         r12, sp
  002c4	e92d0007	 stmdb       sp!, {r0 - r2}
  002c8	e92d5000	 stmdb       sp!, {r12, lr}
  002cc	e24dd008	 sub         sp, sp, #8
  002d0		 |$M40798|

; 161  :     CSDIOControllerBase * pController = (CSDIOControllerBase*) hDeviceContext;

  002d0	e59d3010	 ldr         r3, [sp, #0x10]
  002d4	e58d3000	 str         r3, [sp]

; 162  :     return (DWORD) pController;

  002d8	e59d3000	 ldr         r3, [sp]
  002dc	e58d3004	 str         r3, [sp, #4]

; 163  : }

  002e0	e59d0004	 ldr         r0, [sp, #4]
  002e4	e28dd008	 add         sp, sp, #8
  002e8	e89d6000	 ldmia       sp, {sp, lr}
  002ec	e12fff1e	 bx          lr
  002f0		 |$M40799|

			 ENDP  ; |SHC_Open|

	EXPORT	|SHC_Close|

  00020			 AREA	 |.pdata|, PDATA
|$T40807| DCD	|$LN5@SHC_Close|
	DCD	0x40000c04
; Function compile flags: /Odtp

  002f0			 AREA	 |.text|, CODE, ARM

  002f0		 |SHC_Close| PROC

; 177  : {

  002f0		 |$LN5@SHC_Close|
  002f0	e1a0c00d	 mov         r12, sp
  002f4	e92d0001	 stmdb       sp!, {r0}
  002f8	e92d5000	 stmdb       sp!, {r12, lr}
  002fc	e24dd008	 sub         sp, sp, #8
  00300		 |$M40804|

; 178  :     CSDIOControllerBase * pController = (CSDIOControllerBase *) hOpenContext;

  00300	e59d3010	 ldr         r3, [sp, #0x10]
  00304	e58d3000	 str         r3, [sp]

; 179  :     return TRUE;

  00308	e3a03001	 mov         r3, #1
  0030c	e58d3004	 str         r3, [sp, #4]

; 180  : }

  00310	e59d0004	 ldr         r0, [sp, #4]
  00314	e28dd008	 add         sp, sp, #8
  00318	e89d6000	 ldmia       sp, {sp, lr}
  0031c	e12fff1e	 bx          lr
  00320		 |$M40805|

			 ENDP  ; |SHC_Close|

	EXPORT	|??_C@_1GE@HFGIIIMD@?$AAE?$AAR?$AAR?$AAO?$AAR?$AA?3?$AA?5?$AAS?$AAH?$AAC?$AA_?$AAI?$AAO?$AAC?$AAo?$AAn?$AAt?$AAr?$AAo?$AAl?$AA?3?$AA?5?$AAI?$AAn?$AAc?$AAo?$AAr?$AAr?$AAe?$AAc?$AAt?$AA?5@| [ DATA ] ; `string'
	EXPORT	|SHC_IOControl|
	IMPORT	|?IOControl@CSDIOControllerBase@@QAAHKPAEK0KPAK@Z| ; CSDIOControllerBase::IOControl

  00028			 AREA	 |.pdata|, PDATA
|$T40818| DCD	|$LN9@SHC_IOCont|
	DCD	0x40002e04

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1GE@HFGIIIMD@?$AAE?$AAR?$AAR?$AAO?$AAR?$AA?3?$AA?5?$AAS?$AAH?$AAC?$AA_?$AAI?$AAO?$AAC?$AAo?$AAn?$AAt?$AAr?$AAo?$AAl?$AA?3?$AA?5?$AAI?$AAn?$AAc?$AAo?$AAr?$AAr?$AAe?$AAc?$AAt?$AA?5@| DCB "E"
	DCB	0x0, "R", 0x0, "R", 0x0, "O", 0x0, "R", 0x0, ":", 0x0, " "
	DCB	0x0, "S", 0x0, "H", 0x0, "C", 0x0, "_", 0x0, "I", 0x0, "O"
	DCB	0x0, "C", 0x0, "o", 0x0, "n", 0x0, "t", 0x0, "r", 0x0, "o"
	DCB	0x0, "l", 0x0, ":", 0x0, " ", 0x0, "I", 0x0, "n", 0x0, "c"
	DCB	0x0, "o", 0x0, "r", 0x0, "r", 0x0, "e", 0x0, "c", 0x0, "t"
	DCB	0x0, " ", 0x0, "c", 0x0, "o", 0x0, "n", 0x0, "t", 0x0, "e"
	DCB	0x0, "x", 0x0, "t", 0x0, " ", 0x0, "p", 0x0, "a", 0x0, "r"
	DCB	0x0, "a", 0x0, "m", 0x0, "e", 0x0, "r", 0x0, 0xd, 0x0, 0xa
	DCB	0x0, 0x0, 0x0				; `string'
; Function compile flags: /Odtp

  00320			 AREA	 |.text|, CODE, ARM

  00320		 |SHC_IOControl| PROC

; 200  : {

  00320		 |$LN9@SHC_IOCont|
  00320	e1a0c00d	 mov         r12, sp
  00324	e92d000f	 stmdb       sp!, {r0 - r3}
  00328	e92d5000	 stmdb       sp!, {r12, lr}
  0032c	e24dd02c	 sub         sp, sp, #0x2C
  00330		 |$M40815|

; 201  :     BOOL rc = FALSE;

  00330	e3a03000	 mov         r3, #0
  00334	e58d300c	 str         r3, [sp, #0xC]

; 202  :     
; 203  :     CSDIOControllerBase * pController = (CSDIOControllerBase*) hOpenContext;

  00338	e59d3034	 ldr         r3, [sp, #0x34]
  0033c	e58d3010	 str         r3, [sp, #0x10]

; 204  :     
; 205  :     // Check if we get correct context
; 206  :     if (pController == NULL)

  00340	e59d3010	 ldr         r3, [sp, #0x10]
  00344	e3530000	 cmp         r3, #0
  00348	1a00000c	 bne         |$LN2@SHC_IOCont|

; 207  :     {
; 208  :         DEBUGMSG(SDCARD_ZONE_ERROR, (L"ERROR: SHC_IOControl: "
; 209  :             L"Incorrect context paramer\r\n" ));

  0034c	e59f3080	 ldr         r3, [pc, #0x80]
  00350	e5933440	 ldr         r3, [r3, #0x440]
  00354	e3130902	 tst         r3, #2, 18
  00358	0a000004	 beq         |$LN5@SHC_IOCont|
  0035c	e59f006c	 ldr         r0, [pc, #0x6C]
  00360	eb000000	 bl          NKDbgPrintfW
  00364	e3a03001	 mov         r3, #1
  00368	e58d3024	 str         r3, [sp, #0x24]
  0036c	ea000001	 b           |$LN6@SHC_IOCont|
  00370		 |$LN5@SHC_IOCont|
  00370	e3a03000	 mov         r3, #0
  00374	e58d3024	 str         r3, [sp, #0x24]
  00378		 |$LN6@SHC_IOCont|

; 210  :         goto clean;

  00378	ea00000e	 b           |$LN1@SHC_IOCont|
  0037c	ea00000d	 b           |$clean$40043|
  00380		 |$LN2@SHC_IOCont|

; 211  :     }
; 212  : 
; 213  :     
; 214  :     rc = pController->IOControl(dwCode, pBufIn, dwLenIn, pBufOut, dwLenOut, pdwActualOut);

  00380	e59d304c	 ldr         r3, [sp, #0x4C]
  00384	e58d3008	 str         r3, [sp, #8]
  00388	e59d3048	 ldr         r3, [sp, #0x48]
  0038c	e58d3004	 str         r3, [sp, #4]
  00390	e59d3044	 ldr         r3, [sp, #0x44]
  00394	e58d3000	 str         r3, [sp]
  00398	e59d3040	 ldr         r3, [sp, #0x40]
  0039c	e59d203c	 ldr         r2, [sp, #0x3C]
  003a0	e59d1038	 ldr         r1, [sp, #0x38]
  003a4	e59d0010	 ldr         r0, [sp, #0x10]
  003a8	eb000000	 bl          |?IOControl@CSDIOControllerBase@@QAAHKPAEK0KPAK@Z|
  003ac	e58d0028	 str         r0, [sp, #0x28]
  003b0	e59d3028	 ldr         r3, [sp, #0x28]
  003b4	e58d300c	 str         r3, [sp, #0xC]
  003b8		 |$LN1@SHC_IOCont|
  003b8		 |$clean$40043|

; 215  :     
; 216  : clean:
; 217  :     return rc;

  003b8	e59d300c	 ldr         r3, [sp, #0xC]
  003bc	e58d3020	 str         r3, [sp, #0x20]

; 218  : }

  003c0	e59d0020	 ldr         r0, [sp, #0x20]
  003c4	e28dd02c	 add         sp, sp, #0x2C
  003c8	e89d6000	 ldmia       sp, {sp, lr}
  003cc	e12fff1e	 bx          lr
  003d0		 |$LN10@SHC_IOCont|
  003d0		 |$LN11@SHC_IOCont|
  003d0	00000000	 DCD         |??_C@_1GE@HFGIIIMD@?$AAE?$AAR?$AAR?$AAO?$AAR?$AA?3?$AA?5?$AAS?$AAH?$AAC?$AA_?$AAI?$AAO?$AAC?$AAo?$AAn?$AAt?$AAr?$AAo?$AAl?$AA?3?$AA?5?$AAI?$AAn?$AAc?$AAo?$AAr?$AAr?$AAe?$AAc?$AAt?$AA?5@|
  003d4		 |$LN12@SHC_IOCont|
  003d4	00000000	 DCD         |dpCurSettings|
  003d8		 |$M40816|

			 ENDP  ; |SHC_IOControl|

	END
